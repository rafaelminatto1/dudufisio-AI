#!/usr/bin/env sh

echo "ğŸ” Executando verificaÃ§Ãµes prÃ©-commit..."

# 1. VerificaÃ§Ã£o rÃ¡pida de linting (apenas erros crÃ­ticos)
echo "ğŸ§¹ Verificando linting crÃ­tico..."
npm run lint --max-warnings=10 || {
    echo "âš ï¸ Problemas de linting encontrados. Execute 'npm run lint:fix' para corrigir."
    echo "ğŸ’¡ Commit permitido, mas recomenda-se correÃ§Ã£o."
}

# 2. VerificaÃ§Ã£o de seguranÃ§a (apenas vulnerabilidades crÃ­ticas)
echo "ğŸ›¡ï¸ Verificando vulnerabilidades crÃ­ticas..."
npm audit --audit-level=high || {
    echo "âš ï¸ Vulnerabilidades crÃ­ticas encontradas! Considere corrigir antes do commit."
}

# 3. VerificaÃ§Ã£o bÃ¡sica de tipos (nÃ£o bloqueia commit)
echo "ğŸ“ Verificando tipos TypeScript..."
npm run type-check || {
    echo "âš ï¸ Erros de tipo encontrados, mas nÃ£o bloqueando commit."
    echo "ğŸ’¡ Corrija os erros de tipo quando possÃ­vel."
}

echo "âœ… VerificaÃ§Ãµes prÃ©-commit concluÃ­das! Commit permitido."
