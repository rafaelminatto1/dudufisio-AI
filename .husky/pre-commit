#!/usr/bin/env sh

echo "🔍 Executando verificações pré-commit..."

# 1. Verificação rápida de linting (apenas erros críticos)
echo "🧹 Verificando linting crítico..."
npm run lint --max-warnings=10 || {
    echo "⚠️ Problemas de linting encontrados. Execute 'npm run lint:fix' para corrigir."
    echo "💡 Commit permitido, mas recomenda-se correção."
}

# 2. Verificação de segurança (apenas vulnerabilidades críticas)
echo "🛡️ Verificando vulnerabilidades críticas..."
npm audit --audit-level=high || {
    echo "⚠️ Vulnerabilidades críticas encontradas! Considere corrigir antes do commit."
}

# 3. Verificação básica de tipos (não bloqueia commit)
echo "📝 Verificando tipos TypeScript..."
npm run type-check || {
    echo "⚠️ Erros de tipo encontrados, mas não bloqueando commit."
    echo "💡 Corrija os erros de tipo quando possível."
}

echo "✅ Verificações pré-commit concluídas! Commit permitido."
