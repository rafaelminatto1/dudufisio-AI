{
  "meta": {
    "project": "DuduFisio-AI",
    "date": "2025-09-13",
    "prepared_by": "Software Development Manager"
  },
  "product_overview": "DuduFisio-AI is a comprehensive management system tailored for physiotherapy clinics that unites traditional clinical management functionalities with advanced artificial intelligence assistance to optimize patient care, clinical documentation, and operational management.",
  "core_goals": [
    "Digitize and automate physiotherapy clinical processes",
    "Enhance clinical documentation quality through AI-driven support",
    "Increase operational efficiency and patient satisfaction"
  ],
  "key_features": [
    "Comprehensive patient management with interactive body pain mapping and advanced search capabilities",
    "Robust multi-view appointment scheduling system with conflict prevention and recurring booking functionality",
    "Rich clinical documentation with SOAP notes editor, auto-save, version history, and customizable templates",
    "AI assistant providing automated report generation, treatment protocol suggestions, risk analysis, clinical query responses, and financial insights",
    "Extensive exercise library with multimedia content, personalized prescribing, and safety alerts",
    "Dedicated patient portal with secure access to personal data, prescription views, appointment management, and direct communication",
    "Interactive dashboards and customizable reports covering clinical metrics and financial analytics",
    "Thorough financial management including transactions, revenue reports, and multiple payment integrations",
    "Inventory management system with stock alerts and historical tracking",
    "Task management features with prioritization and notification system",
    "Compliance with LGPD and robust security measures including 2FA and data encryption",
    "Integration with external APIs such as Google Gemini AI, payment services, notification systems, and calendar sync"
  ],
  "user_flow_summary": [
    "User logs in via secure authentication system (supports 2FA and social login)",
    "Administrators manage clinic data including patients, staff, inventory, and finances",
    "Fisioterapeutas schedule and manage appointments, document clinical notes using rich editor, and prescribe exercises",
    "Patients access their portal to view records, exercises, and communicate with the clinic",
    "AI assistant analyzes clinical data to generate reports and suggest treatments",
    "Users review dashboards for analytics and financial reports",
    "Notifications and reminders are sent automatically for appointments and tasks",
    "System maintains data compliance with LGPD and performs automated backups"
  ],
  "validation_criteria": [
    "System supports role-based access control and session management with 2FA",
    "Patient registration validates CPF, prevents duplicates, and supports secure media uploads",
    "Appointment scheduling prevents overlapping conflicts and supports recurring bookings",
    "Clinical documentation editor supports rich text, auto-save, version control, and template use",
    "AI-generated clinical reports achieve 95% accuracy in laudo generation",
    "Exercise library supports multimedia and provides alert for contraindications",
    "Patient portal securely exposes personal data, appointments, and communication channels",
    "Financial transactions recorded accurately with multiple payment method integrations",
    "System complies with LGPD data protection requirements",
    "System maintains 99.5% uptime and pages load in under 2 seconds on 3G connections",
    "Comprehensive automated tests cover authentication, scheduling, documentation, AI integration, and notification features"
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React",
      "Vite",
      "Supabase",
      "PostgreSQL",
      "TailwindCSS",
      "shadcn/ui",
      "Framer Motion",
      "Recharts",
      "Jest",
      "React Testing Library"
    ],
    "features": [
      {
        "name": "Sistema de Autenticação",
        "description": "Sistema completo de autenticação com Supabase, suporte a 2FA, login social e gestão de sessões",
        "files": [
          "contexts/SupabaseAuthContext.tsx",
          "services/auth/supabaseAuthService.ts",
          "services/auth/authService.ts",
          "types/user.ts"
        ]
      },
      {
        "name": "Gestão de Pacientes",
        "description": "Sistema completo de cadastro, edição e visualização de pacientes com histórico clínico",
        "files": [
          "components/pacientes/PatientForm.tsx",
          "components/pacientes/PatientList.tsx",
          "components/pacientes/PatientDetailClient.tsx",
          "components/PatientFormModal.tsx",
          "services/patientService.ts",
          "services/supabase/patientService.ts"
        ]
      },
      {
        "name": "Sistema de Agendamento",
        "description": "Sistema avançado de agendamento com múltiplas visualizações (diária, semanal, mensal) e gestão de conflitos",
        "files": [
          "components/agenda/DailyView.tsx",
          "components/agenda/WeeklyView.tsx",
          "components/agenda/MonthlyView.tsx",
          "components/agenda/ListView.tsx",
          "components/agenda/BookingModal.tsx",
          "components/AppointmentCard.tsx",
          "components/AppointmentFormModal.tsx",
          "services/appointmentService.ts",
          "services/supabase/appointmentService.ts",
          "services/scheduling/conflictDetection.ts",
          "services/scheduling/recurrenceService.ts"
        ]
      },
      {
        "name": "Mapa Corporal Interativo",
        "description": "Sistema de mapeamento de dor e pontos de tratamento no corpo humano",
        "files": [
          "components/InteractiveBodyMap.tsx",
          "components/patient/PainMap.tsx",
          "components/patient/PainPointModal.tsx",
          "components/patient/bodyPaths.ts",
          "components/PainScale.tsx"
        ]
      },
      {
        "name": "Biblioteca de Exercícios",
        "description": "Sistema de prescrição e gestão de exercícios terapêuticos",
        "files": [
          "components/ExerciseCard.tsx",
          "components/ExerciseFormModal.tsx",
          "services/exerciseService.ts",
          "services/exerciseLibraryService.ts",
          "data/mockExerciseLibrary.ts"
        ]
      },
      {
        "name": "Sistema de Relatórios e Analytics",
        "description": "Dashboard com métricas clínicas, relatórios financeiros e analytics avançados",
        "files": [
          "components/analytics/ClinicalAnalyticsDashboard.tsx",
          "components/dashboard/KPICards.tsx",
          "components/dashboard/RevenueChart.tsx",
          "components/dashboard/TeamProductivityChart.tsx",
          "components/reports/FinancialReport.tsx",
          "components/reports/PatientReport.tsx",
          "services/analytics/advancedAnalyticsService.ts",
          "services/reportService.ts"
        ]
      },
      {
        "name": "Sistema de Teleconsulta",
        "description": "Funcionalidade de consultas remotas com WebRTC e compartilhamento de conteúdo",
        "files": [
          "components/teleconsulta/VideoFeed.tsx",
          "components/teleconsulta/ControlBar.tsx",
          "components/teleconsulta/PatientInfoPanel.tsx",
          "components/teleconsulta/ExerciseSharePanel.tsx",
          "components/teleconsulta/PainMapSharePanel.tsx",
          "services/teleconsulta/webrtcTeleconsultaService.ts"
        ]
      },
      {
        "name": "Sistema de Gamificação",
        "description": "Sistema de gamificação para engajamento de pacientes",
        "files": [
          "components/patient-portal/gamification/",
          "services/gamificationService.ts"
        ]
      },
      {
        "name": "Gestão Financeira",
        "description": "Sistema de gestão financeira com transações e relatórios",
        "files": [
          "components/financial/TransactionFormModal.tsx",
          "components/financial/TransactionList.tsx",
          "services/financialService.ts",
          "services/payment/paymentService.ts"
        ]
      },
      {
        "name": "Sistema de Inventário",
        "description": "Gestão de materiais clínicos e equipamentos",
        "files": [
          "components/inventory/ItemCard.tsx",
          "components/inventory/ItemFormModal.tsx",
          "components/inventory/StockLevel.tsx",
          "components/inventory/ExpiryWarning.tsx",
          "services/inventoryService.ts"
        ]
      },
      {
        "name": "Sistema de Mentoria",
        "description": "Sistema de mentoria para estagiários e supervisão clínica",
        "files": [
          "components/mentoria/CasesList.tsx",
          "components/mentoria/InternsTable.tsx",
          "components/mentoria/MentoriaStats.tsx",
          "services/mentoriaService.ts"
        ]
      },
      {
        "name": "Assistente de IA",
        "description": "Sistema de IA para sugestões clínicas e análise de dados",
        "files": [
          "components/AiAssistant.tsx",
          "components/acompanhamento/AiSuggestionModal.tsx",
          "services/ai/aiOrchestratorService.ts",
          "services/ai/multimodalAiService.ts",
          "services/geminiService.ts"
        ]
      },
      {
        "name": "Portal do Paciente",
        "description": "Interface dedicada para pacientes acessarem seus dados e exercícios",
        "files": [
          "components/patient-portal/PatientSidebar.tsx",
          "components/patient-portal/AppointmentCard.tsx",
          "components/patient-portal/ExerciseEvaluationCard.tsx",
          "components/patient-portal/PainTrendChart.tsx",
          "layouts/PatientPortalLayout.tsx"
        ]
      },
      {
        "name": "Sistema de Compliance LGPD",
        "description": "Funcionalidades de conformidade com a LGPD para proteção de dados",
        "files": [
          "services/compliance/lgpdService.ts"
        ]
      },
      {
        "name": "Sistema de Backup Multi-Cloud",
        "description": "Sistema de backup automatizado para múltiplas nuvens",
        "files": [
          "services/backup/multiCloudBackupService.ts"
        ]
      },
      {
        "name": "Sistema de Assinatura Digital",
        "description": "Funcionalidade de assinatura digital para documentos clínicos",
        "files": [
          "services/digital-signature/digitalSignatureService.ts"
        ]
      },
      {
        "name": "Integração WhatsApp",
        "description": "Sistema de comunicação via WhatsApp para pacientes",
        "files": [
          "components/whatsapp/WhatsappChatInterface.tsx",
          "services/whatsappService.ts",
          "services/whatsappLogService.ts"
        ]
      },
      {
        "name": "Sistema de Notificações",
        "description": "Sistema de notificações em tempo real",
        "files": [
          "services/notificationService.ts",
          "services/supabase/realtimeService.ts"
        ]
      },
      {
        "name": "Sistema de Avaliações",
        "description": "Sistema de avaliações clínicas e formulários especializados",
        "files": [
          "components/forms/SportsAssessmentForm.tsx",
          "components/SpecialtyAssessmentGallery.tsx",
          "services/evaluationService.ts"
        ]
      },
      {
        "name": "Sistema de Grupos",
        "description": "Gestão de grupos de pacientes e exercícios em grupo",
        "files": [
          "components/GroupCard.tsx",
          "components/GroupFormModal.tsx",
          "services/groupService.ts"
        ]
      },
      {
        "name": "Sistema de Vouchers",
        "description": "Sistema de vouchers e planos de tratamento",
        "files": [
          "components/partners/SellVoucherCard.tsx",
          "components/patient-portal/VoucherPlanCard.tsx",
          "components/patient-portal/VoucherPurchaseModal.tsx",
          "services/voucherService.ts"
        ]
      }
    ]
  }
}
