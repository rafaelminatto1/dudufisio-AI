(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1450],{6394:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(17963).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},14776:(e,t,a)=>{"use strict";a.d(t,{Bx:()=>f,D_:()=>m,Ks:()=>o,Kw:()=>x,Lc:()=>u,UB:()=>p,W6:()=>c,WW:()=>i,Xh:()=>s,YY:()=>l,aJ:()=>w,e1:()=>d,fb:()=>v,m7:()=>b,pn:()=>h,q1:()=>n,tv:()=>g,y2:()=>r});var s=function(e){return e.Admin="Admin",e.Therapist="Fisioterapeuta",e.Patient="Paciente",e.EducadorFisico="EducadorFisico",e}({}),i=function(e){return e.Active="Active",e.Inactive="Inactive",e.Discharged="Discharged",e}({}),r=function(e){return e.Scheduled="Agendado",e.Completed="Realizado",e.Canceled="Cancelado",e.NoShow="Faltou",e}({}),l=function(e){return e.Evaluation="Avalia\xe7\xe3o",e.Session="Sess\xe3o",e.Return="Retorno",e.Pilates="Pilates",e.Urgent="Urgente",e.Teleconsulta="Teleconsulta",e}({});let n={Avaliação:"purple",Sessão:"emerald",Retorno:"blue",Pilates:"amber",Urgente:"red",Teleconsulta:"cyan"};var o=function(e){return e.Active="Ativo",e.Concluded="Conclu\xeddo",e.Paused="Pausado",e}({}),d=function(e){return e.ToDo="A Fazer",e.InProgress="Em Andamento",e.Done="Conclu\xeddo",e}({}),c=function(e){return e.High="Alta",e.Medium="M\xe9dia",e.Low="Baixa",e}({}),m=function(e){return e.Receita="Receita",e.Despesa="Despesa",e}({}),u=function(e){return e.Aluguel="Aluguel",e.Salarios="Sal\xe1rios",e.Marketing="Marketing",e.Suprimentos="Suprimentos",e.Equipamentos="Equipamentos",e.Impostos="Impostos",e.Outros="Outros",e}({}),h=function(e){return e.Active="Ativo",e.Inactive="Inativo",e}({}),x=function(e){return e.Active="Ativo",e.OutOfStock="Sem Estoque",e.Discontinued="Descontinuado",e}({}),p=function(e){return e.In="Entrada",e.Out="Sa\xedda",e}({}),g=function(e){return e.LowStock="Estoque Baixo",e.OutOfStock="Sem Estoque",e.Expiring="Vencimento Pr\xf3ximo",e.Expired="Vencido",e}({}),f=function(e){return e.Corrida="Corrida de Rua",e.Workshop="Workshop",e.Palestra="Palestra",e.Campanha="Campanha de Sa\xfade",e.Atendimento="Atendimento Externo",e}({}),v=function(e){return e.Draft="Rascunho",e.Published="Publicado",e.Active="Ativo",e.Completed="Conclu\xeddo",e.Cancelled="Cancelado",e}({}),b=function(e){return e.Pending="Pendente",e.Confirmed="Confirmado",e.Attended="Compareceu",e.Cancelled="Cancelado",e}({}),w=function(e){return e.Applied="Inscrito",e.Confirmed="Confirmado",e.Paid="Pago",e.Cancelled="Cancelado",e}({})},17963:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var s=a(14232);let i=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},r=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:i=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:m,...u}=e;return(0,s.createElement)("svg",{ref:t,...l,width:i,height:i,stroke:a,strokeWidth:o?24*Number(n)/Number(i):n,className:r("lucide",d),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...m.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let a=(0,s.forwardRef)((a,l)=>{let{className:o,...d}=a;return(0,s.createElement)(n,{ref:l,iconNode:t,className:r("lucide-".concat(i(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...d})});return a.displayName=i(e),a}},18696:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/AgendaSettingsPage",function(){return a(44586)}])},35880:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(37876);a(14232);let i=e=>{let{title:t,subtitle:a,children:i}=e;return(0,s.jsxs)("div",{className:"pb-8 md:flex md:items-center md:justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold leading-tight text-slate-900 tracking-tight",children:t}),(0,s.jsx)("p",{className:"mt-2 text-lg text-slate-600",children:a})]}),(0,s.jsx)("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:i})]})}},44586:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(37876),i=a(14232),r=a(93536),l=a(6394),n=a(60383),o=a(85154),d=a(35880),c=a(66822);let m=e=>{let{slot:t,onUpdate:a,onRemove:i}=e;return(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-3 items-center",children:[(0,s.jsx)("input",{type:"time",value:t.startTime,onChange:e=>a("startTime",e.target.value),className:"w-full p-2 border border-slate-300 rounded-lg"}),(0,s.jsx)("input",{type:"time",value:t.endTime,onChange:e=>a("endTime",e.target.value),className:"w-full p-2 border border-slate-300 rounded-lg"}),(0,s.jsx)("input",{type:"number",min:"0",value:t.limit,onChange:e=>a("limit",parseInt(e.target.value,10)||0),className:"w-full p-2 border border-slate-300 rounded-lg"}),(0,s.jsx)("button",{onClick:i,className:"p-2 text-red-500 hover:bg-red-50 rounded-full justify-self-center",children:(0,s.jsx)(r.A,{className:"w-5 h-5"})})]})},u=()=>{let[e,t]=(0,i.useState)(()=>o.T.getSettings()),{showToast:a}=(0,c.dj)(),r=(e,a,s,i)=>{t(t=>{let r=[...t.limits[e]],l=r[a];if(!l)return t;let n={id:l.id,startTime:l.startTime,endTime:l.endTime,limit:l.limit};return"limit"===s?n.limit=Number(i):("startTime"===s||"endTime"===s||"id"===s)&&(n[s]=String(i)),r[a]=n,{...t,limits:{...t.limits,[e]:r}}})},u=(e,a)=>{t(t=>({...t,limits:{...t.limits,[e]:t.limits[e].filter((e,t)=>t!==a)}}))},h=e=>{let a={id:"new_".concat(Date.now()),startTime:"08:00",endTime:"12:00",limit:3};t(t=>({...t,limits:{...t.limits,[e]:[...t.limits[e],a]}}))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.A,{title:"Configura\xe7\xf5es da Agenda",subtitle:"Defina os limites de agendamento e a capacidade da sua cl\xednica por hor\xe1rio.",children:(0,s.jsxs)("button",{onClick:()=>{o.T.saveSettings(e),a("Configura\xe7\xf5es salvas com sucesso!","success")},className:"inline-flex items-center justify-center rounded-lg border border-transparent bg-teal-500 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-teal-600",children:[(0,s.jsx)(l.A,{className:"w-5 h-5 mr-2"}),"Salvar Altera\xe7\xf5es"]})}),(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Limites por Faixa de Hor\xe1rio (Segunda a Sexta)"}),(0,s.jsx)("p",{className:"text-sm text-slate-500 mb-4",children:"Defina o n\xfamero m\xe1ximo de pacientes que podem ser agendados simultaneamente em cada per\xedodo."}),(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-3 text-sm font-medium text-slate-600 px-1 mb-2",children:[(0,s.jsx)("span",{children:"In\xedcio"}),(0,s.jsx)("span",{children:"Fim"}),(0,s.jsx)("span",{children:"Limite Pacientes"}),(0,s.jsx)("span",{className:"text-center",children:"A\xe7\xe3o"})]}),(0,s.jsx)("div",{className:"space-y-2",children:e.limits.weekday.map((e,t)=>(0,s.jsx)(m,{slot:e,onUpdate:(e,a)=>r("weekday",t,e,a),onRemove:()=>u("weekday",t)},e.id))}),(0,s.jsxs)("button",{onClick:()=>h("weekday"),className:"mt-4 flex items-center text-sm font-semibold text-teal-600 hover:text-teal-700",children:[(0,s.jsx)(n.A,{className:"w-4 h-4 mr-2"})," Adicionar Faixa de Hor\xe1rio"]})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Limites por Faixa de Hor\xe1rio (S\xe1bado)"}),(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-3 text-sm font-medium text-slate-600 px-1 mb-2",children:[(0,s.jsx)("span",{children:"In\xedcio"}),(0,s.jsx)("span",{children:"Fim"}),(0,s.jsx)("span",{children:"Limite Pacientes"}),(0,s.jsx)("span",{className:"text-center",children:"A\xe7\xe3o"})]}),(0,s.jsx)("div",{className:"space-y-2",children:e.limits.saturday.map((e,t)=>(0,s.jsx)(m,{slot:e,onUpdate:(e,a)=>r("saturday",t,e,a),onRemove:()=>u("saturday",t)},e.id))}),(0,s.jsxs)("button",{onClick:()=>h("saturday"),className:"mt-4 flex items-center text-sm font-semibold text-teal-600 hover:text-teal-700",children:[(0,s.jsx)(n.A,{className:"w-4 h-4 mr-2"})," Adicionar Faixa de Hor\xe1rio"]})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Regras Globais"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"max-evals",className:"block text-sm font-medium text-slate-700",children:"M\xe1ximo de Avalia\xe7\xf5es por Hor\xe1rio"}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mb-2",children:"Isso se aplica a qualquer hor\xe1rio, independentemente do limite de pacientes, devido \xe0 limita\xe7\xe3o da sala."}),(0,s.jsx)("input",{id:"max-evals",type:"number",min:"0",value:e.maxEvaluationsPerSlot,onChange:e=>t(t=>({...t,maxEvaluationsPerSlot:parseInt(e.target.value)||0})),className:"w-full max-w-xs p-2 border border-slate-300 rounded-lg"})]})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"M\xf3dulos Adicionais"}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-slate-800",children:"M\xf3dulo de Teleconsulta"}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"Permite realizar atendimentos por v\xeddeo diretamente na plataforma."})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:e.teleconsultaEnabled,onChange:e=>t(t=>({...t,teleconsultaEnabled:e.target.checked})),className:"sr-only peer"}),(0,s.jsx)("div",{className:"w-11 h-6 bg-slate-200 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-teal-500"})]})]})]})]})]})}},60383:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(17963).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},66822:(e,t,a)=>{"use strict";a.d(t,{dj:()=>l}),a(37876);var s=a(14232);let i=(0,s.createContext)(void 0),r=(0,s.createContext)(void 0),l=()=>{let e=(()=>{let e=(0,s.useContext)(i);return void 0===e?{enabled:!1,logRouterChange:()=>{},logHookCall:()=>{},logContextAccess:()=>{}}:e})(),t=(0,s.useContext)(r);if(e.logContextAccess("ToastContext","useToast"),!t){let e=Error("useToast must be used within a ToastProvider");throw console.error("❌ Toast Context Error:",e.message),e}return{showToast:t.showToast}}},85154:(e,t,a)=>{"use strict";a.d(t,{T:()=>n});var s=a(14776);let i="fisioflow_scheduling_settings",r={limits:{weekday:[{id:"wd1",startTime:"07:00",endTime:"13:00",limit:3},{id:"wd2",startTime:"13:00",endTime:"15:00",limit:1},{id:"wd3",startTime:"15:00",endTime:"21:00",limit:4}],saturday:[{id:"sat1",startTime:"07:00",endTime:"13:00",limit:3}]},maxEvaluationsPerSlot:1,teleconsultaEnabled:!1};class l{getSettings(){try{let e=localStorage.getItem(i);if(e){let t=JSON.parse(e);return{...r,...t}}}catch(e){console.error("Failed to parse scheduling settings from localStorage",e)}return r}saveSettings(e){try{e.limits.weekday.sort((e,t)=>e.startTime.localeCompare(t.startTime)),e.limits.saturday.sort((e,t)=>e.startTime.localeCompare(t.startTime)),localStorage.setItem(i,JSON.stringify(e))}catch(e){console.error("Failed to save scheduling settings to localStorage",e)}}getSlotOccupancy(e,t,a){let i=this.getSettings(),r=e.getDay(),l=e.toTimeString().slice(0,5),n=(6===r?i.limits.saturday:i.limits.weekday).find(e=>l>=e.startTime&&l<e.endTime)||{limit:0},o=t.filter(t=>(!a||t.id!==a)&&t.startTime.getTime()===e.getTime()),d=o.filter(e=>e.type===s.YY.Evaluation),c=o.length>=n.limit,m=d.length>=i.maxEvaluationsPerSlot;return{patientCount:o.length,patientLimit:n.limit,evalCount:d.length,evalLimit:i.maxEvaluationsPerSlot,isFull:0===n.limit||c,isPatientLimitFull:0===n.limit||c,isEvalLimitFull:m}}}let n=new l},93536:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(17963).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])}},e=>{e.O(0,[636,6593,8792],()=>e(e.s=18696)),_N_E=e.O()}]);