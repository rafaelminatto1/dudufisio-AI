(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3015],{32257:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(17963).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},46443:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(17963).A)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]])},73594:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var a=s(37876),l=s(14232),n=s(35880);let i=(0,s(17963).A)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);var r=s(28113),o=s(41547),d=s(39303),c=s(75345);let m=()=>{let[e,t]=(0,l.useState)([]),[s,n]=(0,l.useState)(""),[m,x]=(0,l.useState)(!1),[h,u]=(0,l.useState)("initial"),p=(0,l.useRef)(null),{user:g}=(0,o.As)(),b={...(null==g?void 0:g.id)&&{id:g.id},...(null==g?void 0:g.name)&&{name:g.name},whatsappConsent:"opt-in"};(0,l.useEffect)(()=>{t([{id:Date.now(),text:"Ol\xe1, ".concat(b.name,"! \uD83D\uDC4B Sou o assistente virtual da FisioFlow. Como posso ajudar?\n\n*1* - Ver meus exerc\xedcios de hoje\n*2* - Agendar uma nova consulta\n*3* - Falar com um atendente"),sender:"bot"}])},[b.name]),(0,l.useEffect)(()=>{var e;null==(e=p.current)||e.scrollIntoView({behavior:"smooth"})},[e,m]);let f=e=>{x(!0),setTimeout(()=>{let s={id:Date.now(),text:e,sender:"bot"};t(e=>[...e,s]),x(!1)},1e3+500*Math.random())},j=async e=>{let s={id:Date.now(),text:e,sender:"user"};if(t(e=>[...e,s]),n(""),b.id&&b.name&&b.phone&&c._z(b,e,"chat"),"initial"===h)if("1"===e.trim()){let e=await d.z0("1");if(e&&e.exercises){let t=e.exercises.map(e=>" - ".concat(e.exerciseName," (").concat(e.sets,"x").concat(e.repetitions,")")).join("\n");f("Claro! Seus exerc\xedcios para hoje s\xe3o:\n".concat(t,"\n\nLembre-se de marcar como feito no seu portal! \uD83D\uDE09"))}else f("Voc\xea n\xe3o tem um plano de exerc\xedcios ativo no momento.")}else"2"===e.trim()?(f("Para agendar, preciso saber o melhor dia e per\xedodo para voc\xea. Por exemplo: 'ter\xe7a de manh\xe3' ou 'sexta \xe0 tarde'."),u("scheduling_day")):"3"===e.trim()?(f("Ok! Um de nossos atendentes entrar\xe1 em contato com voc\xea por aqui em breve. Por favor, aguarde."),u("waiting_human")):f("Desculpe, n\xe3o entendi. Por favor, escolha uma das op\xe7\xf5es (1, 2 ou 3).");else"scheduling_day"===h?(f("Perfeito! Verificando hor\xe1rios para *".concat(e,"*... Encontrei uma vaga \xe0s 10:00. Deseja confirmar? (Sim/N\xe3o)")),u("scheduling_confirm")):"scheduling_confirm"===h?(e.toLowerCase().includes("sim")?f("\xd3timo! Sua consulta foi agendada. Voc\xea receber\xe1 uma confirma\xe7\xe3o com todos os detalhes. At\xe9 breve!"):f("Entendido. Se quiser tentar outra data, \xe9 s\xf3 me dizer."),u("initial")):"waiting_human"===h&&f("Nossos atendentes ainda est\xe3o ocupados. Assim que um estiver dispon\xedvel, ele responder\xe1 aqui. Obrigado pela paci\xeancia!")};return(0,a.jsxs)("div",{className:"flex justify-center",children:[(0,a.jsxs)("div",{className:"w-full max-w-lg mx-auto bg-white border border-slate-200 rounded-2xl shadow-lg flex flex-col",children:[(0,a.jsxs)("div",{className:"p-3 bg-slate-100 rounded-t-2xl flex items-center border-b",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:"https://i.pravatar.cc/150?u=clinic_logo",alt:"FisioFlow",className:"w-10 h-10 rounded-full"}),(0,a.jsx)("span",{className:"absolute bottom-0 right-0 block h-2.5 w-2.5 rounded-full bg-green-400 ring-2 ring-white"})]}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"font-semibold text-slate-800",children:"FisioFlow"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"online"})]})]}),(0,a.jsx)("div",{className:"flex-1 p-4 h-96 overflow-y-auto bg-slate-50",children:(0,a.jsxs)("div",{className:"space-y-4",children:[e.map(e=>(0,a.jsxs)("div",{className:"flex items-end gap-2 ".concat("user"===e.sender?"justify-end":"justify-start"),children:["bot"===e.sender&&(0,a.jsx)(i,{className:"w-6 h-6 text-slate-400 self-start shrink-0"}),(0,a.jsx)("div",{className:"max-w-xs md:max-w-sm px-4 py-2 rounded-2xl ".concat("user"===e.sender?"bg-teal-500 text-white rounded-br-none":"bg-white text-slate-800 rounded-bl-none shadow-sm"),children:(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.text})})]},e.id)),m&&(0,a.jsxs)("div",{className:"flex items-end gap-2 justify-start",children:[(0,a.jsx)(i,{className:"w-6 h-6 text-slate-400 self-start shrink-0"}),(0,a.jsxs)("div",{className:"bg-white text-slate-800 rounded-2xl rounded-bl-none shadow-sm px-4 py-3 flex items-center",children:[(0,a.jsx)("span",{className:"typing-dot"}),(0,a.jsx)("span",{className:"typing-dot"}),(0,a.jsx)("span",{className:"typing-dot"})]})]}),(0,a.jsx)("div",{ref:p})]})}),(0,a.jsx)("div",{className:"p-3 bg-slate-100 rounded-b-2xl border-t",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"text",value:s,onChange:e=>n(e.target.value),onKeyPress:e=>"Enter"===e.key&&s.trim()&&j(s),placeholder:"Digite sua mensagem...",className:"flex-1 w-full px-4 py-2 bg-white border border-slate-300 rounded-full focus:outline-none focus:ring-2 focus:ring-teal-500"}),(0,a.jsx)("button",{onClick:()=>s.trim()&&j(s),disabled:!s.trim(),className:"p-3 bg-teal-500 text-white rounded-full hover:bg-teal-600 disabled:bg-teal-300 transition-colors",children:(0,a.jsx)(r.A,{className:"w-5 h-5"})})]})})]}),(0,a.jsx)("style",{children:"\n                .typing-dot {\n                    width: 6px; height: 6px; background-color: #94a3b8; border-radius: 50%; display: inline-block; margin: 0 2px;\n                    animation: typing-animation 1.4s infinite ease-in-out both;\n                }\n                .typing-dot:nth-child(2) { animation-delay: .2s; }\n                .typing-dot:nth-child(3) { animation-delay: .4s; }\n                @keyframes typing-animation {\n                    0%, 80%, 100% { transform: scale(0); }\n                    40% { transform: scale(1.0); }\n                }\n            "})]})};var x=s(90607),h=s(61052),u=s(32257),p=s(93336),g=s(93990),b=s(46443),f=s(6782);let j=e=>{let{log:t}=e,s={sending:{text:"Enviando",color:"bg-slate-100 text-slate-800",icon:(0,a.jsx)(h.A,{className:"w-3 h-3 animate-spin"})},sent:{text:"Enviado",color:"bg-sky-100 text-sky-800",icon:(0,a.jsx)(u.A,{className:"w-3 h-3"})},delivered:{text:"Entregue",color:"bg-blue-100 text-blue-800",icon:(0,a.jsx)(p.A,{className:"w-3 h-3"})},read:{text:"Lido",color:"bg-green-100 text-green-800",icon:(0,a.jsx)(p.A,{className:"w-3 h-3 text-blue-500"})},failed:{text:"Falhou",color:"bg-red-100 text-red-800",icon:(0,a.jsx)(g.A,{className:"w-3 h-3"})}}[t.status];return(0,a.jsxs)("tr",{className:"border-b border-slate-200",children:[(0,a.jsxs)("td",{className:"p-3",children:[(0,a.jsx)("div",{className:"font-medium text-slate-800",children:t.patientName}),(0,a.jsx)("div",{className:"text-xs text-slate-500",children:t.phone})]}),(0,a.jsx)("td",{className:"p-3 text-sm text-slate-600 max-w-sm truncate",title:t.content,children:t.content}),(0,a.jsx)("td",{className:"p-3 text-sm text-slate-500 capitalize",children:t.type}),(0,a.jsx)("td",{className:"p-3 text-center",children:(0,a.jsxs)("span",{title:s.text,className:"px-2 py-1 inline-flex items-center text-xs leading-5 font-semibold rounded-full capitalize ".concat(s.color),children:[s.icon,(0,a.jsx)("span",{className:"ml-1.5",children:s.text})]})}),(0,a.jsx)("td",{className:"p-3 text-xs text-slate-500 whitespace-nowrap",children:t.createdAt.toLocaleString("pt-BR")})]})},N=()=>{let[e,t]=(0,l.useState)("simulator"),[s,r]=(0,l.useState)([]),[o,d]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{"log"===e&&(d(!0),x.ao().then(e=>{r(e),d(!1)}))},[e]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.A,{title:"Integra\xe7\xe3o WhatsApp",subtitle:"Simule conversas e monitore o log de mensagens autom\xe1ticas."}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:[(0,a.jsx)("div",{className:"border-b border-slate-200",children:(0,a.jsxs)("nav",{className:"flex space-x-4 px-6","aria-label":"Tabs",children:[(0,a.jsxs)("button",{onClick:()=>t("simulator"),className:"flex items-center whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("simulator"===e?"border-teal-500 text-teal-600":"border-transparent text-slate-500 hover:text-slate-700"),children:[(0,a.jsx)(i,{className:"w-5 h-5 mr-2"})," Simulador de Chat"]}),(0,a.jsxs)("button",{onClick:()=>t("log"),className:"flex items-center whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("log"===e?"border-teal-500 text-teal-600":"border-transparent text-slate-500 hover:text-slate-700"),children:[(0,a.jsx)(b.A,{className:"w-5 h-5 mr-2"})," Log de Mensagens"]})]})}),"simulator"===e&&(0,a.jsx)("div",{className:"p-4 md:p-6",children:(0,a.jsx)(m,{})}),"log"===e&&(0,a.jsx)("div",{className:"p-4 md:p-6",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[(0,a.jsx)("thead",{className:"bg-slate-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Paciente"}),(0,a.jsx)("th",{className:"p-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Conte\xfado"}),(0,a.jsx)("th",{className:"p-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipo"}),(0,a.jsx)("th",{className:"p-3 text-center text-xs font-medium text-slate-500 uppercase",children:"Status"}),(0,a.jsx)("th",{className:"p-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Data"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-slate-200",children:o?Array.from({length:3}).map((e,t)=>(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"p-3",children:(0,a.jsx)(f.E,{className:"h-10 w-full"})})},t)):s.length>0?s.map(e=>(0,a.jsx)(j,{log:e},e.id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"text-center p-10 text-slate-500",children:"Nenhuma mensagem no log. Confirma\xe7\xf5es e lembretes aparecer\xe3o aqui."})})})]})})})]})]})}},93990:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(17963).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},97306:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/WhatsAppPage",function(){return s(73594)}])}},e=>{e.O(0,[2749,5898,2170,6766,5977,1547,196,636,6593,8792],()=>e(e.s=97306)),_N_E=e.O()}]);