(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[62],{748:(e,t,a)=>{"use strict";a.d(t,{db:()=>d});var n=a(66766);let i=[...n.N],s=[...n.ZS],o=[...n.Tf],r=[...n.BT],l=[...n.eB],d={getPatients:()=>[...i],getPatientById:e=>i.find(t=>t.id===e),addPatient:e=>{i.unshift(e)},updatePatient:e=>{i=i.map(t=>t.id===e.id?e:t)},getAppointments:()=>[...s],saveAppointment:e=>{let t=s.findIndex(t=>t.id===e.id);t>-1?s[t]=e:s.push(e)},deleteAppointment:e=>{s=s.filter(t=>t.id!==e)},deleteAppointmentSeries:(e,t)=>{s=s.filter(a=>!(a.seriesId===e&&a.startTime>=t))},getSoapNotes:()=>[...o],saveSoapNote:e=>{let t=o.findIndex(t=>t.id===e.id);t>-1?o[t]=e:o.unshift(e)},getTreatmentPlans:()=>[...r],updateTreatmentPlan:e=>{let t=r.findIndex(t=>t.id===e.id);t>-1&&(r[t]=e)},getExercisePrescriptions:()=>[...l],setExercisePrescriptionsForPlan:(e,t)=>{(l=l.filter(t=>t.treatmentPlanId!==e)).push(...t)}}},12168:(e,t,a)=>{"use strict";a.d(t,{L5:()=>c,OS:()=>d,Ob:()=>h,TC:()=>g,Xl:()=>f,Z6:()=>u,bW:()=>l,dc:()=>p,mQ:()=>m,uE:()=>r});var n=a(14776),i=a(748),s=a(87107);let o=e=>new Promise(t=>setTimeout(t,e)),r=async()=>(await o(500),[...i.db.getPatients()].sort((e,t)=>new Date(t.lastVisit).getTime()-new Date(e.lastVisit).getTime())),l=async e=>{if(await o(300),e.length<2)return[];let t=e.toLowerCase();return i.db.getPatients().filter(e=>e.name.toLowerCase().includes(t)||e.cpf.includes(t)).map(e=>({id:e.id,name:e.name,email:e.email,phone:e.phone,status:e.status,lastVisit:e.lastVisit,avatarUrl:e.avatarUrl,cpf:e.cpf})).slice(0,10)},d=async e=>{await o(500);let t={id:"patient_".concat(Date.now()),name:e.trim(),cpf:"TEMP-".concat(Date.now()),birthDate:"",phone:"",email:"",emergencyContact:{name:"",phone:""},address:{street:"",city:"",state:"",zip:""},status:n.WW.Active,lastVisit:new Date().toISOString(),registrationDate:new Date().toISOString(),avatarUrl:"https://picsum.photos/seed/".concat(Date.now(),"/200/200"),consentGiven:!0,whatsappConsent:"opt-out"};return i.db.addPatient(t),s.g.emit("patients:changed"),t},c=async e=>{let{limit:t=15,cursor:a,searchTerm:n,statusFilter:s,startDate:r,endDate:l,therapistId:d}=e;await o(500);let c=i.db.getPatients();if(n){let e=n.toLowerCase();c=c.filter(t=>t.name.toLowerCase().includes(e)||t.cpf.includes(e))}if(s&&"All"!==s){let e={Active:"Active",Inactive:"Inactive",Discharged:"Discharged",Ativo:"Active",Inativo:"Inactive",Alta:"Discharged"}[s]||s;c=c.filter(t=>t.status===e)}if(r){let e=new Date(r);e.setHours(0,0,0,0),c=c.filter(t=>new Date(t.registrationDate)>=e)}if(l){let e=new Date(l);e.setHours(23,59,59,999),c=c.filter(t=>new Date(t.registrationDate)<=e)}if(d&&"All"!==d){let e=new Set(i.db.getAppointments().filter(e=>e.therapistId===d).map(e=>e.patientId));c=c.filter(t=>e.has(t.id))}c.sort((e,t)=>{let a=new Date(e.registrationDate).getTime(),n=new Date(t.registrationDate).getTime();return n!==a?n-a:e.id.localeCompare(t.id)});let m=a?c.findIndex(e=>e.id===a)+1:0;if(a&&0===m)return{patients:[],nextCursor:null};let p=c.slice(m,m+t),u=p.length===t&&p.length>0?p[p.length-1].id:null;return{patients:p.map(e=>({id:e.id,name:e.name,email:e.email,phone:e.phone,status:e.status,lastVisit:e.lastVisit,avatarUrl:e.avatarUrl,medicalAlerts:e.medicalAlerts})),nextCursor:u}},m=async e=>(await o(300),i.db.getPatientById(e)),p=async e=>{await o(400);let t={id:"patient_".concat(Date.now()),...e,lastVisit:new Date().toISOString()};return i.db.addPatient(t),s.g.emit("patients:changed"),t},u=async e=>(await o(400),i.db.updatePatient(e),s.g.emit("patients:changed"),e),f=async(e,t)=>{await o(600);let a=i.db.getPatientById(e);if(!a)throw Error("Paciente n\xe3o encontrado.");let n={name:t.name,url:"#",type:t.type,size:t.size},r={...a,attachments:[...a.attachments||[],n]};return i.db.updatePatient(r),s.g.emit("patients:changed"),n},h=async(e,t)=>{await o(200);let a=i.db.getPatientById(e);if(!a)throw Error("Paciente n\xe3o encontrado.");let n={id:"log_".concat(Date.now()),...t},r={...a,communicationLogs:[n,...a.communicationLogs||[]]};return i.db.updatePatient(r),s.g.emit("patients:changed"),r},g=async(e,t)=>{await o(200);let a=i.db.getPatientById(e);if(!a)throw Error("Paciente n\xe3o encontrado.");let n={...a,painPoints:t};return i.db.updatePatient(n),s.g.emit("patients:changed"),n}},28647:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var n=a(37876),i=a(14232),s=a(94504),o=a(42775),r=a(46443);let l=e=>{let{value:t,onChange:a,rows:l=3,placeholder:d,disabled:c=!1}=e,m=(0,i.useRef)(null),p=e=>{let n=m.current;if(!n||c)return;let i="",s=n.selectionStart,o=n.selectionEnd,r=t.substring(s,o),l="";if("list"===e){let e=t.lastIndexOf("\n",s-1)+1,a=t.substring(0,e),n=t.substring(e,o),i=t.substring(o),r=n.split("\n"),d=r.every(e=>e.trim().startsWith("* ")),c=r.map(e=>d?e.replace(/^\s*\*\s?/,""):e.trim()?"* ".concat(e):e).join("\n");l="".concat(a).concat(c).concat(i)}else{i="bold"===e?"**":"*";let a="".concat(i).concat(r).concat(i);l="".concat(t.substring(0,s)).concat(a).concat(t.substring(o))}a(l),setTimeout(()=>{n.focus(),"list"!==e&&(n.selectionStart=s+i.length,n.selectionEnd=o+i.length)},0)};return(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 border border-b-0 border-slate-300 p-2 rounded-t-lg ".concat(c?"bg-slate-200":"bg-slate-50"),children:[(0,n.jsx)("button",{type:"button",onClick:()=>p("bold"),className:"p-1.5 rounded hover:bg-slate-200 disabled:opacity-50",title:"Negrito (Ctrl+B)",disabled:c,children:(0,n.jsx)(s.A,{className:"w-4 h-4"})}),(0,n.jsx)("button",{type:"button",onClick:()=>p("italic"),className:"p-1.5 rounded hover:bg-slate-200 disabled:opacity-50",title:"It\xe1lico (Ctrl+I)",disabled:c,children:(0,n.jsx)(o.A,{className:"w-4 h-4"})}),(0,n.jsx)("button",{type:"button",onClick:()=>p("list"),className:"p-1.5 rounded hover:bg-slate-200 disabled:opacity-50",title:"Lista",disabled:c,children:(0,n.jsx)(r.A,{className:"w-4 h-4"})})]}),(0,n.jsx)("textarea",{ref:m,value:t,onChange:e=>a(e.target.value),rows:l,placeholder:d,className:"w-full p-2 border border-slate-300 rounded-b-lg focus:outline-none focus:ring-1 focus:ring-sky-500 text-sm flex-1 ".concat(c?"bg-slate-100 cursor-not-allowed":""),"aria-label":"Editor de Texto do Relat\xf3rio",disabled:c})]})}},35880:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var n=a(37876);a(14232);let i=e=>{let{title:t,subtitle:a,children:i}=e;return(0,n.jsxs)("div",{className:"pb-8 md:flex md:items-center md:justify-between",children:[(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold leading-tight text-slate-900 tracking-tight",children:t}),(0,n.jsx)("p",{className:"mt-2 text-lg text-slate-600",children:a})]}),(0,n.jsx)("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:i})]})}},37202:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var n=a(37876),i=a(14232),s=a(88307),o=a(14952),r=a(12168),l=a(64717),d=a(35880),c=a(88635),m=a(95857),p=a(28647),u=a(66822),f=a(9552),h=a(12572),g=a(61052),x=a(73884),v=a(6394),b=a(98220),w=a(21355);let y=()=>{let{patientId:e,reportId:t}=s.g(),a=s.Zp(),{showToast:y}=(0,u.dj)(),[j,N]=(0,i.useState)(null),[A,D]=(0,i.useState)(null),[I,P]=(0,i.useState)(""),[E,C]=(0,i.useState)(""),[T,R]=(0,i.useState)(""),[S,k]=(0,i.useState)(!0),[z,F]=(0,i.useState)(!1),[O,_]=(0,i.useState)(!1),B=(0,i.useCallback)(async()=>{k(!0);try{if(t){let e=await l.vN(Number(t));if(!e)throw Error("Relat\xf3rio n\xe3o encontrado.");let a=await r.mQ(e.patientId);if(!a)throw Error("Paciente n\xe3o encontrado.");D(e),N(a),P(e.content),C(e.recipientDoctor||""),R(e.recipientCrm||"")}else if(e){let t=await r.mQ(e);if(!t)throw Error("Paciente n\xe3o encontrado.");N(t)}else throw Error("ID de paciente ou relat\xf3rio n\xe3o fornecido.")}catch(e){y(e.message,"error"),a("/patients")}finally{k(!1)}},[t,e,a,y]);(0,i.useEffect)(()=>{B()},[B]);let L=async()=>{if(!e||!E.trim()||!T.trim())return void y("Por favor, informe o m\xe9dico e CRM de destino.","error");F(!0);try{let t=await l.oh(e,E,T);D(t),P(t.content),y("Relat\xf3rio gerado com sucesso!","success"),a("/medical-report/edit/".concat(t.id),{replace:!0})}catch(e){y("Falha ao gerar relat\xf3rio com IA.","error")}finally{F(!1)}},M=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(A){_(!0);try{let t={content:I,recipientDoctor:E,recipientCrm:T,status:e?"finalized":"draft",finalizedAt:e?new Date:A.finalizedAt};await l.A0(A.id,t),y(e?"Relat\xf3rio finalizado!":"Rascunho salvo!","success"),e?(y("Gerando PDF... (funcionalidade simulada)","info"),a("/patients/".concat(A.patientId))):await B()}catch(e){y("Falha ao salvar relat\xf3rio.","error")}finally{_(!1)}}};if(S)return(0,n.jsx)(c.A,{});if(!j)return null;let U=A?A.title:"Novo Relat\xf3rio para ".concat(j.name),V=A?"/patients/".concat(A.patientId):"/patients/".concat(e);return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)(d.A,{title:U,subtitle:"Gera\xe7\xe3o de relat\xf3rio m\xe9dico com assistente de IA.",children:(0,n.jsxs)(o.N_,{to:V,className:"inline-flex items-center rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50",children:[(0,n.jsx)(f.A,{className:"-ml-1 mr-2 h-5 w-5"})," Voltar"]})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 items-start",children:[(0,n.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,n.jsx)(m.A,{title:"Informa\xe7\xf5es do Relat\xf3rio",icon:(0,n.jsx)(h.A,{}),children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Paciente"}),(0,n.jsx)("p",{className:"font-semibold",children:j.name})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"M\xe9dico Destinat\xe1rio*"}),(0,n.jsx)("input",{type:"text",value:E,onChange:e=>C(e.target.value),className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"CRM do Destinat\xe1rio*"}),(0,n.jsx)("input",{type:"text",value:T,onChange:e=>R(e.target.value),className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]})]})}),!A&&(0,n.jsxs)("button",{onClick:L,disabled:z,className:"w-full inline-flex items-center justify-center bg-teal-500 hover:bg-teal-600 text-white font-bold py-3 px-4 rounded-lg shadow-sm transition-colors disabled:bg-teal-300",children:[z?(0,n.jsx)(g.A,{className:"w-5 h-5 mr-2 animate-spin"}):(0,n.jsx)(x.A,{className:"w-5 h-5 mr-2"}),z?"Gerando...":"Gerar Relat\xf3rio com IA"]}),A&&(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("button",{onClick:()=>M(!1),disabled:O||"finalized"===A.status,className:"w-full inline-flex items-center justify-center bg-sky-500 hover:bg-sky-600 text-white font-bold py-3 px-4 rounded-lg shadow-sm transition-colors disabled:bg-sky-300 disabled:cursor-not-allowed",children:[O?(0,n.jsx)(g.A,{className:"w-5 h-5 mr-2 animate-spin"}):(0,n.jsx)(v.A,{className:"w-5 h-5 mr-2"}),"Salvar Rascunho"]}),(0,n.jsxs)("button",{onClick:()=>M(!0),disabled:O||"finalized"===A.status,className:"w-full inline-flex items-center justify-center bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg shadow-sm transition-colors disabled:bg-green-300 disabled:cursor-not-allowed",children:[(0,n.jsx)(b.A,{className:"w-5 h-5 mr-2"}),"finalized"===A.status?"Relat\xf3rio Finalizado":"Finalizar e Gerar PDF"]})]})]}),(0,n.jsx)("div",{className:"lg:col-span-2 bg-white p-6 rounded-2xl shadow-sm min-h-[600px] flex flex-col",children:z?(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,n.jsx)(g.A,{className:"w-12 h-12 text-teal-500 animate-spin"}),(0,n.jsx)("p",{className:"mt-4 text-slate-600",children:"A IA est\xe1 analisando os dados do paciente e gerando o relat\xf3rio..."})]}):A?(0,n.jsx)(p.A,{value:I,onChange:P,rows:25}):(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center text-slate-500",children:[(0,n.jsx)(w.A,{className:"w-16 h-16 text-slate-300 mb-4"}),(0,n.jsx)("p",{className:"font-semibold",children:"O relat\xf3rio gerado pela IA aparecer\xe1 aqui."}),(0,n.jsx)("p",{className:"text-sm mt-1",children:'Preencha os dados do destinat\xe1rio e clique em "Gerar Relat\xf3rio com IA".'})]})})]})]})}},64717:(e,t,a)=>{"use strict";a.d(t,{A0:()=>c,Mp:()=>u,Ns:()=>p,bb:()=>l,oh:()=>m,vN:()=>d});var n=a(66766),i=a(32061),s=a.n(i);let o=[...n.ps],r=e=>new Promise(t=>setTimeout(t,e)),l=async e=>(await r(300),o.filter(t=>t.patientId===e).sort((e,t)=>t.generatedAt.getTime()-e.generatedAt.getTime())),d=async e=>(await r(300),o.find(t=>t.id===e)),c=async(e,t)=>{await r(400);let a=o.findIndex(t=>t.id===e);if(-1===a)throw Error("Relat\xf3rio n\xe3o encontrado.");return o[a]={...o[a],...t},o[a]},m=async(e,t,a)=>{var i,s,l,d,c;await r(1e3);let m=n.N.find(t=>t.id===e),p=n.Tf.filter(t=>t.patientId===e).slice(0,3);if(!m)throw Error("Paciente n\xe3o encontrado.");"\n        CONTEXTO: Voc\xea \xe9 um fisioterapeuta experiente criando um relat\xf3rio m\xe9dico profissional para o Dr(a). ".concat(t||"Colega M\xe9dico"," (CRM: ").concat(a||"A informar",").\n\n        DADOS DO PACIENTE:\n        Nome: ").concat(m.name,"\n        Queixa Principal: ").concat((null==(s=m.conditions)||null==(i=s[0])?void 0:i.name)||"N\xe3o especificada","\n        Hist\xf3rico M\xe9dico Relevante: ").concat(m.medicalAlerts||"Nenhum","\n        \n        \xdaLTIMAS EVOLU\xc7\xd5ES (Formato SOAP):\n        ").concat(p.map(e=>"\n        Data: ".concat(e.date,"\n        Subjetivo: ").concat(e.subjective,"\n        Avalia\xe7\xe3o: ").concat(e.assessment,"\n        Plano: ").concat(e.plan,"\n        ---")).join("\n"),'\n        \n        INSTRU\xc7\xd5ES:\n        1. Crie um relat\xf3rio m\xe9dico conciso e profissional em portugu\xeas brasileiro.\n        2. Use linguagem t\xe9cnica apropriada para comunica\xe7\xe3o entre profissionais de sa\xfade.\n        3. Estruture o relat\xf3rio nas seguintes se\xe7\xf5es: Identifica\xe7\xe3o do Paciente, Diagn\xf3stico Fisioterap\xeautico, Tratamento Realizado, Evolu\xe7\xe3o Cl\xednica, e Progn\xf3stico e Recomenda\xe7\xf5es. Formate os t\xedtulos das se\xe7\xf5es em negrito (ex: **Identifica\xe7\xe3o do Paciente**).\n        4. Seja objetivo e factual, baseando-se estritamente nos dados fornecidos. N\xe3o invente informa\xe7\xf5es.\n        5. Sintetize as evolu\xe7\xf5es em um par\xe1grafo coeso na se\xe7\xe3o "Evolu\xe7\xe3o Cl\xednica".\n    ');let u="**Identifica\xe7\xe3o do Paciente**\n".concat(m.name," apresenta queixa principal de ").concat((null==(d=m.conditions)||null==(l=d[0])?void 0:l.name)||"dor",".\n\n**Diagn\xf3stico Fisioterap\xeautico**\nBaseado na avalia\xe7\xe3o inicial e evolu\xe7\xe3o das sess\xf5es, o diagn\xf3stico aponta para limita\xe7\xe3o funcional com comprometimento da mobilidade.\n\n**Tratamento Realizado**\nForam realizadas sess\xf5es de fisioterapia com t\xe9cnicas espec\xedficas para o quadro apresentado, incluindo exerc\xedcios terap\xeauticos e modalidades f\xedsicas.\n\n**Evolu\xe7\xe3o Cl\xednica**\n").concat(p.length>0?"O paciente demonstrou evolu\xe7\xe3o positiva durante o per\xedodo de tratamento, com melhora gradual dos sintomas relatados nas sess\xf5es.":"Paciente em in\xedcio de tratamento.","\n\n**Progn\xf3stico e Recomenda\xe7\xf5es**\nProgn\xf3stico favor\xe1vel com continuidade do tratamento conforme prescri\xe7\xe3o fisioterap\xeautica. Recomenda-se acompanhamento m\xe9dico para evolu\xe7\xe3o do quadro."),f={id:Date.now(),patientId:e,therapistId:(null==(c=n.rB.find(e=>"Fisioterapeuta"===e.role))?void 0:c.id)||"user_1",title:"Relat\xf3rio M\xe9dico - ".concat(m.name),aiGeneratedContent:u,content:u.replace(/\*\*(.*?)\*\*/g,"<h3>$1</h3>").replace(/\n/g,"<br>"),status:"draft",recipientDoctor:t,recipientCrm:a,generatedAt:new Date};return o.unshift(f),f},p=async e=>{await r(300);let t=o.findIndex(t=>t.id===e);if(-1===t)throw Error("Relat\xf3rio n\xe3o encontrado.");let a=o[t];if(!a)throw Error("Relat\xf3rio n\xe3o encontrado.");if("finalized"!==a.status)throw Error("Apenas relat\xf3rios finalizados podem ser enviados.");return a.status="sent",a},u=async(e,t)=>{let a=n.Ko.find(t=>t.id===e.therapistId),i=document.createElement("div");i.innerHTML='\n        <div style="font-family: Arial, sans-serif; padding: 40px; color: #333; font-size: 12px; line-height: 1.6;">\n            <header style="display: flex; justify-content: space-between; align-items: flex-start; border-bottom: 2px solid #0ea5e9; padding-bottom: 15px; margin-bottom: 25px;">\n                <div>\n                    <h1 style="font-size: 22px; color: #0284c7; margin: 0;">'.concat(n.TY.name,'</h1>\n                    <p style="font-size: 11px; color: #666; margin: 5px 0 0 0;">').concat(n.TY.address,'</p>\n                    <p style="font-size: 11px; color: #666; margin: 5px 0 0 0;">').concat(n.TY.phone," | ").concat(n.TY.email,"</p>\n                </div>\n                ").concat(n.TY.logoUrl?'<img src="'.concat(n.TY.logoUrl,'" alt="Logo" style="max-height: 50px;"/>'):"",'\n            </header>\n            \n            <h2 style="text-align: center; font-size: 16px; margin-bottom: 25px; font-weight: bold; text-transform: uppercase;">Relat\xf3rio Fisioterap\xeautico</h2>\n            \n            <table style="width: 100%; margin-bottom: 20px; border-collapse: collapse; font-size: 12px;">\n                <tr>\n                    <td style="padding: 5px; border: 1px solid #ddd; background-color: #f9f9f9; width: 120px;"><strong>Paciente:</strong></td>\n                    <td style="padding: 5px; border: 1px solid #ddd;">').concat(t.name,'</td>\n                </tr>\n                 <tr>\n                    <td style="padding: 5px; border: 1px solid #ddd; background-color: #f9f9f9;"><strong>Data de Nasc.:</strong></td>\n                    <td style="padding: 5px; border: 1px solid #ddd;">').concat(new Date(t.birthDate).toLocaleDateString("pt-BR",{timeZone:"UTC"}),'</td>\n                </tr>\n                <tr>\n                    <td style="padding: 5px; border: 1px solid #ddd; background-color: #f9f9f9;"><strong>Destinat\xe1rio:</strong></td>\n                    <td style="padding: 5px; border: 1px solid #ddd;">').concat(e.recipientDoctor||"N/A"," (CRM: ").concat(e.recipientCrm||"N/A",')</td>\n                </tr>\n                 <tr>\n                    <td style="padding: 5px; border: 1px solid #ddd; background-color: #f9f9f9;"><strong>Data do Relat\xf3rio:</strong></td>\n                    <td style="padding: 5px; border: 1px solid #ddd;">').concat(new Date(e.generatedAt).toLocaleDateString("pt-BR",{timeZone:"UTC"}),'</td>\n                </tr>\n            </table>\n            \n            <section class="report-content">\n                ').concat(e.content.replace(/<h3>/g,'<h3 style="font-size: 14px; color: #0284c7; border-bottom: 1px solid #e2e8f0; padding-bottom: 4px; margin-top: 20px; margin-bottom: 10px;">').replace(/<\/h3>/g,"</h3>"),'\n            </section>\n            \n            <footer style="margin-top: 80px; text-align: center;">\n                 <div style="display: inline-block; text-align: center;">\n                    <p style="border-top: 1px solid #333; padding-top: 5px; width: 250px; margin: 0 auto;">').concat((null==a?void 0:a.name)||"Fisioterapeuta Respons\xe1vel",'</p>\n                    <p style="font-size: 11px; margin-top: 5px;">CREFITO: ').concat("12345-F",'</p>\n                 </div>\n                 <p style="font-size: 10px; color: #888; margin-top: 40px;">Este relat\xf3rio \xe9 confidencial e protegido por sigilo profissional.</p>\n            </footer>\n        </div>\n    ');let o={margin:[.5,.5,.5,.5],filename:"relatorio-".concat(t.name.replace(/\s/g,"_"),"-").concat(e.id,".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"in",format:"a4",orientation:"portrait"}};return s()().set(o).from(i).save()}},66822:(e,t,a)=>{"use strict";a.d(t,{dj:()=>o}),a(37876);var n=a(14232);let i=(0,n.createContext)(void 0),s=(0,n.createContext)(void 0),o=()=>{let e=(()=>{let e=(0,n.useContext)(i);return void 0===e?{enabled:!1,logRouterChange:()=>{},logHookCall:()=>{},logContextAccess:()=>{}}:e})(),t=(0,n.useContext)(s);if(e.logContextAccess("ToastContext","useToast"),!t){let e=Error("useToast must be used within a ToastProvider");throw console.error("âŒ Toast Context Error:",e.message),e}return{showToast:t.showToast}}},87107:(e,t,a)=>{"use strict";a.d(t,{g:()=>r});var n=a(14776),i=a(66766);let s=e=>new Promise(t=>setTimeout(t,e));class o{on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}off(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(e=>e!==t))}emit(e){for(var t=arguments.length,a=Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];this.events[e]&&this.events[e].forEach(e=>e(...a))}async getEvents(){return await s(300),[...this.eventsData].sort((e,t)=>t.startDate.getTime()-e.startDate.getTime())}async getEventById(e){await s(200);let t=this.eventsData.find(t=>t.id===e);return t?JSON.parse(JSON.stringify(t)):void 0}async getRegistrationsByEventId(e){return await s(200),this.registrationsData.filter(t=>t.eventId===e)}async saveEvent(e,t){if(await s(400),e.id){let t=this.eventsData.findIndex(t=>t.id===e.id);if(t>-1){let a=this.eventsData[t];if(!a)throw Error("Event not found");let n={...a,...e,id:a.id,registrations:a.registrations,providers:a.providers};return this.eventsData[t]=n,this.emit("events:changed"),n}throw Error("Event not found")}{let a={...e,id:"event_".concat(Date.now()),registrations:[],providers:[],organizerId:t};return this.eventsData.unshift(a),this.emit("events:changed"),a}}async checkInParticipant(e,t,a){await s(500);let i=this.registrationsData.findIndex(t=>t.id===e);if(-1===i)throw Error("Inscri\xe7\xe3o n\xe3o encontrada.");let o=this.registrationsData[i];if(!o)throw Error("Inscri\xe7\xe3o n\xe3o encontrada.");if(o.status===n.m7.Attended)throw Error("Participante j\xe1 fez check-in.");let r={...o,status:n.m7.Attended,checkedInAt:new Date,checkedInBy:a};this.registrationsData[i]=r;let l=this.eventsData.findIndex(e=>e.id===o.eventId);if(l>-1){let t=this.eventsData[l];if(t){let a=t.registrations.findIndex(t=>t.id===e);a>-1?t.registrations[a]=r:t.registrations.push(r)}}return this.emit("events:changed"),r}async confirmProvider(e){for(let t of(await s(500),this.eventsData)){let a=t.providers.findIndex(t=>t.id===e);if(a>-1){let e=t.providers[a];if(e){if(e.status!==n.aJ.Applied)throw Error("Apenas inscri\xe7\xf5es com status 'Inscrito' podem ser confirmadas.");return e.status=n.aJ.Confirmed,this.emit("events:changed"),e}}}throw Error("Prestador de servi\xe7o n\xe3o encontrado.")}async payProvider(e){for(let t of(await s(500),this.eventsData)){let a=t.providers.findIndex(t=>t.id===e);if(a>-1){let e=t.providers[a];if(e){if(e.status!==n.aJ.Confirmed)throw Error("Apenas prestadores confirmados podem receber pagamento.");return e.status=n.aJ.Paid,this.emit("events:changed"),e}}}throw Error("Prestador de servi\xe7o n\xe3o encontrado.")}constructor(){this.events={},this.eventsData=[...i._X],this.registrationsData=[...i.ZM]}}let r=new o},88635:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var n=a(37876);a(14232);var i=a(368);let s=()=>(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-50",children:[(0,n.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,n.jsx)(i.A,{className:"w-16 h-16 text-teal-500 animate-pulse"}),(0,n.jsx)("div",{className:"absolute w-24 h-24 border-t-2 border-b-2 border-teal-200 rounded-full animate-spin"})]}),(0,n.jsx)("p",{className:"mt-4 text-lg font-semibold text-slate-600",children:"Carregando FisioFlow..."})]})},95857:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var n=a(37876);a(14232);let i=e=>{let{title:t,icon:a,children:i,actionButton:s}=e;return(0,n.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm h-full flex flex-col border border-slate-200/80",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 flex items-center",children:[a&&(0,n.jsx)("span",{className:"mr-3 text-sky-500",children:a}),t]}),s]}),(0,n.jsx)("div",{className:"flex-grow",children:i})]})}},98004:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/MedicalReportPage",function(){return a(37202)}])}},e=>{e.O(0,[3796,2366,347,7969,4155,8307,4952,6185,3787,6766,636,6593,8792],()=>e(e.s=98004)),_N_E=e.O()}]);