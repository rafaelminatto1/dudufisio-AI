"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4626],{94626:(e,s,t)=>{t.d(s,{A:()=>c});var a=t(37876),l=t(14232),n=t(28249),r=t(6394),d=t(14776),o=t(66822);let i=()=>({name:"",cpf:"",birthDate:"",phone:"",email:"",emergencyContact:{name:"",phone:""},address:{street:"",city:"",state:"",zip:""},status:d.WW.Active,registrationDate:new Date().toISOString(),avatarUrl:"https://picsum.photos/seed/".concat(Date.now(),"/200/200"),consentGiven:!1,whatsappConsent:"opt-out",allergies:"",medicalAlerts:""}),c=e=>{let{isOpen:s,onClose:t,onSave:d,patientToEdit:c}=e,[m,x]=(0,l.useState)(i()),[u,h]=(0,l.useState)(!1),{showToast:p}=(0,o.dj)(),b=(0,l.useRef)(null);if((0,l.useEffect)(()=>{c?x({...c,birthDate:c.birthDate?new Date(c.birthDate).toISOString().split("T")[0]:"",allergies:c.allergies||"",medicalAlerts:c.medicalAlerts||""}):x(i())},[c,s]),(0,l.useEffect)(()=>{if(!s)return;let e=e=>{if("Tab"===e.key){var s;let t=null==(s=b.current)?void 0:s.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(!t)return;let a=t[0],l=t[t.length-1];e.shiftKey?document.activeElement===a&&(l.focus(),e.preventDefault()):document.activeElement===l&&(a.focus(),e.preventDefault())}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s]),!s)return null;let g=e=>{let{name:s,value:t}=e.target;x(e=>({...e,[s]:t}))},f=(e,s)=>{let{name:t,value:a}=e.target;x(e=>({...e,[s]:{...e[s],[t]:a}}))},j=async()=>{if(!m.name||!m.cpf||!m.email)return void p("Nome, CPF e Email s\xe3o campos obrigat\xf3rios.","error");if(!m.consentGiven)return void p("O consentimento LGPD \xe9 obrigat\xf3rio.","error");h(!0);try{await d(m),p(c?"Paciente atualizado com sucesso!":"Paciente salvo com sucesso!","success"),t()}catch(e){p("Falha ao salvar paciente. Tente novamente.","error")}finally{h(!1)}},v=c?"Editar Cadastro do Paciente":"Adicionar Novo Paciente";return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:t,children:(0,a.jsxs)("div",{ref:b,className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("header",{className:"flex items-center justify-between p-5 border-b border-slate-200",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-slate-800",children:v}),(0,a.jsx)("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-100",children:(0,a.jsx)(n.A,{className:"w-5 h-5 text-slate-600"})})]}),(0,a.jsxs)("main",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"text-md font-semibold text-sky-700 border-b pb-2 mb-4",children:"Informa\xe7\xf5es Pessoais"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Nome Completo*"}),(0,a.jsx)("input",{type:"text",name:"name",value:m.name,onChange:g,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"CPF*"}),(0,a.jsx)("input",{type:"text",name:"cpf",value:m.cpf,onChange:g,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Email*"}),(0,a.jsx)("input",{type:"email",name:"email",value:m.email,onChange:g,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Data de Nascimento"}),(0,a.jsx)("input",{type:"date",name:"birthDate",value:m.birthDate,onChange:g,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Telefone"}),(0,a.jsx)("input",{type:"tel",name:"phone",value:m.phone,onChange:g,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"text-md font-semibold text-sky-700 border-b pb-2 mt-4 mb-4",children:"Informa\xe7\xf5es de Sa\xfade"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Alergias Conhecidas"}),(0,a.jsx)("textarea",{name:"allergies",value:m.allergies,onChange:g,rows:2,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg",placeholder:"Ex: Dipirona, l\xe1tex..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Alertas M\xe9dicos / Contraindica\xe7\xf5es"}),(0,a.jsx)("textarea",{name:"medicalAlerts",value:m.medicalAlerts,onChange:g,rows:2,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg",placeholder:"Ex: Hipertens\xe3o, marca-passo..."})]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"md:col-span-2 text-md font-semibold text-sky-700 border-b pb-2 mt-4 mb-4",children:"Endere\xe7o"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Rua"}),(0,a.jsx)("input",{type:"text",name:"street",value:m.address.street,onChange:e=>f(e,"address"),className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Cidade"}),(0,a.jsx)("input",{type:"text",name:"city",value:m.address.city,onChange:e=>f(e,"address"),className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Estado"}),(0,a.jsx)("input",{type:"text",name:"state",value:m.address.state,onChange:e=>f(e,"address"),className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"CEP"}),(0,a.jsx)("input",{type:"text",name:"zip",value:m.address.zip,onChange:e=>f(e,"address"),className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"md:col-span-2 text-md font-semibold text-sky-700 border-b pb-2 mt-4 mb-4",children:"Contato de Emerg\xeancia"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Nome"}),(0,a.jsx)("input",{type:"text",name:"name",value:m.emergencyContact.name,onChange:e=>f(e,"emergencyContact"),className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Telefone"}),(0,a.jsx)("input",{type:"text",name:"phone",value:m.emergencyContact.phone,onChange:e=>f(e,"emergencyContact"),className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"md:col-span-2 text-md font-semibold text-sky-700 border-b pb-2 mt-4 mb-4",children:"Conformidade e Status"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Status do Paciente"}),(0,a.jsxs)("select",{name:"status",value:m.status,onChange:g,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg bg-white",children:[(0,a.jsx)("option",{value:"Active",children:"Ativo"}),(0,a.jsx)("option",{value:"Inactive",children:"Inativo"}),(0,a.jsx)("option",{value:"Discharged",children:"Alta"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Comunica\xe7\xe3o via WhatsApp"}),(0,a.jsxs)("div",{className:"mt-2 flex gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"whatsappConsent",value:"opt-in",checked:"opt-in"===m.whatsappConsent,onChange:g,className:"h-4 w-4 text-sky-600 border-gray-300"}),(0,a.jsx)("span",{className:"ml-2 text-sm",children:"Aceita (Opt-in)"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"whatsappConsent",value:"opt-out",checked:"opt-out"===m.whatsappConsent,onChange:g,className:"h-4 w-4 text-sky-600 border-gray-300"}),(0,a.jsx)("span",{className:"ml-2 text-sm",children:"N\xe3o Aceita (Opt-out)"})]})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2 flex items-start space-x-3 mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,a.jsx)("input",{type:"checkbox",id:"consentGiven",name:"consentGiven",checked:m.consentGiven,onChange:e=>x(s=>({...s,consentGiven:e.target.checked})),className:"h-5 w-5 rounded border-gray-300 text-sky-600 focus:ring-sky-500 mt-1"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{htmlFor:"consentGiven",className:"text-sm font-bold text-amber-900",children:"Consentimento LGPD*"}),(0,a.jsx)("p",{className:"text-xs text-amber-800",children:"Eu confirmo que o paciente forneceu consentimento expl\xedcito para o armazenamento e processamento de seus dados pessoais e de sa\xfade, conforme a Lei Geral de Prote\xe7\xe3o de Dados (LGPD)."})]})]})]})]})]}),(0,a.jsx)("footer",{className:"flex justify-end items-center p-4 border-t border-slate-200 bg-slate-50 rounded-b-2xl",children:(0,a.jsxs)("div",{className:"ml-auto",children:[(0,a.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 mr-2",children:"Cancelar"}),(0,a.jsxs)("button",{onClick:j,disabled:u,className:"px-4 py-2 text-sm font-medium text-white bg-sky-500 border border-transparent rounded-lg hover:bg-sky-600 flex items-center disabled:bg-sky-300",children:[(0,a.jsx)(r.A,{className:"w-4 h-4 mr-2"}),u?"Salvando...":"Salvar"]})]})})]})})}}}]);