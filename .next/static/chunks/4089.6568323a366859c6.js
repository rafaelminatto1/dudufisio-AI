"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4089],{35880:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(37876);a(14232);let l=e=>{let{title:t,subtitle:a,children:l}=e;return(0,s.jsxs)("div",{className:"pb-8 md:flex md:items-center md:justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold leading-tight text-slate-900 tracking-tight",children:t}),(0,s.jsx)("p",{className:"mt-2 text-lg text-slate-600",children:a})]}),(0,s.jsx)("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:l})]})}},45720:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(17963).A)("chart-no-axes-column",[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]])},48995:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(17963).A)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},59537:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(37876);a(14232);var l=a(79622),i=a(48995);let r=e=>{let{title:t,value:a,icon:r,change:n,changeType:c,subtitle:d}=e,o="increase"===c;return(0,s.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm hover:shadow-lg transition-shadow duration-300",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-slate-500 truncate",children:t}),(0,s.jsx)("p",{className:"text-3xl font-bold text-slate-800 mt-1",children:a})]}),(0,s.jsx)("div",{className:"bg-sky-100 text-sky-600 p-3 rounded-full",children:r})]}),(0,s.jsxs)("div",{className:"mt-2 flex items-center text-sm",children:[n&&(0,s.jsxs)("div",{className:"flex items-center font-semibold ".concat(o?"text-green-600":"text-red-600"),children:[o?(0,s.jsx)(l.A,{className:"w-4 h-4"}):(0,s.jsx)(i.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:n}),(0,s.jsx)("span",{className:"text-slate-500 font-normal ml-1.5",children:"vs. m\xeas anterior"})]}),!n&&d&&(0,s.jsx)("p",{className:"text-slate-500",children:d})]})]})}},59761:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var s=a(37876),l=a(14232),i=a(54893),r=a(46293),n=a(21174),c=a(97433),d=a(73291),o=a(35880),m=a(88635),x=a(34007),h=a(45907),u=a(4069),p=a(40570),f=a(25493),j=a(39493),g=a(27217),y=a(42320),v=a(12347),b=a(88246),N=a(59537),k=a(45720),w=a(83981),A=a(79247);let D=e=>{let{appointments:t,therapists:a}=e,r=(0,l.useMemo)(()=>{let e=t.filter(e=>"Realizado"===e.status),a=e.reduce((e,t)=>e+t.value,0),s=e.length>0?a/e.length:0,l=t.filter(e=>"Cancelado"!==e.status&&"pending"===e.paymentStatus).reduce((e,t)=>e+t.value,0);return{totalRevenue:a,avgTicket:s,completedCount:e.length,accountsReceivable:l}},[t]),n=(0,l.useMemo)(()=>{let e=new Map,a=new Date,s=new Date(new Date().setDate(a.getDate()-30));return t.filter(e=>"Realizado"===e.status&&e.startTime>=s).forEach(t=>{let a=t.startTime.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"});e.set(a,(e.get(a)||0)+t.value)}),Array.from(e.entries()).map(e=>{let[t,a]=e;return{name:t,Faturamento:a}}).sort((e,t)=>new Date(e.name.split("/").reverse().join("-")).getTime()-new Date(t.name.split("/").reverse().join("-")).getTime())},[t]),c=(0,l.useMemo)(()=>{let e=new Map;return a.forEach(t=>e.set(t.id,{name:t.name,Faturamento:0,color:t.color})),t.filter(e=>"Realizado"===e.status).forEach(t=>{if(e.has(t.therapistId)){let a=e.get(t.therapistId);a.Faturamento+=t.value}}),Array.from(e.values())},[t,a]),d=e=>"R$ ".concat(e.toFixed(2).replace(".",",")),o=[{title:"Faturamento Total",value:d(r.totalRevenue),icon:(0,s.jsx)(i.A,{})},{title:"Ticket M\xe9dio",value:d(r.avgTicket),icon:(0,s.jsx)(k.A,{})},{title:"Consultas Realizadas",value:r.completedCount.toString(),icon:(0,s.jsx)(w.A,{})},{title:"Contas a Receber",value:d(r.accountsReceivable),icon:(0,s.jsx)(A.A,{})}];return(0,s.jsxs)("div",{className:"space-y-6 animate-fade-in-fast",children:[(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:o.map(e=>(0,s.jsx)(N.A,{...e},e.title))}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-3 bg-white p-6 rounded-2xl shadow-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Faturamento (\xdaltimos 30 dias)"}),(0,s.jsx)("div",{className:"h-72",children:(0,s.jsx)(x.u,{width:"100%",height:"100%",children:(0,s.jsxs)(h.b,{data:n,margin:{top:5,right:20,left:-10,bottom:5},children:[(0,s.jsx)(u.d,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),(0,s.jsx)(p.W,{dataKey:"name",stroke:"#64748b",fontSize:12}),(0,s.jsx)(f.h,{stroke:"#64748b",fontSize:12,tickFormatter:e=>d(e)}),(0,s.jsx)(j.m,{formatter:e=>[d(e),"Faturamento"]}),(0,s.jsx)(g.N,{type:"monotone",dataKey:"Faturamento",stroke:"#14b8a6",strokeWidth:2})]})})})]}),(0,s.jsxs)("div",{className:"lg:col-span-2 bg-white p-6 rounded-2xl shadow-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Faturamento por Fisioterapeuta"}),(0,s.jsx)("div",{className:"h-72",children:(0,s.jsx)(x.u,{width:"100%",height:"100%",children:(0,s.jsxs)(y.E,{data:c,layout:"vertical",margin:{left:20},children:[(0,s.jsx)(u.d,{strokeDasharray:"3 3",horizontal:!1,stroke:"#e2e8f0"}),(0,s.jsx)(p.W,{type:"number",stroke:"#64748b",fontSize:12,tickFormatter:e=>"R$".concat(e/1e3,"k")}),(0,s.jsx)(f.h,{type:"category",dataKey:"name",stroke:"#64748b",fontSize:12,width:80,axisLine:!1,tickLine:!1}),(0,s.jsx)(j.m,{formatter:e=>d(e)}),(0,s.jsx)(v.y,{dataKey:"Faturamento",barSize:20,children:c.map(e=>(0,s.jsx)(b.f,{fill:"#".concat({teal:"14b8a6",sky:"38bdf8",indigo:"6366f1"}[e.color]||"64748b")},e.name))})]})})})]})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"\xdaltimas Transa\xe7\xf5es"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full",children:[(0,s.jsx)("thead",{className:"bg-slate-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Paciente"}),(0,s.jsx)("th",{className:"p-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Data"}),(0,s.jsx)("th",{className:"p-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipo"}),(0,s.jsx)("th",{className:"p-3 text-right text-xs font-medium text-slate-500 uppercase",children:"Valor"}),(0,s.jsx)("th",{className:"p-3 text-center text-xs font-medium text-slate-500 uppercase",children:"Status Pag."})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-slate-200",children:t.filter(e=>"Realizado"===e.status).slice(0,10).map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"p-3 text-sm font-medium text-slate-800",children:e.patientName}),(0,s.jsx)("td",{className:"p-3 text-sm text-slate-500",children:e.startTime.toLocaleDateString("pt-BR")}),(0,s.jsx)("td",{className:"p-3 text-sm text-slate-500",children:e.type}),(0,s.jsx)("td",{className:"p-3 text-sm text-slate-800 font-semibold text-right",children:d(e.value)}),(0,s.jsx)("td",{className:"p-3 text-center",children:(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("paid"===e.paymentStatus?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:"paid"===e.paymentStatus?"Pago":"Pendente"})})]},e.id))})]})})]}),(0,s.jsx)("style",{children:".animate-fade-in-fast { animation: fade-in-fast 0.5s ease-out forwards; } @keyframes fade-in-fast { from { opacity: 0; } to { opacity: 1; } }"})]})};var M=a(97075),S=a(82470),z=a(96887);let R=(0,a(17963).A)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),F={Active:"#10b981",Inactive:"#f59e0b",Discharged:"#64748b"},E=e=>{let{patients:t}=e,a=(0,l.useMemo)(()=>{let e={Active:0,Inactive:0,Discharged:0},a=t.filter(e=>new Date(e.registrationDate)>=new Date(new Date().setDate(1))).length;return t.forEach(t=>{Object.prototype.hasOwnProperty.call(e,t.status)&&e[t.status]++}),{total:t.length,newThisMonth:a,...e}},[t]),i=(0,l.useMemo)(()=>{let e=new Map,a=new Date;a.setMonth(a.getMonth()-5),a.setDate(1);for(let t=0;t<6;t++){let s=new Date(a);s.setMonth(s.getMonth()+t);let l=s.toLocaleDateString("pt-BR",{month:"short",year:"2-digit"});e.set(l,0)}return t.forEach(t=>{let s=new Date(t.registrationDate);if(s>=a){let t=s.toLocaleDateString("pt-BR",{month:"short",year:"2-digit"});e.has(t)&&e.set(t,e.get(t)+1)}}),Array.from(e.entries()).map(e=>{let[t,a]=e;return{name:t,"Novos Pacientes":a}})},[t]),n=Object.entries(a).filter(e=>{let[t]=e;return["Active","Inactive","Discharged"].includes(t)}).map(e=>{let[t,a]=e;return{name:t,value:a}}),d=[{title:"Total de Pacientes",value:a.total.toString(),icon:(0,s.jsx)(r.A,{})},{title:"Pacientes Ativos",value:a.Active.toString(),icon:(0,s.jsx)(c.A,{})},{title:"Novos no M\xeas",value:a.newThisMonth.toString(),icon:(0,s.jsx)(z.A,{})},{title:"Inativos/Alta",value:(a.Inactive+a.Discharged).toString(),icon:(0,s.jsx)(R,{})}];return(0,s.jsxs)("div",{className:"space-y-6 animate-fade-in-fast",children:[(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:d.map(e=>(0,s.jsx)(N.A,{...e},e.title))}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-3 bg-white p-6 rounded-2xl shadow-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Novos Pacientes (\xdaltimos 6 meses)"}),(0,s.jsx)("div",{className:"h-72",children:(0,s.jsx)(x.u,{width:"100%",height:"100%",children:(0,s.jsxs)(y.E,{data:i,margin:{top:5,right:20,left:-10,bottom:5},children:[(0,s.jsx)(u.d,{strokeDasharray:"3 3",vertical:!1,stroke:"#e2e8f0"}),(0,s.jsx)(p.W,{dataKey:"name",stroke:"#64748b",fontSize:12}),(0,s.jsx)(f.h,{stroke:"#64748b",fontSize:12,allowDecimals:!1}),(0,s.jsx)(j.m,{}),(0,s.jsx)(v.y,{dataKey:"Novos Pacientes",fill:"#14b8a6"})]})})})]}),(0,s.jsxs)("div",{className:"lg:col-span-2 bg-white p-6 rounded-2xl shadow-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Distribui\xe7\xe3o por Status"}),(0,s.jsx)("div",{className:"h-72",children:(0,s.jsx)(x.u,{width:"100%",height:"100%",children:(0,s.jsxs)(M.r,{children:[(0,s.jsx)(S.F,{data:n,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:n.map((e,t)=>(0,s.jsx)(b.f,{fill:F[e.name]},"cell-".concat(t)))}),(0,s.jsx)(j.m,{formatter:(e,t)=>[e,t]})]})})})]})]}),(0,s.jsx)("style",{children:".animate-fade-in-fast { animation: fade-in-fast 0.5s ease-out forwards; } @keyframes fade-in-fast { from { opacity: 0; } to { opacity: 1; } }"})]})};var C=a(66762);let P=e=>{let{title:t}=e;return(0,s.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-sm text-center animate-fade-in-fast",children:[(0,s.jsx)(C.A,{className:"mx-auto h-16 w-16 text-slate-300"}),(0,s.jsx)("h3",{className:"mt-4 text-xl font-bold text-slate-800",children:t}),(0,s.jsx)("p",{className:"mt-2 text-md text-slate-500 max-w-2xl mx-auto",children:"Este relat\xf3rio est\xe1 em desenvolvimento e estar\xe1 dispon\xedvel em breve para fornecer mais insights sobre sua cl\xednica."})]})};var T=a(41547),q=a(93508),L=a(12168);let I=()=>{let[e,t]=(0,l.useState)("financeiro"),{therapists:a,isLoading:x,error:h}=(0,T.Ez)(),[u,p]=(0,l.useState)([]),[f,j]=(0,l.useState)([]),[g,y]=(0,l.useState)(!0),[v,b]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{y(!0);try{let[e,t]=await Promise.all([q.Xj(),L.uE()]);j(e),p(t),b(null)}catch(e){console.error("Failed to fetch report data:",e),b("Falha ao carregar dados para os relat\xf3rios.")}finally{y(!1)}})()},[]);let N=[{id:"financeiro",name:"Financeiro",icon:i.A},{id:"pacientes",name:"Pacientes",icon:r.A},{id:"clinico",name:"Cl\xednico",icon:n.A},{id:"equipe",name:"Equipe",icon:c.A},{id:"lgpd",name:"LGPD",icon:d.A}];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.A,{title:"Central de Relat\xf3rios",subtitle:"Transforme dados em decis\xf5es. Insights para otimizar sua cl\xednica."}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("div",{className:"border-b border-slate-200",children:(0,s.jsx)("nav",{className:"-mb-px flex space-x-6 overflow-x-auto","aria-label":"Tabs",children:N.map(a=>(0,s.jsxs)("button",{onClick:()=>t(a.id),className:"\n                                    whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center\n                                    ".concat(e===a.id?"border-sky-500 text-sky-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300","\n                                "),children:[(0,s.jsx)(a.icon,{className:"mr-2 h-5 w-5"}),a.name]},a.id))})})}),(0,s.jsx)("div",{children:(()=>{let t=(null==h?void 0:h.message)||v;if(x||g)return(0,s.jsx)(m.A,{});if(t)return(0,s.jsx)("div",{className:"text-center p-10 text-red-500",children:t});switch(e){case"financeiro":return(0,s.jsx)(D,{appointments:f,therapists:a});case"pacientes":return(0,s.jsx)(E,{patients:u});case"clinico":return(0,s.jsx)(P,{title:"Relat\xf3rios Cl\xednicos"});case"equipe":return(0,s.jsx)(P,{title:"Relat\xf3rios de Equipe"});case"lgpd":return(0,s.jsx)(P,{title:"Relat\xf3rios de Conformidade LGPD"});default:return null}})()})]})}},69241:(e,t,a)=>{a.d(t,{$:()=>s});function s(){for(var e,t,a=0,s="",l=arguments.length;a<l;a++)(e=arguments[a])&&(t=function e(t){var a,s,l="";if("string"==typeof t||"number"==typeof t)l+=t;else if("object"==typeof t)if(Array.isArray(t)){var i=t.length;for(a=0;a<i;a++)t[a]&&(s=e(t[a]))&&(l&&(l+=" "),l+=s)}else for(s in t)t[s]&&(l&&(l+=" "),l+=s);return l}(e))&&(s&&(s+=" "),s+=t);return s}},73291:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(17963).A)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},79247:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(17963).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},79622:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(17963).A)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},83981:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(17963).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},96887:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(17963).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},97433:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(17963).A)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])}}]);