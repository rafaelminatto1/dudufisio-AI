"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[85],{748:(e,t,a)=>{a.d(t,{db:()=>d});var s=a(66766);let n=[...s.N],i=[...s.ZS],r=[...s.Tf],l=[...s.BT],o=[...s.eB],d={getPatients:()=>[...n],getPatientById:e=>n.find(t=>t.id===e),addPatient:e=>{n.unshift(e)},updatePatient:e=>{n=n.map(t=>t.id===e.id?e:t)},getAppointments:()=>[...i],saveAppointment:e=>{let t=i.findIndex(t=>t.id===e.id);t>-1?i[t]=e:i.push(e)},deleteAppointment:e=>{i=i.filter(t=>t.id!==e)},deleteAppointmentSeries:(e,t)=>{i=i.filter(a=>!(a.seriesId===e&&a.startTime>=t))},getSoapNotes:()=>[...r],saveSoapNote:e=>{let t=r.findIndex(t=>t.id===e.id);t>-1?r[t]=e:r.unshift(e)},getTreatmentPlans:()=>[...l],updateTreatmentPlan:e=>{let t=l.findIndex(t=>t.id===e.id);t>-1&&(l[t]=e)},getExercisePrescriptions:()=>[...o],setExercisePrescriptionsForPlan:(e,t)=>{(o=o.filter(t=>t.treatmentPlanId!==e)).push(...t)}}},12168:(e,t,a)=>{a.d(t,{L5:()=>c,OS:()=>d,Ob:()=>x,TC:()=>p,Xl:()=>g,Z6:()=>h,bW:()=>o,dc:()=>u,mQ:()=>m,uE:()=>l});var s=a(14776),n=a(748),i=a(87107);let r=e=>new Promise(t=>setTimeout(t,e)),l=async()=>(await r(500),[...n.db.getPatients()].sort((e,t)=>new Date(t.lastVisit).getTime()-new Date(e.lastVisit).getTime())),o=async e=>{if(await r(300),e.length<2)return[];let t=e.toLowerCase();return n.db.getPatients().filter(e=>e.name.toLowerCase().includes(t)||e.cpf.includes(t)).map(e=>({id:e.id,name:e.name,email:e.email,phone:e.phone,status:e.status,lastVisit:e.lastVisit,avatarUrl:e.avatarUrl,cpf:e.cpf})).slice(0,10)},d=async e=>{await r(500);let t={id:"patient_".concat(Date.now()),name:e.trim(),cpf:"TEMP-".concat(Date.now()),birthDate:"",phone:"",email:"",emergencyContact:{name:"",phone:""},address:{street:"",city:"",state:"",zip:""},status:s.WW.Active,lastVisit:new Date().toISOString(),registrationDate:new Date().toISOString(),avatarUrl:"https://picsum.photos/seed/".concat(Date.now(),"/200/200"),consentGiven:!0,whatsappConsent:"opt-out"};return n.db.addPatient(t),i.g.emit("patients:changed"),t},c=async e=>{let{limit:t=15,cursor:a,searchTerm:s,statusFilter:i,startDate:l,endDate:o,therapistId:d}=e;await r(500);let c=n.db.getPatients();if(s){let e=s.toLowerCase();c=c.filter(t=>t.name.toLowerCase().includes(e)||t.cpf.includes(e))}if(i&&"All"!==i){let e={Active:"Active",Inactive:"Inactive",Discharged:"Discharged",Ativo:"Active",Inativo:"Inactive",Alta:"Discharged"}[i]||i;c=c.filter(t=>t.status===e)}if(l){let e=new Date(l);e.setHours(0,0,0,0),c=c.filter(t=>new Date(t.registrationDate)>=e)}if(o){let e=new Date(o);e.setHours(23,59,59,999),c=c.filter(t=>new Date(t.registrationDate)<=e)}if(d&&"All"!==d){let e=new Set(n.db.getAppointments().filter(e=>e.therapistId===d).map(e=>e.patientId));c=c.filter(t=>e.has(t.id))}c.sort((e,t)=>{let a=new Date(e.registrationDate).getTime(),s=new Date(t.registrationDate).getTime();return s!==a?s-a:e.id.localeCompare(t.id)});let m=a?c.findIndex(e=>e.id===a)+1:0;if(a&&0===m)return{patients:[],nextCursor:null};let u=c.slice(m,m+t),h=u.length===t&&u.length>0?u[u.length-1].id:null;return{patients:u.map(e=>({id:e.id,name:e.name,email:e.email,phone:e.phone,status:e.status,lastVisit:e.lastVisit,avatarUrl:e.avatarUrl,medicalAlerts:e.medicalAlerts})),nextCursor:h}},m=async e=>(await r(300),n.db.getPatientById(e)),u=async e=>{await r(400);let t={id:"patient_".concat(Date.now()),...e,lastVisit:new Date().toISOString()};return n.db.addPatient(t),i.g.emit("patients:changed"),t},h=async e=>(await r(400),n.db.updatePatient(e),i.g.emit("patients:changed"),e),g=async(e,t)=>{await r(600);let a=n.db.getPatientById(e);if(!a)throw Error("Paciente n\xe3o encontrado.");let s={name:t.name,url:"#",type:t.type,size:t.size},l={...a,attachments:[...a.attachments||[],s]};return n.db.updatePatient(l),i.g.emit("patients:changed"),s},x=async(e,t)=>{await r(200);let a=n.db.getPatientById(e);if(!a)throw Error("Paciente n\xe3o encontrado.");let s={id:"log_".concat(Date.now()),...t},l={...a,communicationLogs:[s,...a.communicationLogs||[]]};return n.db.updatePatient(l),i.g.emit("patients:changed"),l},p=async(e,t)=>{await r(200);let a=n.db.getPatientById(e);if(!a)throw Error("Paciente n\xe3o encontrado.");let s={...a,painPoints:t};return n.db.updatePatient(s),i.g.emit("patients:changed"),s}},24688:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(37876);a(14232);var n=a(94841),i=a(69263),r=a(16653);let l=e=>{let{selectedScore:t,onSelectScore:a}=e,l=e=>e>=0&&e<=3?{color:"text-green-600",bgColor:"bg-green-100",hoverBg:"hover:bg-green-200",icon:(0,s.jsx)(n.A,{className:"w-5 h-5"})}:e>=4&&e<=6?{color:"text-amber-600",bgColor:"bg-amber-100",hoverBg:"hover:bg-amber-200",icon:(0,s.jsx)(i.A,{className:"w-5 h-5"})}:e>=7&&e<=10?{color:"text-red-600",bgColor:"bg-red-100",hoverBg:"hover:bg-red-200",icon:(0,s.jsx)(r.A,{className:"w-5 h-5"})}:{color:"text-slate-600",bgColor:"bg-slate-100",hoverBg:"hover:bg-slate-200",icon:null};return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-teal-700 mb-2 block",children:"Escala Visual de Dor (EVA)"}),(0,s.jsx)("div",{className:"flex items-center justify-between space-x-1 bg-slate-50 p-2 rounded-lg",children:Array.from({length:11},(e,t)=>t).map(e=>{let n=t===e,{color:i,bgColor:r,hoverBg:o}=l(e);return(0,s.jsx)("button",{type:"button",onClick:()=>a(e),className:"w-8 h-8 flex items-center justify-center rounded-full text-sm font-bold transition-all duration-200\n                ".concat(n?"".concat(i," ").concat(r," ring-2 ring-offset-1 ring-current"):"text-slate-600 ".concat(o),"\n              "),title:"Dor n\xedvel ".concat(e),children:e},e)})}),void 0!==t&&(0,s.jsxs)("div",{className:"mt-2 flex items-center justify-center p-2 rounded-md bg-slate-100",children:[(0,s.jsxs)("div",{className:"mr-2 ".concat(l(t).color),children:[" ",l(t).icon]}),(0,s.jsxs)("p",{className:"text-sm font-semibold ".concat(l(t).color),children:["N\xedvel de dor selecionado: ",t]})]})]})}},28647:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(37876),n=a(14232),i=a(94504),r=a(42775),l=a(46443);let o=e=>{let{value:t,onChange:a,rows:o=3,placeholder:d,disabled:c=!1}=e,m=(0,n.useRef)(null),u=e=>{let s=m.current;if(!s||c)return;let n="",i=s.selectionStart,r=s.selectionEnd,l=t.substring(i,r),o="";if("list"===e){let e=t.lastIndexOf("\n",i-1)+1,a=t.substring(0,e),s=t.substring(e,r),n=t.substring(r),l=s.split("\n"),d=l.every(e=>e.trim().startsWith("* ")),c=l.map(e=>d?e.replace(/^\s*\*\s?/,""):e.trim()?"* ".concat(e):e).join("\n");o="".concat(a).concat(c).concat(n)}else{n="bold"===e?"**":"*";let a="".concat(n).concat(l).concat(n);o="".concat(t.substring(0,i)).concat(a).concat(t.substring(r))}a(o),setTimeout(()=>{s.focus(),"list"!==e&&(s.selectionStart=i+n.length,s.selectionEnd=r+n.length)},0)};return(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 border border-b-0 border-slate-300 p-2 rounded-t-lg ".concat(c?"bg-slate-200":"bg-slate-50"),children:[(0,s.jsx)("button",{type:"button",onClick:()=>u("bold"),className:"p-1.5 rounded hover:bg-slate-200 disabled:opacity-50",title:"Negrito (Ctrl+B)",disabled:c,children:(0,s.jsx)(i.A,{className:"w-4 h-4"})}),(0,s.jsx)("button",{type:"button",onClick:()=>u("italic"),className:"p-1.5 rounded hover:bg-slate-200 disabled:opacity-50",title:"It\xe1lico (Ctrl+I)",disabled:c,children:(0,s.jsx)(r.A,{className:"w-4 h-4"})}),(0,s.jsx)("button",{type:"button",onClick:()=>u("list"),className:"p-1.5 rounded hover:bg-slate-200 disabled:opacity-50",title:"Lista",disabled:c,children:(0,s.jsx)(l.A,{className:"w-4 h-4"})})]}),(0,s.jsx)("textarea",{ref:m,value:t,onChange:e=>a(e.target.value),rows:o,placeholder:d,className:"w-full p-2 border border-slate-300 rounded-b-lg focus:outline-none focus:ring-1 focus:ring-sky-500 text-sm flex-1 ".concat(c?"bg-slate-100 cursor-not-allowed":""),"aria-label":"Editor de Texto do Relat\xf3rio",disabled:c})]})}},39194:(e,t,a)=>{a.d(t,{Cq:()=>o,gp:()=>l,lV:()=>r});var s=a(748),n=a(87107);let i=e=>new Promise(t=>setTimeout(t,e)),r=async e=>(await i(300),[...s.db.getSoapNotes()].filter(t=>t.patientId===e).sort((e,t)=>new Date(t.date.split("/").reverse().join("-")).getTime()-new Date(e.date.split("/").reverse().join("-")).getTime())),l=async(e,t)=>{await i(400);let a={id:"note_".concat(Date.now()),patientId:e,therapist:"Dr. Roberto",...t};return s.db.saveSoapNote(a),n.g.emit("notes:changed"),a},o=async e=>{let t;return await i(300),t=e.id?{...s.db.getSoapNotes().find(t=>t.id===e.id),...e}:{id:"note_".concat(Date.now()),therapist:"Dr. Roberto",date:new Date().toLocaleDateString("pt-BR"),subjective:"",objective:"",assessment:"",plan:"",...e},s.db.saveSoapNote(t),n.g.emit("notes:changed"),t}},39303:(e,t,a)=>{a.d(t,{Fq:()=>l,td:()=>o,z0:()=>r});var s=a(748),n=a(87107);let i=e=>new Promise(t=>setTimeout(t,e)),r=async e=>{await i(300);let t=s.db.getTreatmentPlans().find(t=>t.patientId===e);if(t){let e=await l(t.id);return{...t,exercises:e}}},l=async e=>(await i(300),s.db.getExercisePrescriptions().filter(t=>t.treatmentPlanId===e)),o=async(e,t)=>{await i(400);let a=s.db.getTreatmentPlans(),r=a.findIndex(t=>t.patientId===e);if(r>-1){let e=a[r],i=(t.exercises||[]).map((t,a)=>({id:"ex_".concat(Date.now(),"_").concat(a),treatmentPlanId:e.id,exerciseName:t.exerciseName,sets:t.sets,repetitions:t.repetitions,resistanceLevel:"A definir",progressionCriteria:"A definir"})),l={...e,treatmentGoals:t.treatmentGoals||e.treatmentGoals,exercises:i.length>0?i:e.exercises};return s.db.updateTreatmentPlan(l),s.db.setExercisePrescriptionsForPlan(e.id,i),n.g.emit("treatmentPlans:changed"),l}throw Error("Plano de tratamento n\xe3o encontrado para este paciente.")}},66822:(e,t,a)=>{a.d(t,{dj:()=>r}),a(37876);var s=a(14232);let n=(0,s.createContext)(void 0),i=(0,s.createContext)(void 0),r=()=>{let e=(()=>{let e=(0,s.useContext)(n);return void 0===e?{enabled:!1,logRouterChange:()=>{},logHookCall:()=>{},logContextAccess:()=>{}}:e})(),t=(0,s.useContext)(i);if(e.logContextAccess("ToastContext","useToast"),!t){let e=Error("useToast must be used within a ToastProvider");throw console.error("❌ Toast Context Error:",e.message),e}return{showToast:t.showToast}}},80085:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var s=a(37876),n=a(14232),i=a(88307),r=a(61052),l=a(83981),o=a(6394),d=a(9498),c=a(34287),m=a(21355),u=a(40599);let h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[a,s]=(0,n.useState)(!0),[i,r]=(0,n.useState)(null),l=(0,n.useCallback)(async()=>{s(!0);try{await Promise.all(e.map(e=>e())),r(null)}catch(e){r(e),console.error("Failed to fetch page data:",e)}finally{s(!1)}},[...t]);return(0,n.useEffect)(()=>{l()},[l]),{isLoading:a,error:i,refetch:l}};var g=a(66822),x=a(93508),p=a(12168),v=a(39194),f=a(39303),b=a(14776),w=a(88635),j=a(95857),y=a(24688),N=a(82e3),A=a(28647);let S=()=>{let{appointmentId:e}=i.g(),t=i.Zp(),{showToast:a}=(0,g.dj)(),[S,P]=(0,n.useState)(null),[D,I]=(0,n.useState)(null),[C,E]=(0,n.useState)(null),[T,k]=(0,n.useState)([]),[O,B]=(0,n.useState)(null),[L,F]=(0,n.useState)([]),[V,_]=(0,n.useState)(!1),[z,R]=(0,n.useState)(!1),[U,J]=(0,n.useState)(""),[M,q]=(0,n.useState)(""),[G,H]=(0,n.useState)(""),[W,X]=(0,n.useState)(""),[Z,Q]=(0,n.useState)(void 0),[K,Y]=(0,n.useState)([]),[$,ee]=(0,n.useState)({}),[et,ea]=(0,n.useState)("saved"),[es,en]=(0,n.useState)(null),[ei,er]=(0,n.useState)([]),[,el]=(0,n.useState)(!1),[eo,ed]=(0,n.useState)(null),{isLoading:ec,error:em}=h([(0,n.useCallback)(async()=>{if(!e)return;let t=(await x.Xj()).find(t=>t.id===e);if(!t)throw Error("Consulta n\xe3o encontrada.");P(t);let a=await p.mQ(t.patientId);if(!a)throw Error("Paciente n\xe3o encontrado.");I(a),F((a.trackedMetrics||[]).filter(e=>e.isActive));let[s,n]=await Promise.all([v.lV(a.id),f.z0(a.id)]);B(s[0]||null),n&&(E(n),k(await f.Fq(n.id)))},[e])],[e]);(0,n.useEffect)(()=>{ec||"saving"===et||ea("unsaved")},[U,M,G,W,Z,K,$,ei,ec]),(0,n.useEffect)(()=>{if("unsaved"!==et||!D)return;let e=setTimeout(async()=>{ea("saving");let e=[M,ei.map(e=>"- ".concat(e.part,": ").concat(e.observation)).join("\n")].filter(Boolean).join("\n\n**Observa\xe7\xf5es do Mapa Corporal:**\n"),t=Object.entries($).filter(e=>{let[,t]=e;return""!==t&&!isNaN(Number(t))}).map(e=>{let[t,a]=e;return{metricId:t,value:Number(a)}}),s={...(null==es?void 0:es.id)&&{id:es.id},patientId:D.id,date:new Date().toLocaleDateString("pt-BR"),subjective:U,objective:e,assessment:G,plan:W,...void 0!==Z&&{painScale:Z},bodyParts:ei.map(e=>e.part),metricResults:t};try{let e=await v.Cq(s);en(e),ea("saved")}catch(e){a("Falha no salvamento autom\xe1tico.","error"),ea("unsaved")}},2500);return()=>clearTimeout(e)},[et,D,es,U,M,G,W,Z,$,ei,a]);let eu=async()=>{if(D&&S){if("saved"!==et)return void a("Aguarde o salvamento autom\xe1tico antes de finalizar.","info");_(!0);try{await x.Fy({...S,status:b.y2.Completed}),a("Sess\xe3o finalizada com sucesso!","success"),t("/patients/".concat(D.id))}catch(e){a("Falha ao finalizar a sess\xe3o.","error"),_(!1)}}},eh=async()=>{if(!U.trim()&&!M.trim()||z)return;R(!0);let e="Com base no relato Subjetivo e nos achados Objetivos a seguir, sugira uma Avalia\xe7\xe3o e um Plano de tratamento concisos. N\xedvel de dor: ".concat(Z||"N/A",'. Formate a resposta com "AVALIA\xc7\xc3O:" e "PLANO:".\nS: "').concat(U,'"\nO: "').concat(M,'"');try{let t=(await N.u.getResponse(e)).content,s=t.match(/AVALIAÇÃO:([\s\S]*?)PLANO:/i),n=t.match(/PLANO:([\s\S]*)/i);s&&s[1]&&H(s[1].trim()),n&&n[1]&&X(n[1].trim()),a("Sugest\xe3o gerada pela IA.","info")}catch(e){a("Erro ao gerar sugest\xe3o.","error")}finally{R(!1)}};return ec?(0,s.jsx)(w.A,{}):!em&&D&&S?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("header",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold leading-tight text-slate-900",children:D.name}),(0,s.jsxs)("p",{className:"mt-1 text-sm text-slate-500",children:["Sess\xe3o em andamento - ",S.type]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(()=>{switch(et){case"unsaved":return(0,s.jsx)("span",{className:"text-xs text-slate-500",children:"Altera\xe7\xf5es n\xe3o salvas"});case"saving":return(0,s.jsxs)("span",{className:"text-xs text-amber-600 flex items-center",children:[(0,s.jsx)(r.A,{size:12,className:"animate-spin mr-1.5"})," Salvando..."]});case"saved":return(0,s.jsxs)("span",{className:"text-xs text-green-600 flex items-center",children:[(0,s.jsx)(l.A,{size:12,className:"mr-1.5"})," Salvo"]});default:return null}})(),(0,s.jsxs)("button",{onClick:eu,disabled:V||"saved"!==et,className:"inline-flex items-center justify-center bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg shadow-sm transition-colors disabled:bg-green-300 disabled:cursor-not-allowed",children:[V?(0,s.jsx)(r.A,{className:"w-5 h-5 mr-2 animate-spin"}):(0,s.jsx)(o.A,{className:"w-5 h-5 mr-2"}),V?"Salvando...":"Finalizar e Salvar"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 items-start",children:[(0,s.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[C&&(0,s.jsx)(j.A,{title:"Plano de Tratamento",icon:(0,s.jsx)(d.A,{}),children:(0,s.jsxs)("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-2",children:[(0,s.jsx)("p",{className:"text-sm text-slate-600",children:C.treatmentGoals}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"font-semibold text-sm flex items-center mb-1",children:[(0,s.jsx)(c.A,{className:"w-4 h-4 mr-2"})," Exerc\xedcios"]}),(0,s.jsx)("ul",{className:"space-y-1 text-xs list-disc pl-5",children:T.map(e=>(0,s.jsxs)("li",{children:[e.exerciseName," (",e.sets,"x",e.repetitions,")"]},e.id))})]})]})}),O&&(0,s.jsx)(j.A,{title:"\xdaltima Evolu\xe7\xe3o (".concat(O.date,")"),icon:(0,s.jsx)(m.A,{}),children:(0,s.jsxs)("div",{className:"space-y-2 text-sm text-slate-600 max-h-60 overflow-y-auto pr-2",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{className:"font-semibold text-sky-600",children:"S:"})," ",O.subjective]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{className:"font-semibold text-sky-600",children:"A:"})," ",O.assessment]})]})})]}),(0,s.jsxs)("div",{className:"lg:col-span-2 bg-white p-6 rounded-2xl shadow-sm space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-slate-800",children:"Evolu\xe7\xe3o da Sess\xe3o Atual"}),L.length>0&&(0,s.jsxs)("div",{className:"p-4 bg-slate-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-teal-700 mb-2",children:"M\xe9tricas de Acompanhamento"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:L.map(e=>{var t;return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium text-slate-600",children:e.name}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"number",value:null!=(t=$[e.id])?t:"",onChange:t=>((e,t)=>{ee(a=>({...a,[e]:""===t?"":Number(t)}))})(e.id,t.target.value),className:"mt-1 w-full p-2 pr-10 border border-slate-300 rounded-lg"}),(0,s.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center pr-3 text-xs text-slate-500",children:e.unit})]})]},e.id)})})]}),(0,s.jsx)(y.A,{selectedScore:Z,onSelectScore:Q}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-sky-700",children:"S (Subjetivo)"}),(0,s.jsx)(A.A,{value:U,onChange:J,rows:2,placeholder:"Relato do paciente..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-sky-700",children:"O (Objetivo)"}),(0,s.jsx)(A.A,{value:M,onChange:q,rows:2,placeholder:"Achados, testes, medidas..."})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsxs)("button",{onClick:eh,disabled:z||!U.trim()&&!M.trim(),className:"px-4 py-2 text-sm font-medium text-sky-600 bg-sky-50 border border-sky-200 rounded-lg hover:bg-sky-100 flex items-center disabled:bg-slate-100 disabled:text-slate-400",children:[z?(0,s.jsx)(r.A,{className:"w-4 h-4 mr-2 animate-spin"}):(0,s.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Sugerir A/P com IA"]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-sky-700",children:"A (Avalia\xe7\xe3o)"}),(0,s.jsx)(A.A,{value:G,onChange:H,rows:2,placeholder:"Diagn\xf3stico cinesiofuncional da sess\xe3o..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-sky-700",children:"P (Plano)"}),(0,s.jsx)(A.A,{value:W,onChange:X,rows:2,placeholder:"Condutas para a pr\xf3xima sess\xe3o, orienta\xe7\xf5es..."})]})]})]})]})}):(0,s.jsx)("div",{className:"text-center p-10 text-red-500",children:(null==em?void 0:em.message)||"N\xe3o foi poss\xedvel carregar os dados da sess\xe3o."})}},82e3:(e,t,a)=>{a.d(t,{u:()=>n});class s{async query(e,t){return{response:"Mock AI response for: ".concat(e.slice(0,50),"..."),provider:t||"mock",timestamp:new Date,usage:{tokens:100,cost:.01}}}async getQueryHistory(){return[]}async getAvailableProviders(){return["mock"]}}let n=new s},87107:(e,t,a)=>{a.d(t,{g:()=>l});var s=a(14776),n=a(66766);let i=e=>new Promise(t=>setTimeout(t,e));class r{on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}off(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(e=>e!==t))}emit(e){for(var t=arguments.length,a=Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];this.events[e]&&this.events[e].forEach(e=>e(...a))}async getEvents(){return await i(300),[...this.eventsData].sort((e,t)=>t.startDate.getTime()-e.startDate.getTime())}async getEventById(e){await i(200);let t=this.eventsData.find(t=>t.id===e);return t?JSON.parse(JSON.stringify(t)):void 0}async getRegistrationsByEventId(e){return await i(200),this.registrationsData.filter(t=>t.eventId===e)}async saveEvent(e,t){if(await i(400),e.id){let t=this.eventsData.findIndex(t=>t.id===e.id);if(t>-1){let a=this.eventsData[t];if(!a)throw Error("Event not found");let s={...a,...e,id:a.id,registrations:a.registrations,providers:a.providers};return this.eventsData[t]=s,this.emit("events:changed"),s}throw Error("Event not found")}{let a={...e,id:"event_".concat(Date.now()),registrations:[],providers:[],organizerId:t};return this.eventsData.unshift(a),this.emit("events:changed"),a}}async checkInParticipant(e,t,a){await i(500);let n=this.registrationsData.findIndex(t=>t.id===e);if(-1===n)throw Error("Inscri\xe7\xe3o n\xe3o encontrada.");let r=this.registrationsData[n];if(!r)throw Error("Inscri\xe7\xe3o n\xe3o encontrada.");if(r.status===s.m7.Attended)throw Error("Participante j\xe1 fez check-in.");let l={...r,status:s.m7.Attended,checkedInAt:new Date,checkedInBy:a};this.registrationsData[n]=l;let o=this.eventsData.findIndex(e=>e.id===r.eventId);if(o>-1){let t=this.eventsData[o];if(t){let a=t.registrations.findIndex(t=>t.id===e);a>-1?t.registrations[a]=l:t.registrations.push(l)}}return this.emit("events:changed"),l}async confirmProvider(e){for(let t of(await i(500),this.eventsData)){let a=t.providers.findIndex(t=>t.id===e);if(a>-1){let e=t.providers[a];if(e){if(e.status!==s.aJ.Applied)throw Error("Apenas inscri\xe7\xf5es com status 'Inscrito' podem ser confirmadas.");return e.status=s.aJ.Confirmed,this.emit("events:changed"),e}}}throw Error("Prestador de servi\xe7o n\xe3o encontrado.")}async payProvider(e){for(let t of(await i(500),this.eventsData)){let a=t.providers.findIndex(t=>t.id===e);if(a>-1){let e=t.providers[a];if(e){if(e.status!==s.aJ.Confirmed)throw Error("Apenas prestadores confirmados podem receber pagamento.");return e.status=s.aJ.Paid,this.emit("events:changed"),e}}}throw Error("Prestador de servi\xe7o n\xe3o encontrado.")}constructor(){this.events={},this.eventsData=[...n._X],this.registrationsData=[...n.ZM]}}let l=new r},88635:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(37876);a(14232);var n=a(368);let i=()=>(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-50",children:[(0,s.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,s.jsx)(n.A,{className:"w-16 h-16 text-teal-500 animate-pulse"}),(0,s.jsx)("div",{className:"absolute w-24 h-24 border-t-2 border-b-2 border-teal-200 rounded-full animate-spin"})]}),(0,s.jsx)("p",{className:"mt-4 text-lg font-semibold text-slate-600",children:"Carregando FisioFlow..."})]})},93508:(e,t,a)=>{a.d(t,{Fy:()=>d,Uh:()=>o,Xj:()=>l,aJ:()=>m,d3:()=>c});var s=a(748),n=a(87107),i=a(66766);let r=e=>new Promise(t=>setTimeout(t,e)),l=async(e,t)=>{await r(500);let a=s.db.getAppointments();if(e&&t){let s=new Date(t);return s.setHours(23,59,59,999),[...a].filter(t=>{let a=t.startTime.getTime();return a>=e.getTime()&&a<=s.getTime()})}return[...a]},o=async e=>(await r(300),s.db.getAppointments().filter(t=>t.patientId===e).sort((e,t)=>t.startTime.getTime()-e.startTime.getTime())),d=async e=>{await r(400);let t=i.N.find(t=>t.id===e.patientId),a={...e,patientAvatarUrl:(null==t?void 0:t.avatarUrl)||""};return s.db.saveAppointment(a),n.g.emit("appointments:changed"),a},c=async e=>{await r(400),s.db.deleteAppointment(e),n.g.emit("appointments:changed")},m=async(e,t)=>{await r(400),s.db.deleteAppointmentSeries(e,t),n.g.emit("appointments:changed")}},95857:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(37876);a(14232);let n=e=>{let{title:t,icon:a,children:n,actionButton:i}=e;return(0,s.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm h-full flex flex-col border border-slate-200/80",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 flex items-center",children:[a&&(0,s.jsx)("span",{className:"mr-3 text-sky-500",children:a}),t]}),i]}),(0,s.jsx)("div",{className:"flex-grow",children:n})]})}}}]);