"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1547],{748:(t,e,a)=>{a.d(e,{db:()=>l});var i=a(66766);let n=[...i.N],s=[...i.ZS],r=[...i.Tf],o=[...i.BT],d=[...i.eB],l={getPatients:()=>[...n],getPatientById:t=>n.find(e=>e.id===t),addPatient:t=>{n.unshift(t)},updatePatient:t=>{n=n.map(e=>e.id===t.id?t:e)},getAppointments:()=>[...s],saveAppointment:t=>{let e=s.findIndex(e=>e.id===t.id);e>-1?s[e]=t:s.push(t)},deleteAppointment:t=>{s=s.filter(e=>e.id!==t)},deleteAppointmentSeries:(t,e)=>{s=s.filter(a=>!(a.seriesId===t&&a.startTime>=e))},getSoapNotes:()=>[...r],saveSoapNote:t=>{let e=r.findIndex(e=>e.id===t.id);e>-1?r[e]=t:r.unshift(t)},getTreatmentPlans:()=>[...o],updateTreatmentPlan:t=>{let e=o.findIndex(e=>e.id===t.id);e>-1&&(o[e]=t)},getExercisePrescriptions:()=>[...d],setExercisePrescriptionsForPlan:(t,e)=>{(d=d.filter(e=>e.treatmentPlanId!==t)).push(...e)}}},12168:(t,e,a)=>{a.d(e,{L5:()=>c,OS:()=>l,Ob:()=>f,TC:()=>u,Xl:()=>g,Z6:()=>h,bW:()=>d,dc:()=>m,mQ:()=>p,uE:()=>o});var i=a(14776),n=a(748),s=a(87107);let r=t=>new Promise(e=>setTimeout(e,t)),o=async()=>(await r(500),[...n.db.getPatients()].sort((t,e)=>new Date(e.lastVisit).getTime()-new Date(t.lastVisit).getTime())),d=async t=>{if(await r(300),t.length<2)return[];let e=t.toLowerCase();return n.db.getPatients().filter(t=>t.name.toLowerCase().includes(e)||t.cpf.includes(e)).map(t=>({id:t.id,name:t.name,email:t.email,phone:t.phone,status:t.status,lastVisit:t.lastVisit,avatarUrl:t.avatarUrl,cpf:t.cpf})).slice(0,10)},l=async t=>{await r(500);let e={id:"patient_".concat(Date.now()),name:t.trim(),cpf:"TEMP-".concat(Date.now()),birthDate:"",phone:"",email:"",emergencyContact:{name:"",phone:""},address:{street:"",city:"",state:"",zip:""},status:i.WW.Active,lastVisit:new Date().toISOString(),registrationDate:new Date().toISOString(),avatarUrl:"https://picsum.photos/seed/".concat(Date.now(),"/200/200"),consentGiven:!0,whatsappConsent:"opt-out"};return n.db.addPatient(e),s.g.emit("patients:changed"),e},c=async t=>{let{limit:e=15,cursor:a,searchTerm:i,statusFilter:s,startDate:o,endDate:d,therapistId:l}=t;await r(500);let c=n.db.getPatients();if(i){let t=i.toLowerCase();c=c.filter(e=>e.name.toLowerCase().includes(t)||e.cpf.includes(t))}if(s&&"All"!==s){let t={Active:"Active",Inactive:"Inactive",Discharged:"Discharged",Ativo:"Active",Inativo:"Inactive",Alta:"Discharged"}[s]||s;c=c.filter(e=>e.status===t)}if(o){let t=new Date(o);t.setHours(0,0,0,0),c=c.filter(e=>new Date(e.registrationDate)>=t)}if(d){let t=new Date(d);t.setHours(23,59,59,999),c=c.filter(e=>new Date(e.registrationDate)<=t)}if(l&&"All"!==l){let t=new Set(n.db.getAppointments().filter(t=>t.therapistId===l).map(t=>t.patientId));c=c.filter(e=>t.has(e.id))}c.sort((t,e)=>{let a=new Date(t.registrationDate).getTime(),i=new Date(e.registrationDate).getTime();return i!==a?i-a:t.id.localeCompare(e.id)});let p=a?c.findIndex(t=>t.id===a)+1:0;if(a&&0===p)return{patients:[],nextCursor:null};let m=c.slice(p,p+e),h=m.length===e&&m.length>0?m[m.length-1].id:null;return{patients:m.map(t=>({id:t.id,name:t.name,email:t.email,phone:t.phone,status:t.status,lastVisit:t.lastVisit,avatarUrl:t.avatarUrl,medicalAlerts:t.medicalAlerts})),nextCursor:h}},p=async t=>(await r(300),n.db.getPatientById(t)),m=async t=>{await r(400);let e={id:"patient_".concat(Date.now()),...t,lastVisit:new Date().toISOString()};return n.db.addPatient(e),s.g.emit("patients:changed"),e},h=async t=>(await r(400),n.db.updatePatient(t),s.g.emit("patients:changed"),t),g=async(t,e)=>{await r(600);let a=n.db.getPatientById(t);if(!a)throw Error("Paciente n\xe3o encontrado.");let i={name:e.name,url:"#",type:e.type,size:e.size},o={...a,attachments:[...a.attachments||[],i]};return n.db.updatePatient(o),s.g.emit("patients:changed"),i},f=async(t,e)=>{await r(200);let a=n.db.getPatientById(t);if(!a)throw Error("Paciente n\xe3o encontrado.");let i={id:"log_".concat(Date.now()),...e},o={...a,communicationLogs:[i,...a.communicationLogs||[]]};return n.db.updatePatient(o),s.g.emit("patients:changed"),o},u=async(t,e)=>{await r(200);let a=n.db.getPatientById(t);if(!a)throw Error("Paciente n\xe3o encontrado.");let i={...a,painPoints:e};return n.db.updatePatient(i),s.g.emit("patients:changed"),i}},41547:(t,e,a)=>{a.d(e,{As:()=>r,Ez:()=>o}),a(37876);var i=a(14232);a(45977),a(66766),a(12168),a(93508),a(88635);let n=(0,i.createContext)(void 0);function s(){let t=(0,i.useContext)(n);if(void 0===t)throw Error("useApp must be used within an AppProvider");return t}let r=()=>{let{user:t,isAuthenticated:e,isLoading:a,login:i,logout:n}=s();return{user:t,isAuthenticated:e,isLoading:a,login:i,logout:n}},o=()=>{let{therapists:t,patients:e,appointments:a,dataLoading:i,error:n,refetch:r}=s();return{therapists:t,patients:e,appointments:a,isLoading:i,error:n,refetch:r}}},87107:(t,e,a)=>{a.d(e,{g:()=>o});var i=a(14776),n=a(66766);let s=t=>new Promise(e=>setTimeout(e,t));class r{on(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e)}off(t,e){this.events[t]&&(this.events[t]=this.events[t].filter(t=>t!==e))}emit(t){for(var e=arguments.length,a=Array(e>1?e-1:0),i=1;i<e;i++)a[i-1]=arguments[i];this.events[t]&&this.events[t].forEach(t=>t(...a))}async getEvents(){return await s(300),[...this.eventsData].sort((t,e)=>e.startDate.getTime()-t.startDate.getTime())}async getEventById(t){await s(200);let e=this.eventsData.find(e=>e.id===t);return e?JSON.parse(JSON.stringify(e)):void 0}async getRegistrationsByEventId(t){return await s(200),this.registrationsData.filter(e=>e.eventId===t)}async saveEvent(t,e){if(await s(400),t.id){let e=this.eventsData.findIndex(e=>e.id===t.id);if(e>-1){let a=this.eventsData[e];if(!a)throw Error("Event not found");let i={...a,...t,id:a.id,registrations:a.registrations,providers:a.providers};return this.eventsData[e]=i,this.emit("events:changed"),i}throw Error("Event not found")}{let a={...t,id:"event_".concat(Date.now()),registrations:[],providers:[],organizerId:e};return this.eventsData.unshift(a),this.emit("events:changed"),a}}async checkInParticipant(t,e,a){await s(500);let n=this.registrationsData.findIndex(e=>e.id===t);if(-1===n)throw Error("Inscri\xe7\xe3o n\xe3o encontrada.");let r=this.registrationsData[n];if(!r)throw Error("Inscri\xe7\xe3o n\xe3o encontrada.");if(r.status===i.m7.Attended)throw Error("Participante j\xe1 fez check-in.");let o={...r,status:i.m7.Attended,checkedInAt:new Date,checkedInBy:a};this.registrationsData[n]=o;let d=this.eventsData.findIndex(t=>t.id===r.eventId);if(d>-1){let e=this.eventsData[d];if(e){let a=e.registrations.findIndex(e=>e.id===t);a>-1?e.registrations[a]=o:e.registrations.push(o)}}return this.emit("events:changed"),o}async confirmProvider(t){for(let e of(await s(500),this.eventsData)){let a=e.providers.findIndex(e=>e.id===t);if(a>-1){let t=e.providers[a];if(t){if(t.status!==i.aJ.Applied)throw Error("Apenas inscri\xe7\xf5es com status 'Inscrito' podem ser confirmadas.");return t.status=i.aJ.Confirmed,this.emit("events:changed"),t}}}throw Error("Prestador de servi\xe7o n\xe3o encontrado.")}async payProvider(t){for(let e of(await s(500),this.eventsData)){let a=e.providers.findIndex(e=>e.id===t);if(a>-1){let t=e.providers[a];if(t){if(t.status!==i.aJ.Confirmed)throw Error("Apenas prestadores confirmados podem receber pagamento.");return t.status=i.aJ.Paid,this.emit("events:changed"),t}}}throw Error("Prestador de servi\xe7o n\xe3o encontrado.")}constructor(){this.events={},this.eventsData=[...n._X],this.registrationsData=[...n.ZM]}}let o=new r},88635:(t,e,a)=>{a.d(e,{A:()=>s});var i=a(37876);a(14232);var n=a(368);let s=()=>(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-50",children:[(0,i.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,i.jsx)(n.A,{className:"w-16 h-16 text-teal-500 animate-pulse"}),(0,i.jsx)("div",{className:"absolute w-24 h-24 border-t-2 border-b-2 border-teal-200 rounded-full animate-spin"})]}),(0,i.jsx)("p",{className:"mt-4 text-lg font-semibold text-slate-600",children:"Carregando FisioFlow..."})]})},93508:(t,e,a)=>{a.d(e,{Fy:()=>l,Uh:()=>d,Xj:()=>o,aJ:()=>p,d3:()=>c});var i=a(748),n=a(87107),s=a(66766);let r=t=>new Promise(e=>setTimeout(e,t)),o=async(t,e)=>{await r(500);let a=i.db.getAppointments();if(t&&e){let i=new Date(e);return i.setHours(23,59,59,999),[...a].filter(e=>{let a=e.startTime.getTime();return a>=t.getTime()&&a<=i.getTime()})}return[...a]},d=async t=>(await r(300),i.db.getAppointments().filter(e=>e.patientId===t).sort((t,e)=>e.startTime.getTime()-t.startTime.getTime())),l=async t=>{await r(400);let e=s.N.find(e=>e.id===t.patientId),a={...t,patientAvatarUrl:(null==e?void 0:e.avatarUrl)||""};return i.db.saveAppointment(a),n.g.emit("appointments:changed"),a},c=async t=>{await r(400),i.db.deleteAppointment(t),n.g.emit("appointments:changed")},p=async(t,e)=>{await r(400),i.db.deleteAppointmentSeries(t,e),n.g.emit("appointments:changed")}}}]);