"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9605],{368:(e,s,t)=>{t.d(s,{A:()=>a});let a=(0,t(17963).A)("stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]])},6782:(e,s,t)=>{t.d(s,{E:()=>r});var a=t(37876),l=t(93704);function r(e){let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,l.cn)("animate-pulse rounded-md bg-muted",s),...t})}},16653:(e,s,t)=>{t.d(s,{A:()=>a});let a=(0,t(17963).A)("frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]])},29466:(e,s,t)=>{t.d(s,{A:()=>a});let a=(0,t(17963).A)("chart-line",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]])},35880:(e,s,t)=>{t.d(s,{A:()=>l});var a=t(37876);t(14232);let l=e=>{let{title:s,subtitle:t,children:l}=e;return(0,a.jsxs)("div",{className:"pb-8 md:flex md:items-center md:justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold leading-tight text-slate-900 tracking-tight",children:s}),(0,a.jsx)("p",{className:"mt-2 text-lg text-slate-600",children:t})]}),(0,a.jsx)("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:l})]})}},36867:(e,s,t)=>{t.d(s,{A:()=>a});let a=(0,t(17963).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},39194:(e,s,t)=>{t.d(s,{Cq:()=>o,gp:()=>n,lV:()=>i});var a=t(748),l=t(87107);let r=e=>new Promise(s=>setTimeout(s,e)),i=async e=>(await r(300),[...a.db.getSoapNotes()].filter(s=>s.patientId===e).sort((e,s)=>new Date(s.date.split("/").reverse().join("-")).getTime()-new Date(e.date.split("/").reverse().join("-")).getTime())),n=async(e,s)=>{await r(400);let t={id:"note_".concat(Date.now()),patientId:e,therapist:"Dr. Roberto",...s};return a.db.saveSoapNote(t),l.g.emit("notes:changed"),t},o=async e=>{let s;return await r(300),s=e.id?{...a.db.getSoapNotes().find(s=>s.id===e.id),...e}:{id:"note_".concat(Date.now()),therapist:"Dr. Roberto",date:new Date().toLocaleDateString("pt-BR"),subjective:"",objective:"",assessment:"",plan:"",...e},a.db.saveSoapNote(s),l.g.emit("notes:changed"),s}},43061:(e,s,t)=>{t.d(s,{A:()=>l});var a=t(37876);t(14232);let l=e=>{let{content:s,className:t=""}=e;if(!s)return null;let l=e=>e.split(/(\*\*\*.*?\*\*\*|\*\*.*?\*\*|\*.*?\*|`.*?`|✅|📉|💪|🏆|⚠️)/g).filter(Boolean).map((e,s)=>"✅"===e||"\uD83D\uDCC9"===e||"\uD83D\uDCAA"===e||"\uD83C\uDFC6"===e||"⚠️"===e?(0,a.jsx)("span",{className:"mr-2",children:e},s):e.startsWith("***")&&e.endsWith("***")?(0,a.jsx)("strong",{children:(0,a.jsx)("em",{children:e.slice(3,-3)})},s):e.startsWith("**")&&e.endsWith("**")?(0,a.jsx)("strong",{children:e.slice(2,-2)},s):e.startsWith("*")&&e.endsWith("*")?(0,a.jsx)("em",{children:e.slice(1,-1)},s):e.startsWith("`")&&e.endsWith("`")?(0,a.jsx)("code",{className:"bg-slate-200 text-slate-800 px-1 py-0.5 rounded-sm font-mono text-xs",children:e.slice(1,-1)},s):e),r=s.split("\n"),i=[],n=[],o=null,d=()=>{if(n.length>0){let e="ol"===o?"ol":"ul";i.push((0,a.jsx)(e,{className:"pl-5 space-y-1 my-3 ".concat("ol"===o?"list-decimal":"list-disc"),children:n.map((e,s)=>(0,a.jsx)("li",{children:l(e)},s))},i.length)),n=[],o=null}};return r.forEach((e,s)=>{let t=e.trim();t.startsWith("## ")?(d(),i.push((0,a.jsx)("h2",{className:"text-xl font-bold text-slate-800 mt-4 mb-2 pb-2 border-b border-slate-200",children:l(t.substring(3))},s))):t.startsWith("### ")?(d(),i.push((0,a.jsx)("h3",{className:"text-lg font-semibold text-teal-600 my-3",children:l(t.substring(4))},s))):t.startsWith(">")?(d(),i.push((0,a.jsx)("blockquote",{className:"pl-4 italic border-l-4 border-slate-300 text-slate-600 my-2",children:l(t.substring(1))},s))):t.startsWith("---")?(d(),i.push((0,a.jsx)("hr",{className:"my-6 border-slate-200"},s))):t.startsWith("- ")?("ul"!==o&&d(),o="ul",n.push(t.substring(2).trim())):t.match(/^\d+\. /)?("ol"!==o&&d(),o="ol",n.push(t.replace(/^\d+\. /,"").trim())):t&&(d(),i.push((0,a.jsx)("p",{className:"my-1 leading-relaxed",children:l(t)},s)))}),d(),(0,a.jsx)("div",{className:"text-sm text-slate-800 font-sans max-w-none prose prose-sm prose-slate ".concat(t),children:i})}},47894:(e,s,t)=>{t.d(s,{AV:()=>d,Ms:()=>x,VF:()=>o,_z:()=>a,gl:()=>c,mt:()=>i,n8:()=>l,oP:()=>r,rW:()=>n,vm:()=>m});let a=()=>Promise.resolve({treatmentGoals:[],exercises:[]}),l=()=>Promise.resolve(""),r=()=>Promise.resolve(""),i=()=>Promise.resolve(""),n=()=>Promise.resolve(""),o=()=>Promise.resolve(""),d=()=>Promise.resolve(""),c=()=>Promise.resolve(""),m=()=>Promise.resolve(""),x=()=>Promise.resolve("")},56244:(e,s,t)=>{t.d(s,{A:()=>a});let a=(0,t(17963).A)("chart-no-axes-column-increasing",[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]])},62560:(e,s,t)=>{t.r(s),t.d(s,{default:()=>P});var a=t(37876),l=t(14232),r=t(35880),i=t(41547),n=t(39194),o=t(12168),d=t(47894),c=t(66822),m=t(6782),x=t(41180),h=t(56244),u=t(16653),p=t(69263),g=t(94841);let v=(0,t(17963).A)("laugh",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M18 13a6 6 0 0 1-6 5 6 6 0 0 1-6-5h12Z",key:"b2q4dd"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);var b=t(43061),j=t(34007),y=t(45907),f=t(4069),N=t(40570),w=t(25493),k=t(39493),A=t(27217),E=t(95857),C=t(29466);let S=e=>{let{metric:s,notes:t}=e,r=(0,l.useMemo)(()=>t.filter(e=>{var t;return null==(t=e.metricResults)?void 0:t.some(e=>e.metricId===s.id)}).map(e=>({date:e.date,value:e.metricResults.find(e=>e.metricId===s.id).value})).sort((e,s)=>new Date(e.date.split("/").reverse().join("-")).getTime()-new Date(s.date.split("/").reverse().join("-")).getTime()),[s.id,t]);return r.length<2?null:(0,a.jsx)(E.A,{title:"Sua Evolu\xe7\xe3o: ".concat(s.name),icon:(0,a.jsx)(C.A,{}),children:(0,a.jsx)("div",{className:"h-64 -ml-4",children:(0,a.jsx)(j.u,{width:"100%",height:"100%",children:(0,a.jsxs)(y.b,{data:r,margin:{top:5,right:20,left:0,bottom:5},children:[(0,a.jsx)(f.d,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),(0,a.jsx)(N.W,{dataKey:"date",stroke:"#64748b",fontSize:12,tickLine:!1,axisLine:!1}),(0,a.jsx)(w.h,{stroke:"#64748b",fontSize:12,tickLine:!1,axisLine:!1,domain:["dataMin - 1","dataMax + 1"],unit:s.unit?" ".concat(s.unit):""}),(0,a.jsx)(k.m,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"0.5rem"},labelStyle:{color:"#1e293b",fontWeight:"bold"},formatter:e=>["".concat(e," ").concat(s.unit||""),s.name]}),(0,a.jsx)(A.N,{type:"monotone",dataKey:"value",name:"Seu Resultado",stroke:"#14b8a6",strokeWidth:2,dot:{r:4,fill:"#14b8a6"},activeDot:{r:8,stroke:"#14b8a6",fill:"#fff",strokeWidth:2}})]})})})})},M=()=>(0,a.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-sm animate-pulse",children:[(0,a.jsx)(m.E,{className:"h-8 w-3/4 mb-4"}),(0,a.jsx)(m.E,{className:"h-5 w-full"}),(0,a.jsx)(m.E,{className:"h-5 w-5/6 mt-2"}),(0,a.jsx)("hr",{className:"my-6 border-slate-200"}),(0,a.jsx)(m.E,{className:"h-7 w-1/2 mb-4"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(m.E,{className:"h-5 w-1/4 mb-2"}),(0,a.jsx)(m.E,{className:"h-4 w-full mb-1"}),(0,a.jsx)(m.E,{className:"h-4 w-full mb-1"}),(0,a.jsx)(m.E,{className:"h-6 w-3/4 mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(m.E,{className:"h-5 w-1/4 mb-2"}),(0,a.jsx)(m.E,{className:"h-4 w-full mb-1"}),(0,a.jsx)(m.E,{className:"h-4 w-full mb-1"})]})]}),(0,a.jsx)(m.E,{className:"h-7 w-1/2 mt-8 mb-4"}),(0,a.jsx)(m.E,{className:"h-12 w-full"})]}),P=()=>{var e;let{user:s}=(0,i.As)(),{showToast:t}=(0,c.dj)(),[m,j]=(0,l.useState)(!0),[y,f]=(0,l.useState)(""),[N,w]=(0,l.useState)(null),[k,A]=(0,l.useState)(null),[E,C]=(0,l.useState)([]);(0,l.useEffect)(()=>{(async()=>{if(!(null==s?void 0:s.patientId))return j(!1);j(!0);try{var e,a;let[t,l]=await Promise.all([o.mQ(s.patientId),n.lV(s.patientId)]);if(!t)throw Error("Patient data not found.");if(A(t),C(l),l.length<2){f("## Ol\xe1!\n\nVoc\xea precisa de pelo menos uma avalia\xe7\xe3o inicial e uma sess\xe3o de acompanhamento para ver seu progresso. Continue com seu tratamento e em breve seus resultados aparecer\xe3o aqui!"),j(!1);return}let r=l[l.length-1],i=l[0];if(!r||!i)return void f("Dados insuficientes para gerar sum\xe1rio de progresso.");let c={nome_paciente:s.name.split(" ")[0]||s.name,dor_inicial:(null==(e=r.painScale)?void 0:e.toString())||"N/A",dor_atual:(null==(a=i.painScale)?void 0:a.toString())||"N/A",limitacao_inicial:r.subjective||"N/A",status_atual:i.assessment||"N/A",conquista_recente:i.subjective||"N/A",nome_fisio:i.therapist||"N/A"},m=await (0,d.AV)(c);f(m)}catch(e){console.error(e),t("N\xe3o foi poss\xedvel gerar seu resumo de progresso.","error"),f("Ocorreu um erro ao buscar seus dados. Por favor, tente novamente mais tarde.")}finally{j(!1)}})()},[s,t]);let P=e=>{w(e),t("Obrigado pelo seu feedback!","success")},W=(null==k||null==(e=k.trackedMetrics)?void 0:e.filter(e=>e.isActive))||[];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.A,{title:"Meu Progresso",subtitle:"Veja sua jornada de recupera\xe7\xe3o de forma clara e motivadora."}),m?(0,a.jsx)(M,{}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)("div",{className:"bg-white p-6 md:p-8 rounded-2xl shadow-sm",children:y?(0,a.jsx)(b.A,{content:y,className:"text-md"}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(x.A,{className:"w-16 h-16 mx-auto text-slate-300"}),(0,a.jsx)("h3",{className:"mt-4 text-lg font-semibold text-slate-700",children:"Acompanhamento Indispon\xedvel"}),(0,a.jsx)("p",{className:"mt-1 text-slate-500",children:"N\xe3o foi poss\xedvel carregar seu resumo de progresso."})]})}),W.length>0&&E.length>1&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-slate-800 mb-4 flex items-center",children:[(0,a.jsx)(h.A,{className:"w-6 h-6 mr-3 text-sky-500"})," Evolu\xe7\xe3o das M\xe9tricas"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:W.map(e=>(0,a.jsx)(S,{metric:e,notes:E},e.id))})]}),(0,a.jsx)("div",{className:"bg-white p-6 md:p-8 rounded-2xl shadow-sm",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-slate-800",children:"Como voc\xea se sente sobre sua evolu\xe7\xe3o?"}),(0,a.jsxs)("div",{className:"mt-4 flex justify-center items-center space-x-2 md:space-x-4",children:[(0,a.jsx)("button",{onClick:()=>P("\uD83D\uDE1E"),className:"p-3 md:p-4 rounded-full transition-transform transform hover:scale-110 ".concat("\uD83D\uDE1E"===N?"bg-red-200 ring-2 ring-red-400":"bg-slate-100 hover:bg-slate-200"),children:(0,a.jsx)(u.A,{className:"w-8 h-8 md:w-10 md:h-10 text-red-500"})}),(0,a.jsx)("button",{onClick:()=>P("\uD83D\uDE10"),className:"p-3 md:p-4 rounded-full transition-transform transform hover:scale-110 ".concat("\uD83D\uDE10"===N?"bg-amber-200 ring-2 ring-amber-400":"bg-slate-100 hover:bg-slate-200"),children:(0,a.jsx)(p.A,{className:"w-8 h-8 md:w-10 md:h-10 text-amber-500"})}),(0,a.jsx)("button",{onClick:()=>P("\uD83D\uDE0A"),className:"p-3 md:p-4 rounded-full transition-transform transform hover:scale-110 ".concat("\uD83D\uDE0A"===N?"bg-sky-200 ring-2 ring-sky-400":"bg-slate-100 hover:bg-slate-200"),children:(0,a.jsx)(g.A,{className:"w-8 h-8 md:w-10 md:h-10 text-sky-500"})}),(0,a.jsx)("button",{onClick:()=>P("\uD83D\uDE04"),className:"p-3 md:p-4 rounded-full transition-transform transform hover:scale-110 ".concat("\uD83D\uDE04"===N?"bg-green-200 ring-2 ring-green-400":"bg-slate-100 hover:bg-slate-200"),children:(0,a.jsx)(v,{className:"w-8 h-8 md:w-10 md:h-10 text-green-500"})})]})]})})]})]})}},66822:(e,s,t)=>{t.d(s,{dj:()=>i}),t(37876);var a=t(14232);let l=(0,a.createContext)(void 0),r=(0,a.createContext)(void 0),i=()=>{let e=(()=>{let e=(0,a.useContext)(l);return void 0===e?{enabled:!1,logRouterChange:()=>{},logHookCall:()=>{},logContextAccess:()=>{}}:e})(),s=(0,a.useContext)(r);if(e.logContextAccess("ToastContext","useToast"),!s){let e=Error("useToast must be used within a ToastProvider");throw console.error("❌ Toast Context Error:",e.message),e}return{showToast:s.showToast}}},69263:(e,s,t)=>{t.d(s,{A:()=>a});let a=(0,t(17963).A)("meh",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"8",x2:"16",y1:"15",y2:"15",key:"1xb1d9"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]])},93704:(e,s,t)=>{t.d(s,{cn:()=>r});var a=t(69241),l=t(29573);function r(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,l.QP)((0,a.$)(s))}},94841:(e,s,t)=>{t.d(s,{A:()=>a});let a=(0,t(17963).A)("smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]])},95857:(e,s,t)=>{t.d(s,{A:()=>l});var a=t(37876);t(14232);let l=e=>{let{title:s,icon:t,children:l,actionButton:r}=e;return(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm h-full flex flex-col border border-slate-200/80",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 flex items-center",children:[t&&(0,a.jsx)("span",{className:"mr-3 text-sky-500",children:t}),s]}),r]}),(0,a.jsx)("div",{className:"flex-grow",children:l})]})}}}]);