"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[569],{20569:(s,e,t)=>{t.r(e),t.d(e,{default:()=>p});var l=t(37876),a=t(14232),i=t(28249),n=t(21174),r=t(71233),d=t(12572),c=t(79247),o=t(60383),x=t(21355),m=t(66822),h=t(41547),j=t(93508),u=t(12168),g=t(39194),N=t(15496),b=t(43061);let p=s=>{let{appointmentId:e,onClose:t}=s,[p,v]=(0,a.useState)(null),[f,y]=(0,a.useState)(null),[w,A]=(0,a.useState)([]),[S,k]=(0,a.useState)(!0),[C,D]=(0,a.useState)(!1),[T,W]=(0,a.useState)("session"),{therapists:E}=(0,h.Ez)(),{showToast:P}=(0,m.dj)();(0,a.useEffect)(()=>{(async()=>{k(!0);try{let s=(await j.Xj()).find(s=>s.id===e);if(!s){P("Agendamento n\xe3o encontrado","error"),t();return}v(s);let l=await u.mQ(s.patientId);if(!l){P("Paciente n\xe3o encontrado","error"),t();return}y(l);let a=await g.lV(s.patientId);A(a.sort((s,e)=>new Date(e.date).getTime()-new Date(s.date).getTime()))}catch(s){console.error("Erro ao carregar dados da sess\xe3o:",s),P("Erro ao carregar dados da sess\xe3o","error"),t()}finally{k(!1)}})()},[e,t,P]);let R=async s=>{if(f)try{await g.gp(f.id,s);let e=await g.lV(f.id);A(e.sort((s,e)=>new Date(e.date).getTime()-new Date(s.date).getTime())),D(!1),P("Anota\xe7\xe3o da sess\xe3o salva com sucesso!","success")}catch(s){P("Erro ao salvar anota\xe7\xe3o da sess\xe3o","error")}},B=E.find(s=>s.id===(null==p?void 0:p.therapistId));if(S)return(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-sky-600"})});if(!p||!f)return null;let H=s=>{let{id:e,icon:t,label:a}=s;return(0,l.jsxs)("button",{onClick:()=>W(e),className:"flex items-center px-4 py-2 text-sm font-medium rounded-lg transition-colors ".concat(T===e?"bg-sky-500 text-white":"text-slate-600 hover:bg-slate-100"),children:[(0,l.jsx)(t,{className:"w-4 h-4 mr-2"}),a]})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[95vh] flex flex-col",children:[(0,l.jsxs)("header",{className:"flex items-center justify-between p-6 border-b",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-xl font-bold text-slate-800",children:"Sess\xe3o de Atendimento"}),(0,l.jsxs)("p",{className:"text-sm text-slate-600 mt-1",children:[f.name," - ",new Date(p.startTime).toLocaleString("pt-BR")]})]}),(0,l.jsx)("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-100 transition-colors",children:(0,l.jsx)(i.A,{className:"w-6 h-6 text-slate-500"})})]}),(0,l.jsxs)("div",{className:"flex gap-2 p-4 border-b",children:[(0,l.jsx)(H,{id:"session",icon:n.A,label:"Sess\xe3o Atual"}),(0,l.jsx)(H,{id:"history",icon:r.A,label:"Hist\xf3rico"}),(0,l.jsx)(H,{id:"patient",icon:d.A,label:"Dados do Paciente"})]}),(0,l.jsxs)("div",{className:"flex-1 overflow-hidden",children:["session"===T&&(0,l.jsx)("div",{className:"p-6 h-full overflow-y-auto",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-full",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4",children:[(0,l.jsxs)("h3",{className:"font-semibold text-slate-800 mb-3 flex items-center",children:[(0,l.jsx)(c.A,{className:"w-5 h-5 mr-2"}),"Informa\xe7\xf5es da Sess\xe3o"]}),(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Paciente:"})," ",f.name]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Fisioterapeuta:"})," ",(null==B?void 0:B.name)||"N/A"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Data/Hora:"})," ",new Date(p.startTime).toLocaleString("pt-BR")]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Dura\xe7\xe3o:"})," ",Math.round((new Date(p.endTime).getTime()-new Date(p.startTime).getTime())/6e4)," min"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Status:"})," ",p.status]}),p.sessionNumber&&p.totalSessions&&(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Sess\xe3o:"})," ",p.sessionNumber," de ",p.totalSessions]})]})]}),f.conditions&&f.conditions.length>0&&(0,l.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,l.jsx)("h3",{className:"font-semibold text-slate-800 mb-3",children:"Condi\xe7\xf5es/Queixas"}),(0,l.jsx)("div",{className:"space-y-2",children:f.conditions.map((s,e)=>(0,l.jsxs)("div",{className:"text-sm bg-white p-2 rounded border-l-4 border-blue-400",children:[(0,l.jsx)("strong",{children:s.name}),s.description&&(0,l.jsx)("p",{className:"text-slate-600 mt-1",children:s.description})]},e))})]}),(0,l.jsxs)("button",{onClick:()=>D(!0),className:"w-full bg-sky-500 hover:bg-sky-600 text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center",children:[(0,l.jsx)(o.A,{className:"w-5 h-5 mr-2"}),"Registrar Evolu\xe7\xe3o da Sess\xe3o"]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("h3",{className:"font-semibold text-slate-800 flex items-center",children:[(0,l.jsx)(x.A,{className:"w-5 h-5 mr-2"}),"\xdaltima Sess\xe3o"]}),w.length>0?(0,l.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 max-h-96 overflow-y-auto",children:[(0,l.jsxs)("div",{className:"text-sm text-slate-600 mb-2",children:["Sess\xe3o #",w[0].sessionNumber," - ",w[0].date]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{className:"text-sky-600",children:"S (Subjetivo):"}),(0,l.jsx)(b.A,{content:w[0].subjective})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{className:"text-sky-600",children:"O (Objetivo):"}),(0,l.jsx)(b.A,{content:w[0].objective})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{className:"text-sky-600",children:"A (Avalia\xe7\xe3o):"}),(0,l.jsx)(b.A,{content:w[0].assessment})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{className:"text-sky-600",children:"P (Plano):"}),(0,l.jsx)(b.A,{content:w[0].plan})]})]})]}):(0,l.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 text-center text-slate-500",children:[(0,l.jsx)(x.A,{className:"w-8 h-8 mx-auto mb-2 text-slate-300"}),"Nenhuma sess\xe3o anterior registrada"]})]})]})}),"history"===T&&(0,l.jsxs)("div",{className:"p-6 h-full overflow-y-auto",children:[(0,l.jsxs)("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center",children:[(0,l.jsx)(r.A,{className:"w-5 h-5 mr-2"}),"Hist\xf3rico de Sess\xf5es (",w.length,")"]}),w.length>0?(0,l.jsx)("div",{className:"space-y-4",children:w.map((s,e)=>(0,l.jsxs)("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[(0,l.jsx)("div",{className:"flex justify-between items-start mb-3",children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("h4",{className:"font-semibold text-slate-800",children:["Sess\xe3o #",s.sessionNumber]}),(0,l.jsxs)("p",{className:"text-sm text-slate-500",children:[s.date," - ",s.therapist]})]})}),(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{className:"text-sky-600",children:"S:"}),(0,l.jsx)("div",{className:"ml-4",children:(0,l.jsx)(b.A,{content:s.subjective})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{className:"text-sky-600",children:"O:"}),(0,l.jsx)("div",{className:"ml-4",children:(0,l.jsx)(b.A,{content:s.objective})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{className:"text-sky-600",children:"A:"}),(0,l.jsx)("div",{className:"ml-4",children:(0,l.jsx)(b.A,{content:s.assessment})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{className:"text-sky-600",children:"P:"}),(0,l.jsx)("div",{className:"ml-4",children:(0,l.jsx)(b.A,{content:s.plan})})]})]})]},s.id))}):(0,l.jsxs)("div",{className:"text-center text-slate-500 py-8",children:[(0,l.jsx)(x.A,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),(0,l.jsx)("p",{children:"Nenhuma sess\xe3o registrada ainda"})]})]}),"patient"===T&&(0,l.jsxs)("div",{className:"p-6 h-full overflow-y-auto",children:[(0,l.jsxs)("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center",children:[(0,l.jsx)(d.A,{className:"w-5 h-5 mr-2"}),"Dados do Paciente"]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,l.jsx)("div",{className:"space-y-4",children:(0,l.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4",children:[(0,l.jsx)("h4",{className:"font-semibold text-slate-800 mb-3",children:"Informa\xe7\xf5es Pessoais"}),(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Nome:"})," ",f.name]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"E-mail:"})," ",f.email]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Telefone:"})," ",f.phone]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Data de Nascimento:"})," ",new Date(f.birthDate).toLocaleDateString("pt-BR")]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Status:"})," ",f.status]})]})]})}),(0,l.jsxs)("div",{className:"space-y-4",children:[f.conditions&&f.conditions.length>0&&(0,l.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,l.jsx)("h4",{className:"font-semibold text-slate-800 mb-3",children:"Condi\xe7\xf5es/Queixas"}),(0,l.jsx)("div",{className:"space-y-2",children:f.conditions.map((s,e)=>(0,l.jsxs)("div",{className:"text-sm",children:[(0,l.jsx)("strong",{children:s.name}),s.description&&(0,l.jsx)("p",{className:"text-slate-600",children:s.description})]},e))})]}),f.surgeries&&f.surgeries.length>0&&(0,l.jsxs)("div",{className:"bg-red-50 rounded-lg p-4",children:[(0,l.jsx)("h4",{className:"font-semibold text-slate-800 mb-3",children:"Hist\xf3rico Cir\xfargico"}),(0,l.jsx)("div",{className:"space-y-2",children:f.surgeries.map((s,e)=>(0,l.jsxs)("div",{className:"text-sm",children:[(0,l.jsx)("strong",{children:s.name}),(0,l.jsx)("p",{className:"text-slate-600",children:new Date(s.date).toLocaleDateString("pt-BR")})]},e))})]})]})]})]})]})]})}),(0,l.jsx)(N.A,{isOpen:C,onClose:()=>D(!1),onSave:R})]})}},43061:(s,e,t)=>{t.d(e,{A:()=>a});var l=t(37876);t(14232);let a=s=>{let{content:e,className:t=""}=s;if(!e)return null;let a=s=>s.split(/(\*\*\*.*?\*\*\*|\*\*.*?\*\*|\*.*?\*|`.*?`|✅|📉|💪|🏆|⚠️)/g).filter(Boolean).map((s,e)=>"✅"===s||"\uD83D\uDCC9"===s||"\uD83D\uDCAA"===s||"\uD83C\uDFC6"===s||"⚠️"===s?(0,l.jsx)("span",{className:"mr-2",children:s},e):s.startsWith("***")&&s.endsWith("***")?(0,l.jsx)("strong",{children:(0,l.jsx)("em",{children:s.slice(3,-3)})},e):s.startsWith("**")&&s.endsWith("**")?(0,l.jsx)("strong",{children:s.slice(2,-2)},e):s.startsWith("*")&&s.endsWith("*")?(0,l.jsx)("em",{children:s.slice(1,-1)},e):s.startsWith("`")&&s.endsWith("`")?(0,l.jsx)("code",{className:"bg-slate-200 text-slate-800 px-1 py-0.5 rounded-sm font-mono text-xs",children:s.slice(1,-1)},e):s),i=e.split("\n"),n=[],r=[],d=null,c=()=>{if(r.length>0){let s="ol"===d?"ol":"ul";n.push((0,l.jsx)(s,{className:"pl-5 space-y-1 my-3 ".concat("ol"===d?"list-decimal":"list-disc"),children:r.map((s,e)=>(0,l.jsx)("li",{children:a(s)},e))},n.length)),r=[],d=null}};return i.forEach((s,e)=>{let t=s.trim();t.startsWith("## ")?(c(),n.push((0,l.jsx)("h2",{className:"text-xl font-bold text-slate-800 mt-4 mb-2 pb-2 border-b border-slate-200",children:a(t.substring(3))},e))):t.startsWith("### ")?(c(),n.push((0,l.jsx)("h3",{className:"text-lg font-semibold text-teal-600 my-3",children:a(t.substring(4))},e))):t.startsWith(">")?(c(),n.push((0,l.jsx)("blockquote",{className:"pl-4 italic border-l-4 border-slate-300 text-slate-600 my-2",children:a(t.substring(1))},e))):t.startsWith("---")?(c(),n.push((0,l.jsx)("hr",{className:"my-6 border-slate-200"},e))):t.startsWith("- ")?("ul"!==d&&c(),d="ul",r.push(t.substring(2).trim())):t.match(/^\d+\. /)?("ol"!==d&&c(),d="ol",r.push(t.replace(/^\d+\. /,"").trim())):t&&(c(),n.push((0,l.jsx)("p",{className:"my-1 leading-relaxed",children:a(t)},e)))}),c(),(0,l.jsx)("div",{className:"text-sm text-slate-800 font-sans max-w-none prose prose-sm prose-slate ".concat(t),children:n})}},66822:(s,e,t)=>{t.d(e,{dj:()=>n}),t(37876);var l=t(14232);let a=(0,l.createContext)(void 0),i=(0,l.createContext)(void 0),n=()=>{let s=(()=>{let s=(0,l.useContext)(a);return void 0===s?{enabled:!1,logRouterChange:()=>{},logHookCall:()=>{},logContextAccess:()=>{}}:s})(),e=(0,l.useContext)(i);if(s.logContextAccess("ToastContext","useToast"),!e){let s=Error("useToast must be used within a ToastProvider");throw console.error("❌ Toast Context Error:",s.message),s}return{showToast:e.showToast}}}}]);