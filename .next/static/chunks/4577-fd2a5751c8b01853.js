"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4577],{553:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var s=a(37876),i=a(14232),n=a(9552),r=a(44747),l=a(35880),o=a(6782);let d=[{id:"sports",name:"Fisioterapia Esportiva",imageUrl:"https://images.unsplash.com/photo-1541252260730-0412e8e2108e?q=80&w=870&auto=format&fit=crop"},{id:"orthopedics",name:"Ortopedia",imageUrl:"https://images.unsplash.com/photo-1579169825453-431521045a59?q=80&w=870&auto=format&fit=crop"},{id:"neurology",name:"Neurologia",imageUrl:"https://images.unsplash.com/photo-1581091019688-c70954720059?q=80&w=870&auto=format&fit=crop"},{id:"gerontology",name:"Gerontologia",imageUrl:"https://images.unsplash.com/photo-1605305139722-140a334e3a89?q=80&w=871&auto=format&fit=crop"}],c=e=>{let{onSelectSpecialty:t}=e,{specialties:a,isLoading:n}=(()=>{let[e,t]=(0,i.useState)([]),[a,s]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{let e=setTimeout(()=>{t(d),s(!1)},500);return()=>clearTimeout(e)},[]),{specialties:e,isLoading:a}})();return n?(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:Array.from({length:5}).map((e,t)=>(0,s.jsx)(o.E,{className:"h-48 w-full rounded-lg"},t))}):(0,s.jsxs)("div",{className:"p-4 bg-white rounded-2xl shadow-sm",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Selecione uma especialidade"}),(0,s.jsx)("p",{className:"text-gray-500 mb-6",children:"Cada especialidade possui um formul\xe1rio de avalia\xe7\xe3o espec\xedfico."}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:null==a?void 0:a.map(e=>(0,s.jsxs)("div",{onClick:()=>t(e),className:"group relative rounded-lg overflow-hidden cursor-pointer shadow-lg transform hover:scale-105 transition-transform duration-300 h-48",role:"button",tabIndex:0,"aria-label":"Iniciar avalia\xe7\xe3o de ".concat(e.name),onKeyDown:a=>("Enter"===a.key||" "===a.key)&&t(e),children:[(0,s.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-full h-full object-cover"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end p-4",children:(0,s.jsx)("h3",{className:"text-white font-bold text-lg",children:e.name})})]},e.id))})]})};var m=a(88992),h=a(13810),u=a(22442),p=a(93536),g=a(23118),f=a(6394),x=a(66822);let v=u.Ik({patientId:u.Yj(),height:u.Yj().optional(),weight:u.Yj().optional(),sport:u.Yj().min(2,"Modalidade \xe9 obrigat\xf3ria."),position:u.Yj().optional(),trainingFrequency:u.Yj().optional(),injuryHistory:u.Ik({startDate:u.Yj().optional(),triggerEvent:u.Yj().optional(),painLevel:u.ai().min(0).max(10).default(0),aggravatingFactors:u.Yj().optional()}),functionalTests:u.YO(u.Ik({testName:u.Yj().min(1,"Nome do teste \xe9 obrigat\xf3rio"),result:u.Yj().min(1,"Resultado \xe9 obrigat\xf3rio")})).optional()}),y="block w-full px-3 py-2 bg-white border border-slate-300 rounded-lg shadow-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 sm:text-sm",w="p-4 border border-slate-200 rounded-xl bg-white",b="px-2 font-semibold text-md text-teal-700",j=e=>{let{patientId:t,onBack:a}=e,{register:i,control:n,handleSubmit:r,formState:{isSubmitting:l}}=(0,m.mN)({resolver:(0,h.u)(v),defaultValues:{patientId:t,functionalTests:[],injuryHistory:{painLevel:0}}}),{fields:o,append:d,remove:c}=(0,m.jz)({control:n,name:"functionalTests"}),{showToast:u}=(0,x.dj)();return(0,s.jsxs)("form",{onSubmit:r(e=>new Promise(t=>{setTimeout(()=>{console.log("Dados da Avalia\xe7\xe3o Esportiva Salvos:",e),u("Avalia\xe7\xe3o esportiva salva com sucesso!","success"),a(),t(e)},1e3)})),className:"space-y-6 animate-fade-in-fast",children:[(0,s.jsx)("div",{className:"p-6 bg-white rounded-2xl shadow-sm",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("fieldset",{className:w,children:[(0,s.jsx)("legend",{className:b,children:"Identifica\xe7\xe3o do Atleta"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-2",children:[(0,s.jsx)("input",{type:"text",placeholder:"Modalidade Esportiva*",...i("sport"),className:y}),(0,s.jsx)("input",{type:"text",placeholder:"Posi\xe7\xe3o/Fun\xe7\xe3o",...i("position"),className:y}),(0,s.jsx)("input",{type:"text",placeholder:"Frequ\xeancia de treinos/sem",...i("trainingFrequency"),className:y}),(0,s.jsx)("input",{type:"text",placeholder:"Altura (m)",...i("height"),className:y}),(0,s.jsx)("input",{type:"text",placeholder:"Peso (kg)",...i("weight"),className:y})]})]}),(0,s.jsxs)("fieldset",{className:w,children:[(0,s.jsx)("legend",{className:b,children:"Hist\xf3rico da Les\xe3o (se aplic\xe1vel)"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:[(0,s.jsx)("textarea",{placeholder:"Quando iniciou e como?",...i("injuryHistory.startDate"),className:"".concat(y," md:col-span-2"),rows:2}),(0,s.jsx)("textarea",{placeholder:"Houve algum evento espec\xedfico associado?",...i("injuryHistory.triggerEvent"),className:"".concat(y," md:col-span-2"),rows:2}),(0,s.jsx)("textarea",{placeholder:"Movimentos/Fatores que agravam a dor",...i("injuryHistory.aggravatingFactors"),className:"".concat(y," md:col-span-2"),rows:2}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Intensidade da dor (0 a 10)"}),(0,s.jsx)("input",{type:"range",min:"0",max:"10",defaultValue:"0",...i("injuryHistory.painLevel",{valueAsNumber:!0}),className:"w-full mt-1"})]})]})]}),(0,s.jsxs)("fieldset",{className:w,children:[(0,s.jsx)("legend",{className:b,children:"Testes Funcionais"}),(0,s.jsxs)("div",{className:"space-y-4 mt-2",children:[o.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 animate-fade-in-fast",children:[(0,s.jsx)("input",{...i("functionalTests.".concat(t,".testName")),placeholder:"Nome do Teste",className:"".concat(y," flex-1")}),(0,s.jsx)("input",{...i("functionalTests.".concat(t,".result")),placeholder:"Resultado/Observa\xe7\xe3o",className:"".concat(y," flex-1")}),(0,s.jsx)("button",{type:"button",onClick:()=>c(t),className:"p-2 text-red-500 hover:bg-red-50 rounded-full",children:(0,s.jsx)(p.A,{className:"w-5 h-5"})})]},e.id)),(0,s.jsxs)("button",{type:"button",onClick:()=>d({testName:"",result:""}),className:"flex items-center text-sm font-semibold text-teal-600 hover:text-teal-700",children:[(0,s.jsx)(g.A,{className:"mr-2 w-5 h-5"})," Adicionar Teste Funcional"]})]})]})]})}),(0,s.jsx)("div",{className:"flex justify-end p-4 bg-white rounded-2xl shadow-sm",children:(0,s.jsxs)("button",{type:"submit",disabled:l,className:"w-full sm:w-auto inline-flex items-center justify-center bg-teal-500 text-white font-bold py-3 px-8 rounded-lg hover:bg-teal-600 transition-colors disabled:bg-teal-300",children:[(0,s.jsx)(f.A,{className:"w-5 h-5 mr-2"}),l?"Salvando...":"Salvar Avalia\xe7\xe3o"]})}),(0,s.jsx)("style",{children:"\n            @keyframes fade-in-fast {\n                from { opacity: 0; }\n                to { opacity: 1; }\n            }\n            .animate-fade-in-fast { animation: fade-in-fast 0.5s ease-out forwards; }\n        "})]})},N=()=>{var e;let{patients:t,isLoading:a}=(0,r.w)(),[d,m]=(0,i.useState)(""),[h,u]=(0,i.useState)(null),p=()=>{u(null)},g=h?"Avalia\xe7\xe3o: ".concat(h.name):"Avalia\xe7\xf5es por Especialidade",f=h?"Paciente: ".concat(null==(e=t.find(e=>e.id===d))?void 0:e.name):"Inicie uma avalia\xe7\xe3o escolhendo um paciente e uma especialidade.";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.A,{title:g,subtitle:f,children:h&&(0,s.jsxs)("button",{onClick:p,className:"inline-flex items-center rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 mr-3",children:[(0,s.jsx)(n.A,{className:"-ml-1 mr-2 h-5 w-5"}),"Voltar para Galeria"]})}),!h&&(0,s.jsxs)("div",{className:"mb-6 bg-white p-4 rounded-2xl shadow-sm",children:[(0,s.jsx)("label",{htmlFor:"patient-select",className:"block text-sm font-medium text-slate-700 mb-1",children:"Paciente"}),(0,s.jsxs)("select",{id:"patient-select",value:d,onChange:e=>m(e.target.value),className:"w-full max-w-sm p-2 border border-slate-300 rounded-lg bg-white",disabled:a,children:[(0,s.jsx)("option",{value:"",children:"Selecione um paciente..."}),t.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(()=>{if(a)return(0,s.jsx)(o.E,{className:"h-20 w-full"});if(!d)return(0,s.jsxs)("div",{className:"text-center p-10 bg-white rounded-2xl shadow-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-700",children:"Primeiro Passo"}),(0,s.jsx)("p",{className:"text-slate-500 mt-1",children:"Por favor, selecione um paciente para iniciar uma nova avalia\xe7\xe3o."})]});if(h)if("sports"===h.id)return(0,s.jsx)(j,{patientId:d,onBack:p});else return(0,s.jsxs)("div",{className:"text-center p-10 bg-white rounded-2xl shadow-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-700",children:"Em Desenvolvimento"}),(0,s.jsxs)("p",{className:"text-slate-500 mt-1",children:['O formul\xe1rio de avalia\xe7\xe3o para "',h.name,'" ainda n\xe3o est\xe1 dispon\xedvel.']})]});return(0,s.jsx)(c,{onSelectSpecialty:e=>u(e)})})()]})}},748:(e,t,a)=>{a.d(t,{db:()=>d});var s=a(66766);let i=[...s.N],n=[...s.ZS],r=[...s.Tf],l=[...s.BT],o=[...s.eB],d={getPatients:()=>[...i],getPatientById:e=>i.find(t=>t.id===e),addPatient:e=>{i.unshift(e)},updatePatient:e=>{i=i.map(t=>t.id===e.id?e:t)},getAppointments:()=>[...n],saveAppointment:e=>{let t=n.findIndex(t=>t.id===e.id);t>-1?n[t]=e:n.push(e)},deleteAppointment:e=>{n=n.filter(t=>t.id!==e)},deleteAppointmentSeries:(e,t)=>{n=n.filter(a=>!(a.seriesId===e&&a.startTime>=t))},getSoapNotes:()=>[...r],saveSoapNote:e=>{let t=r.findIndex(t=>t.id===e.id);t>-1?r[t]=e:r.unshift(e)},getTreatmentPlans:()=>[...l],updateTreatmentPlan:e=>{let t=l.findIndex(t=>t.id===e.id);t>-1&&(l[t]=e)},getExercisePrescriptions:()=>[...o],setExercisePrescriptionsForPlan:(e,t)=>{(o=o.filter(t=>t.treatmentPlanId!==e)).push(...t)}}},6394:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(17963).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},6782:(e,t,a)=>{a.d(t,{E:()=>n});var s=a(37876),i=a(93704);function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("animate-pulse rounded-md bg-muted",t),...a})}},12168:(e,t,a)=>{a.d(t,{L5:()=>c,OS:()=>d,Ob:()=>g,TC:()=>f,Xl:()=>p,Z6:()=>u,bW:()=>o,dc:()=>h,mQ:()=>m,uE:()=>l});var s=a(14776),i=a(748),n=a(87107);let r=e=>new Promise(t=>setTimeout(t,e)),l=async()=>(await r(500),[...i.db.getPatients()].sort((e,t)=>new Date(t.lastVisit).getTime()-new Date(e.lastVisit).getTime())),o=async e=>{if(await r(300),e.length<2)return[];let t=e.toLowerCase();return i.db.getPatients().filter(e=>e.name.toLowerCase().includes(t)||e.cpf.includes(t)).map(e=>({id:e.id,name:e.name,email:e.email,phone:e.phone,status:e.status,lastVisit:e.lastVisit,avatarUrl:e.avatarUrl,cpf:e.cpf})).slice(0,10)},d=async e=>{await r(500);let t={id:"patient_".concat(Date.now()),name:e.trim(),cpf:"TEMP-".concat(Date.now()),birthDate:"",phone:"",email:"",emergencyContact:{name:"",phone:""},address:{street:"",city:"",state:"",zip:""},status:s.WW.Active,lastVisit:new Date().toISOString(),registrationDate:new Date().toISOString(),avatarUrl:"https://picsum.photos/seed/".concat(Date.now(),"/200/200"),consentGiven:!0,whatsappConsent:"opt-out"};return i.db.addPatient(t),n.g.emit("patients:changed"),t},c=async e=>{let{limit:t=15,cursor:a,searchTerm:s,statusFilter:n,startDate:l,endDate:o,therapistId:d}=e;await r(500);let c=i.db.getPatients();if(s){let e=s.toLowerCase();c=c.filter(t=>t.name.toLowerCase().includes(e)||t.cpf.includes(e))}if(n&&"All"!==n){let e={Active:"Active",Inactive:"Inactive",Discharged:"Discharged",Ativo:"Active",Inativo:"Inactive",Alta:"Discharged"}[n]||n;c=c.filter(t=>t.status===e)}if(l){let e=new Date(l);e.setHours(0,0,0,0),c=c.filter(t=>new Date(t.registrationDate)>=e)}if(o){let e=new Date(o);e.setHours(23,59,59,999),c=c.filter(t=>new Date(t.registrationDate)<=e)}if(d&&"All"!==d){let e=new Set(i.db.getAppointments().filter(e=>e.therapistId===d).map(e=>e.patientId));c=c.filter(t=>e.has(t.id))}c.sort((e,t)=>{let a=new Date(e.registrationDate).getTime(),s=new Date(t.registrationDate).getTime();return s!==a?s-a:e.id.localeCompare(t.id)});let m=a?c.findIndex(e=>e.id===a)+1:0;if(a&&0===m)return{patients:[],nextCursor:null};let h=c.slice(m,m+t),u=h.length===t&&h.length>0?h[h.length-1].id:null;return{patients:h.map(e=>({id:e.id,name:e.name,email:e.email,phone:e.phone,status:e.status,lastVisit:e.lastVisit,avatarUrl:e.avatarUrl,medicalAlerts:e.medicalAlerts})),nextCursor:u}},m=async e=>(await r(300),i.db.getPatientById(e)),h=async e=>{await r(400);let t={id:"patient_".concat(Date.now()),...e,lastVisit:new Date().toISOString()};return i.db.addPatient(t),n.g.emit("patients:changed"),t},u=async e=>(await r(400),i.db.updatePatient(e),n.g.emit("patients:changed"),e),p=async(e,t)=>{await r(600);let a=i.db.getPatientById(e);if(!a)throw Error("Paciente n\xe3o encontrado.");let s={name:t.name,url:"#",type:t.type,size:t.size},l={...a,attachments:[...a.attachments||[],s]};return i.db.updatePatient(l),n.g.emit("patients:changed"),s},g=async(e,t)=>{await r(200);let a=i.db.getPatientById(e);if(!a)throw Error("Paciente n\xe3o encontrado.");let s={id:"log_".concat(Date.now()),...t},l={...a,communicationLogs:[s,...a.communicationLogs||[]]};return i.db.updatePatient(l),n.g.emit("patients:changed"),l},f=async(e,t)=>{await r(200);let a=i.db.getPatientById(e);if(!a)throw Error("Paciente n\xe3o encontrado.");let s={...a,painPoints:t};return i.db.updatePatient(s),n.g.emit("patients:changed"),s}},18650:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(17963).A)("flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]])},23118:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(17963).A)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},35880:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(37876);a(14232);let i=e=>{let{title:t,subtitle:a,children:i}=e;return(0,s.jsxs)("div",{className:"pb-8 md:flex md:items-center md:justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold leading-tight text-slate-900 tracking-tight",children:t}),(0,s.jsx)("p",{className:"mt-2 text-lg text-slate-600",children:a})]}),(0,s.jsx)("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:i})]})}},40336:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(17963).A)("calendar-check",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]])},44747:(e,t,a)=>{a.d(t,{w:()=>l});var s=a(14232),i=a(12168),n=a(66822),r=a(87107);let l=()=>{let[e,t]=(0,s.useState)([]),[a,l]=(0,s.useState)(!0),[o,d]=(0,s.useState)(!1),[c,m]=(0,s.useState)(null),[h,u]=(0,s.useState)(!0),[p,g]=(0,s.useState)(null),[f,x]=(0,s.useState)({searchTerm:"",statusFilter:"All",startDate:"",endDate:"",therapistId:"All"}),{showToast:v}=(0,n.dj)(),y=(0,s.useCallback)(async(e,a)=>{a?d(!0):l(!0),g(null);try{let s=await i.L5({...e.searchTerm&&{searchTerm:e.searchTerm},...e.statusFilter&&{statusFilter:e.statusFilter},...e.startDate&&{startDate:e.startDate},...e.endDate&&{endDate:e.endDate},...e.therapistId&&{therapistId:e.therapistId},...null!=a&&{cursor:a},limit:15});t(e=>a?[...e,...s.patients]:s.patients),m(s.nextCursor),u(!!s.nextCursor)}catch(e){g(e),v("Falha ao carregar pacientes.","error")}finally{l(!1),d(!1)}},[v]),w=(0,s.useCallback)(e=>{x(e),y(e,null)},[y]),b=(0,s.useCallback)(()=>{!o&&h&&y(f,c)},[o,h,c,y,f]),j=async e=>{try{await i.dc(e),v("Paciente adicionado com sucesso!","success")}catch(e){v("Falha ao adicionar paciente.","error")}};return(0,s.useEffect)(()=>{let e=()=>{w(f)};return r.g.on("patients:changed",e),()=>{r.g.off("patients:changed",e)}},[f,w]),{patients:e,isLoading:a,isLoadingMore:o,hasMore:h,error:p,fetchInitialPatients:w,fetchMorePatients:b,addPatient:j}}},50169:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(17963).A)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]])},54410:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(17963).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},66822:(e,t,a)=>{a.d(t,{dj:()=>r}),a(37876);var s=a(14232);let i=(0,s.createContext)(void 0),n=(0,s.createContext)(void 0),r=()=>{let e=(()=>{let e=(0,s.useContext)(i);return void 0===e?{enabled:!1,logRouterChange:()=>{},logHookCall:()=>{},logContextAccess:()=>{}}:e})(),t=(0,s.useContext)(n);if(e.logContextAccess("ToastContext","useToast"),!t){let e=Error("useToast must be used within a ToastProvider");throw console.error("❌ Toast Context Error:",e.message),e}return{showToast:t.showToast}}},87107:(e,t,a)=>{a.d(t,{g:()=>l});var s=a(14776),i=a(66766);let n=e=>new Promise(t=>setTimeout(t,e));class r{on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}off(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(e=>e!==t))}emit(e){for(var t=arguments.length,a=Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];this.events[e]&&this.events[e].forEach(e=>e(...a))}async getEvents(){return await n(300),[...this.eventsData].sort((e,t)=>t.startDate.getTime()-e.startDate.getTime())}async getEventById(e){await n(200);let t=this.eventsData.find(t=>t.id===e);return t?JSON.parse(JSON.stringify(t)):void 0}async getRegistrationsByEventId(e){return await n(200),this.registrationsData.filter(t=>t.eventId===e)}async saveEvent(e,t){if(await n(400),e.id){let t=this.eventsData.findIndex(t=>t.id===e.id);if(t>-1){let a=this.eventsData[t];if(!a)throw Error("Event not found");let s={...a,...e,id:a.id,registrations:a.registrations,providers:a.providers};return this.eventsData[t]=s,this.emit("events:changed"),s}throw Error("Event not found")}{let a={...e,id:"event_".concat(Date.now()),registrations:[],providers:[],organizerId:t};return this.eventsData.unshift(a),this.emit("events:changed"),a}}async checkInParticipant(e,t,a){await n(500);let i=this.registrationsData.findIndex(t=>t.id===e);if(-1===i)throw Error("Inscri\xe7\xe3o n\xe3o encontrada.");let r=this.registrationsData[i];if(!r)throw Error("Inscri\xe7\xe3o n\xe3o encontrada.");if(r.status===s.m7.Attended)throw Error("Participante j\xe1 fez check-in.");let l={...r,status:s.m7.Attended,checkedInAt:new Date,checkedInBy:a};this.registrationsData[i]=l;let o=this.eventsData.findIndex(e=>e.id===r.eventId);if(o>-1){let t=this.eventsData[o];if(t){let a=t.registrations.findIndex(t=>t.id===e);a>-1?t.registrations[a]=l:t.registrations.push(l)}}return this.emit("events:changed"),l}async confirmProvider(e){for(let t of(await n(500),this.eventsData)){let a=t.providers.findIndex(t=>t.id===e);if(a>-1){let e=t.providers[a];if(e){if(e.status!==s.aJ.Applied)throw Error("Apenas inscri\xe7\xf5es com status 'Inscrito' podem ser confirmadas.");return e.status=s.aJ.Confirmed,this.emit("events:changed"),e}}}throw Error("Prestador de servi\xe7o n\xe3o encontrado.")}async payProvider(e){for(let t of(await n(500),this.eventsData)){let a=t.providers.findIndex(t=>t.id===e);if(a>-1){let e=t.providers[a];if(e){if(e.status!==s.aJ.Confirmed)throw Error("Apenas prestadores confirmados podem receber pagamento.");return e.status=s.aJ.Paid,this.emit("events:changed"),e}}}throw Error("Prestador de servi\xe7o n\xe3o encontrado.")}constructor(){this.events={},this.eventsData=[...i._X],this.registrationsData=[...i.ZM]}}let l=new r},93704:(e,t,a)=>{a.d(t,{cn:()=>n});var s=a(69241),i=a(29573);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.QP)((0,s.$)(t))}},97286:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(17963).A)("medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]])}}]);