"use strict";(()=>{var a={};a.id=2049,a.ids=[2049,3220],a.modules={254:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>p});var e=c(8732),f=c(82015),g=c(51302),h=c(42227),i=c(67111),j=c(2150),k=c(57267),l=c(19119),m=c(99597),n=c(28471),o=a([l]);l=(o.then?(await o)():o)[0];let p=()=>{let[a,b]=(0,f.useState)([]),[c,d]=(0,f.useState)(!0),[o,p]=(0,f.useState)(null),[q,r]=(0,f.useState)(""),[s,t]=(0,f.useState)(!1),[u,v]=(0,f.useState)(void 0),{therapists:w,isLoading:x}=(0,n.Ez)(),{showToast:y}=(0,m.dj)(),{user:z}=(0,n.As)(),A=async()=>{d(!0);try{let a=await i.f();b(a)}catch(a){p("Falha ao carregar os dados dos grupos."),y("Falha ao carregar os dados dos grupos.","error")}finally{d(!1)}};(0,f.useEffect)(()=>{A()},[]);let B=(0,f.useMemo)(()=>a.filter(a=>a.name.toLowerCase().includes(q.toLowerCase())),[q,a]),C=a=>{v(a),t(!0)},D=()=>{v(void 0),t(!1)},E=async a=>{try{let b;if(u){let{capacity:c,status:d,...e}=u;b={...e,name:a}}else b={name:a,description:"Adicione uma descri\xe7\xe3o.",therapistId:z?.id||w[0]?.id||"",members:[],schedule:{days:["Segunda","Quarta"],time:"10:00",duration:50},exercises:[]};await i.Bz(b),y(u?"Grupo atualizado com sucesso!":"Grupo criado com sucesso!","success"),A(),D()}catch{y("Falha ao salvar o grupo.","error")}};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(h.A,{title:"Gest\xe3o de Grupos",subtitle:"Crie e gerencie grupos de tratamento para engajar seus pacientes.",children:[(0,e.jsxs)("div",{className:"relative w-full max-w-xs mr-4",children:[(0,e.jsx)(g.vji,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,e.jsx)("input",{type:"text",placeholder:"Buscar por nome do grupo...",value:q,onChange:a=>r(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500"})]}),(0,e.jsxs)("button",{onClick:()=>C(),className:"inline-flex items-center justify-center rounded-lg border border-transparent bg-teal-500 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-teal-600 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2",children:[(0,e.jsx)(g.FWt,{className:"-ml-1 mr-2 h-5 w-5"}),"Novo Grupo"]})]}),(0,e.jsx)(k.A,{isOpen:s,onClose:D,onSave:E,mode:u?"edit":"create",initialName:u?.name}),(0,e.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:c||x?Array.from({length:4}).map((a,b)=>(0,e.jsx)(l.E,{className:"h-60 w-full rounded-2xl"},b)):o?(0,e.jsx)("div",{className:"col-span-full text-center p-10 text-red-500",children:o}):0===B.length?(0,e.jsx)("div",{className:"col-span-full text-center p-10 text-slate-500",children:"Nenhum grupo encontrado."}):B.map(a=>(0,e.jsx)(j.A,{group:a,therapist:w.find(b=>b.id===a.therapistId),onEdit:()=>C(a)},a.id))})]})};d()}catch(a){d(a)}})},2150:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(8732);c(82015);var e=c(51302);let f=({group:a,therapist:b,onEdit:c})=>(0,d.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-lg transition-shadow duration-300 flex flex-col group",children:[(0,d.jsxs)("div",{className:"p-5 flex-grow",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start",children:[(0,d.jsx)("h3",{className:"text-lg font-bold text-slate-800 pr-2",children:a.name}),(0,d.jsx)("button",{onClick:c,className:"p-2 rounded-full text-slate-500 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-slate-100 hover:text-teal-600",children:(0,d.jsx)(e.ffu,{className:"w-4 h-4"})})]}),(0,d.jsx)("p",{className:`text-sm font-semibold text-${b?.color}-600`,children:b?.name}),(0,d.jsx)("p",{className:"text-sm text-slate-500 mt-2 h-10 overflow-hidden",children:a.description}),(0,d.jsxs)("div",{className:"mt-4 space-y-2 text-sm",children:[(0,d.jsxs)("div",{className:"flex items-center text-slate-600",children:[(0,d.jsx)(e.zWC,{className:"w-4 h-4 mr-2 text-slate-400"}),(0,d.jsxs)("span",{children:[a.capacity.current," / ",a.capacity.max," Participantes"]})]}),(0,d.jsxs)("div",{className:"flex items-center text-slate-600",children:[(0,d.jsx)(e.zD7,{className:"w-4 h-4 mr-2 text-slate-400"}),(0,d.jsxs)("span",{children:[a.schedule.days.join(", ")," \xe0s ",a.schedule.time]})]}),(0,d.jsxs)("div",{className:"flex items-center text-slate-600",children:[(0,d.jsx)(e.Ilq,{className:"w-4 h-4 mr-2 text-slate-400"}),(0,d.jsxs)("span",{children:[a.exercises.length," Exerc\xedcios"]})]})]})]}),(0,d.jsx)("div",{className:"p-4 bg-slate-50 rounded-b-2xl border-t border-slate-200",children:(0,d.jsxs)("div",{className:"flex -space-x-2 overflow-hidden",children:[a.members.slice(0,5).map(a=>(0,d.jsx)("img",{className:"inline-block h-8 w-8 rounded-full ring-2 ring-white",src:a.avatarUrl,alt:a.patientName,title:a.patientName},a.patientId)),a.members.length>5&&(0,d.jsxs)("div",{className:"h-8 w-8 rounded-full bg-slate-200 flex items-center justify-center text-xs font-medium text-slate-600 ring-2 ring-white",children:["+",a.members.length-5]})]})})]})},8732:a=>{a.exports=require("react/jsx-runtime")},19119:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{E:()=>h});var e=c(8732),f=c(71253),g=a([f]);function h({className:a,...b}){return(0,e.jsx)("div",{className:(0,f.cn)("animate-pulse rounded-md bg-muted",a),...b})}f=(g.then?(await g)():g)[0],d()}catch(a){d(a)}})},33873:a=>{a.exports=require("path")},34125:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{config:()=>s,default:()=>o,getServerSideProps:()=>r,getStaticPaths:()=>q,getStaticProps:()=>p,handler:()=>A,reportWebVitals:()=>t,routeModule:()=>z,unstable_getServerProps:()=>x,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>w,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>u});var e=c(63885),f=c(80237),g=c(81413),h=c(3317),i=c.n(h),j=c(76195),k=c.n(j),l=c(254),m=c(12289),n=a([l]);l=(n.then?(await n)():n)[0];let o=(0,g.M)(l,"default"),p=(0,g.M)(l,"getStaticProps"),q=(0,g.M)(l,"getStaticPaths"),r=(0,g.M)(l,"getServerSideProps"),s=(0,g.M)(l,"config"),t=(0,g.M)(l,"reportWebVitals"),u=(0,g.M)(l,"unstable_getStaticProps"),v=(0,g.M)(l,"unstable_getStaticPaths"),w=(0,g.M)(l,"unstable_getStaticParams"),x=(0,g.M)(l,"unstable_getServerProps"),y=(0,g.M)(l,"unstable_getServerSideProps"),z=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/GroupsPage",pathname:"/GroupsPage",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:k(),Document:i()},userland:l}),A=(0,m.U)({srcPage:"/GroupsPage",config:s,userland:l,routeModule:z,getStaticPaths:q,getStaticProps:p,getServerSideProps:r});d()}catch(a){d(a)}})},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},42227:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(8732);c(82015);let e=({title:a,subtitle:b,children:c})=>(0,d.jsxs)("div",{className:"pb-8 md:flex md:items-center md:justify-between",children:[(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold leading-tight text-slate-900 tracking-tight",children:a}),(0,d.jsx)("p",{className:"mt-2 text-lg text-slate-600",children:b})]}),(0,d.jsx)("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:c})]})},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},50802:a=>{a.exports=import("clsx")},54822:a=>{a.exports=require("react-router-dom")},56472:a=>{a.exports=require("@opentelemetry/api")},57267:(a,b,c)=>{c.d(b,{A:()=>g});var d=c(8732),e=c(82015),f=c(51302);let g=({isOpen:a,onClose:b,onSave:c,mode:g,initialName:h=""})=>{let[i,j]=(0,e.useState)("");return((0,e.useEffect)(()=>{"copy"===g?j(`${h} (C\xf3pia)`):j(h)},[h,g,a]),a)?(0,d.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:b,children:(0,d.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:a=>a.stopPropagation(),children:[(0,d.jsxs)("header",{className:"flex items-center justify-between p-5 border-b border-slate-200",children:[(0,d.jsx)("h2",{className:"text-lg font-bold text-slate-800",children:{create:"Criar Novo Grupo de Exerc\xedcios",edit:"Renomear Grupo",copy:"Copiar Grupo"}[g]}),(0,d.jsx)("button",{onClick:b,className:"p-2 rounded-full hover:bg-slate-100",children:(0,d.jsx)(f.X,{className:"w-5 h-5 text-slate-600"})})]}),(0,d.jsxs)("form",{onSubmit:a=>{a.preventDefault(),i.trim()&&c(i.trim())},children:[(0,d.jsxs)("main",{className:"p-6",children:[(0,d.jsx)("label",{htmlFor:"group-name",className:"text-sm font-medium text-slate-700",children:"Nome do Grupo"}),(0,d.jsx)("input",{id:"group-name",type:"text",value:i,onChange:a=>j(a.target.value),className:"mt-1 w-full p-2 border border-slate-300 rounded-lg",required:!0,autoFocus:!0}),"copy"===g&&(0,d.jsxs)("p",{className:"text-xs text-slate-500 mt-2",children:['Uma c\xf3pia de todos os exerc\xedcios do grupo "',h,'" ser\xe1 criada neste novo grupo.']})]}),(0,d.jsxs)("footer",{className:"flex justify-end items-center p-4 border-t border-slate-200 bg-slate-50 rounded-b-2xl",children:[(0,d.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 mr-2",children:"Cancelar"}),(0,d.jsxs)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-teal-500 rounded-lg hover:bg-teal-600 flex items-center",children:[(0,d.jsx)(f.eMP,{className:"w-4 h-4 mr-2"}),"Salvar"]})]})]})]})}):null}},67111:(a,b,c)=>{c.d(b,{Bz:()=>g,f:()=>f});let d=[...c(4183).$U],e=a=>new Promise(b=>setTimeout(b,a)),f=async()=>(await e(500),[...d].sort((a,b)=>a.name.localeCompare(b.name))),g=async a=>{if(await e(400),a.id){let b=d.find(b=>b.id===a.id),c={...b,...a,capacity:{...b.capacity,current:a.members.length}};return d=d.map(b=>b.id===a.id?c:b),c}{let b={id:`group_${Date.now()}`,...a,capacity:{max:8,current:a.members.length},status:"active"};return d.unshift(b),b}}},71253:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{cn:()=>h});var e=c(50802),f=c(75979),g=a([e,f]);function h(...a){return(0,f.twMerge)((0,e.clsx)(a))}[e,f]=g.then?(await g)():g,d()}catch(a){d(a)}})},75979:a=>{a.exports=import("tailwind-merge")},82015:a=>{a.exports=require("react")},93939:a=>{a.exports=require("@supabase/supabase-js")},99597:(a,b,c)=>{c.d(b,{dj:()=>g}),c(8732);var d=c(82015);c(54822);let e=(0,d.createContext)(void 0),f=(0,d.createContext)(void 0),g=()=>{let a=(()=>{let a=(0,d.useContext)(e);return void 0===a?{enabled:!1,logRouterChange:()=>{},logHookCall:()=>{},logContextAccess:()=>{}}:a})(),b=(0,d.useContext)(f);if(a.logContextAccess("ToastContext","useToast"),!b){let a=Error("useToast must be used within a ToastProvider");throw console.error("❌ Toast Context Error:",a.message),a}return{showToast:b.showToast}}}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[3317,9871,1302,4183,7367,8471],()=>b(b.s=34125));module.exports=c})();