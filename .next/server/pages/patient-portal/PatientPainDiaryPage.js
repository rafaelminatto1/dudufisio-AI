"use strict";(()=>{var a={};a.id=1664,a.ids=[1664,3220,4859],a.modules={8307:a=>{a.exports=require("es-toolkit")},8732:a=>{a.exports=require("react/jsx-runtime")},12490:a=>{a.exports=require("es-toolkit/compat/isPlainObject")},13261:a=>{a.exports=require("victory-vendor/d3-shape")},16844:a=>{a.exports=require("es-toolkit/compat/minBy")},17150:a=>{a.exports=require("es-toolkit/compat/maxBy")},17889:a=>{a.exports=require("es-toolkit/compat/get")},19119:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{E:()=>h});var e=c(8732),f=c(71253),g=a([f]);function h({className:a,...b}){return(0,e.jsx)("div",{className:(0,f.cn)("animate-pulse rounded-md bg-muted",a),...b})}f=(g.then?(await g)():g)[0],d()}catch(a){d(a)}})},19643:a=>{a.exports=require("es-toolkit/compat/throttle")},20887:a=>{a.exports=require("es-toolkit/compat/last")},22326:a=>{a.exports=require("react-dom")},22544:a=>{a.exports=require("react-redux")},24584:a=>{a.exports=require("use-sync-external-store/shim/with-selector")},24807:(a,b,c)=>{c.d(b,{A:()=>g});var d=c(8732);c(82015);let e=a=>a<=3?"fill-green-500/80 stroke-green-700":a<=6?"fill-yellow-500/80 stroke-yellow-700":"fill-red-500/80 stroke-red-700",f=({id:a,d:b,selected:c,onClick:e})=>(0,d.jsx)("path",{id:a,d:b,onClick:()=>e(a),className:`cursor-pointer transition-all duration-200 ${c?"fill-red-500/80 stroke-red-700":"fill-slate-300/50 hover:fill-sky-400/50"}`,stroke:"#64748b",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),g=({selectedParts:a,onSelectPart:b,points:c=[],onMapClick:g,onPointClick:h})=>{let i={front:[{id:"Cabe\xe7a",d:"M 67,25 A 12,12 0 1 1 43,25 A 12,12 0 1 1 67,25 Z"},{id:"Pesco\xe7o",d:"M 55,37 Q 55,42 60,42 L 50,42 Q 45,42 45,37 Z"},{id:"Ombro Direito",d:"M 43,43 Q 35,45 32,55 L 45,43 Z"},{id:"Ombro Esquerdo",d:"M 67,43 Q 75,45 78,55 L 65,43 Z"},{id:"T\xf3rax",d:"M 45,43 L 65,43 L 63,65 L 47,65 Z"},{id:"Abd\xf4men",d:"M 47,65 L 63,65 L 60,80 L 50,80 Z"},{id:"Bra\xe7o Direito",d:"M 32,55 L 30,75 L 38,75 L 43,50 Z"},{id:"Bra\xe7o Esquerdo",d:"M 78,55 L 80,75 L 72,75 L 67,50 Z"},{id:"Pelve",d:"M 50,80 L 60,80 L 62,90 L 48,90 Z"},{id:"Perna Direita",d:"M 48,90 L 45,130 L 52,130 L 50,90 Z"},{id:"Perna Esquerda",d:"M 62,90 L 65,130 L 58,130 L 60,90 Z"},{id:"M\xe3o Direita",d:"M 30,75 L 28,85 L 38,82 Z"},{id:"M\xe3o Esquerda",d:"M 80,75 L 82,85 L 72,82 Z"},{id:"P\xe9 Direito",d:"M 45,130 L 42,135 L 52,135 Z"},{id:"P\xe9 Esquerdo",d:"M 65,130 L 68,135 L 58,135 Z"},{id:"Joelho Direito",d:"M 46,105 a 3,3 0 1,1 -6,0 3,3 0 1,1 6,0"},{id:"Joelho Esquerdo",d:"M 64,105 a 3,3 0 1,1 -6,0 3,3 0 1,1 6,0"}],back:[{id:"Costas (Superior)",d:"M 145,43 L 165,43 L 163,65 L 147,65 Z"},{id:"Costas (Lombar)",d:"M 147,65 L 163,65 L 160,80 L 150,80 Z"}]},j=(a,b)=>{if(!g)return;let c=a.currentTarget.getBoundingClientRect();g((a.clientX-c.left)/c.width*100,(a.clientY-c.top)/c.height*100,b)};return(0,d.jsxs)("div",{className:"w-full flex justify-center items-start gap-4",children:[(0,d.jsxs)("svg",{viewBox:"0 0 110 150",className:"w-1/2 max-w-[150px]",onClick:a=>j(a,"front"),children:[i.front.map(c=>(0,d.jsx)(f,{...c,selected:a.includes(c.id),onClick:b},c.id)),c.filter(a=>"front"===a.bodyPart).map(a=>(0,d.jsx)("circle",{cx:`${a.x}%`,cy:`${a.y}%`,r:"3",className:`cursor-pointer ${e(a.intensity)}`,strokeWidth:"1",onClick:b=>{b.stopPropagation(),h?.(a)}},a.id))]}),(0,d.jsxs)("svg",{viewBox:"100 0 110 150",className:"w-1/2 max-w-[150px]",onClick:a=>j(a,"back"),children:[i.front.map(a=>(0,d.jsx)("path",{d:a.d.replace(/M (\d+),/g,(a,b)=>`M ${210-parseInt(b)},`).replace(/A (\d+),(\d+) 0 1 1 (\d+),/g,(a,b,c,d)=>`A ${b},${c} 0 1 0 ${210-parseInt(d)},`),className:"fill-slate-200/50",stroke:"#cbd5e1",strokeWidth:"0.5"},a.id+"_back_outline")),i.back.map(c=>(0,d.jsx)(f,{...c,selected:a.includes(c.id),onClick:b},c.id)),c.filter(a=>"back"===a.bodyPart).map(a=>(0,d.jsx)("circle",{cx:`${210-a.x}%`,cy:`${a.y}%`,r:"3",className:`cursor-pointer ${e(a.intensity)}`,strokeWidth:"1",onClick:b=>{b.stopPropagation(),h?.(a)}},a.id))]})]})}},33873:a=>{a.exports=require("path")},34562:a=>{a.exports=require("react-is")},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},42227:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(8732);c(82015);let e=({title:a,subtitle:b,children:c})=>(0,d.jsxs)("div",{className:"pb-8 md:flex md:items-center md:justify-between",children:[(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold leading-tight text-slate-900 tracking-tight",children:a}),(0,d.jsx)("p",{className:"mt-2 text-lg text-slate-600",children:b})]}),(0,d.jsx)("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:c})]})},45034:a=>{a.exports=require("es-toolkit/compat/omit")},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},47740:a=>{a.exports=require("@reduxjs/toolkit")},50802:a=>{a.exports=import("clsx")},51343:a=>{a.exports=require("eventemitter3")},54822:a=>{a.exports=require("react-router-dom")},56472:a=>{a.exports=require("@opentelemetry/api")},57106:a=>{a.exports=require("immer")},62546:a=>{a.exports=require("victory-vendor/d3-scale")},70109:a=>{a.exports=require("reselect")},71253:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{cn:()=>h});var e=c(50802),f=c(75979),g=a([e,f]);function h(...a){return(0,f.twMerge)((0,e.clsx)(a))}[e,f]=g.then?(await g)():g,d()}catch(a){d(a)}})},74956:a=>{a.exports=require("clsx")},75091:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{config:()=>s,default:()=>o,getServerSideProps:()=>r,getStaticPaths:()=>q,getStaticProps:()=>p,handler:()=>A,reportWebVitals:()=>t,routeModule:()=>z,unstable_getServerProps:()=>x,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>w,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>u});var e=c(63885),f=c(80237),g=c(81413),h=c(3317),i=c.n(h),j=c(76195),k=c.n(j),l=c(84859),m=c(12289),n=a([l]);l=(n.then?(await n)():n)[0];let o=(0,g.M)(l,"default"),p=(0,g.M)(l,"getStaticProps"),q=(0,g.M)(l,"getStaticPaths"),r=(0,g.M)(l,"getServerSideProps"),s=(0,g.M)(l,"config"),t=(0,g.M)(l,"reportWebVitals"),u=(0,g.M)(l,"unstable_getStaticProps"),v=(0,g.M)(l,"unstable_getStaticPaths"),w=(0,g.M)(l,"unstable_getStaticParams"),x=(0,g.M)(l,"unstable_getServerProps"),y=(0,g.M)(l,"unstable_getServerSideProps"),z=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/patient-portal/PatientPainDiaryPage",pathname:"/patient-portal/PatientPainDiaryPage",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:k(),Document:i()},userland:l}),A=(0,m.U)({srcPage:"/patient-portal/PatientPainDiaryPage",config:s,userland:l,routeModule:z,getStaticPaths:q,getStaticProps:p,getServerSideProps:r});d()}catch(a){d(a)}})},75965:a=>{a.exports=require("decimal.js-light")},75979:a=>{a.exports=import("tailwind-merge")},79291:a=>{a.exports=require("es-toolkit/compat/sumBy")},82015:a=>{a.exports=require("react")},82449:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(8732);c(82015);var e=c(50284);let f=({painLogs:a})=>{let b=a.map(a=>({name:new Date(a.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),"N\xedvel de Dor":a.intensity,notes:a.description})).sort((a,b)=>new Date(a.name.split("/").reverse().join("-")).getTime()-new Date(b.name.split("/").reverse().join("-")).getTime());return(0,d.jsx)("div",{className:"h-64",children:(0,d.jsx)(e.uf,{width:"100%",height:"100%",children:(0,d.jsxs)(e.bl,{data:b,margin:{top:5,right:20,left:-10,bottom:5},children:[(0,d.jsx)(e.dC,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),(0,d.jsx)(e.WX,{dataKey:"name",stroke:"#64748b",fontSize:12}),(0,d.jsx)(e.h8,{domain:[0,10],stroke:"#64748b",fontSize:12}),(0,d.jsx)(e.m_,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"0.5rem"},labelStyle:{color:"#1e293b",fontWeight:"bold"}}),(0,d.jsx)(e.s$,{wrapperStyle:{fontSize:"12px"}}),(0,d.jsx)(e.N1,{type:"monotone",dataKey:"N\xedvel de Dor",stroke:"#ef4444",strokeWidth:2,activeDot:{r:8}})]})})})}},83428:a=>{a.exports=require("es-toolkit/compat/range")},84859:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>r});var e=c(8732),f=c(82015),g=c(42227),h=c(82449),i=c(99597),j=c(28471),k=c(26821),l=c(19119),m=c(24807),n=c(94296),o=c(40396),p=a([l]);l=(p.then?(await p)():p)[0];let q=({point:a,onEdit:b})=>(0,e.jsx)("div",{onClick:()=>b(a),className:"p-4 bg-white rounded-lg shadow-sm hover:bg-slate-50 cursor-pointer",children:(0,e.jsxs)("div",{className:"flex justify-between items-center",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"font-semibold text-slate-700 capitalize",children:a.type}),(0,e.jsx)("p",{className:"text-sm text-slate-600",children:a.description}),(0,e.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:new Date(a.date).toLocaleDateString("pt-BR",{weekday:"long",day:"2-digit",month:"long"})})]}),(0,e.jsxs)("span",{className:"font-bold text-teal-600 text-lg",children:["N\xedvel: ",a.intensity]})]})}),r=()=>{let[a,b]=(0,f.useState)(null),[c,d]=(0,f.useState)(!0),[p,r]=(0,f.useState)({isOpen:!1,pointToEdit:null}),{user:s}=(0,j.As)(),{showToast:t}=(0,i.dj)(),u=(0,f.useCallback)(async()=>{if(s?.patientId){d(!0);try{let a=await k.mQ(s.patientId);b(a||null)}catch(a){t("Falha ao carregar dados do paciente.","error")}finally{d(!1)}}},[s,t]);(0,f.useEffect)(()=>(u(),o.g.on("patients:changed",u),()=>{o.g.off("patients:changed",u)}),[u]);let v=a=>{r({isOpen:!0,pointToEdit:a})},w=async b=>{if(!a||!p.pointToEdit)return;let c=[...a.painPoints||[]];if(p.pointToEdit.id)c=c.map(a=>a.id===p.pointToEdit.id?{...a,...b}:a);else{let{x:a,y:d,bodyPart:e}=p.pointToEdit;if(void 0===a||void 0===d||void 0===e)return;let f={id:`pp_${Date.now()}`,date:new Date().toISOString(),x:a,y:d,bodyPart:e,...b};c.push(f)}await k.TC(a.id,c),r({isOpen:!1,pointToEdit:null}),t("Mapa de dor atualizado!","success")},x=async()=>{if(!a||!p.pointToEdit?.id)return;let b=(a.painPoints||[]).filter(a=>a.id!==p.pointToEdit.id);await k.TC(a.id,b),r({isOpen:!1,pointToEdit:null}),t("Ponto de dor removido.","success")};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(g.A,{title:"Di\xe1rio de Dor",subtitle:"Use o mapa corporal para registrar seus pontos de dor e acompanhar sua evolu\xe7\xe3o."}),p.isOpen&&p.pointToEdit&&(0,e.jsx)(n.A,{isOpen:p.isOpen,onClose:()=>r({isOpen:!1,pointToEdit:null}),onSave:w,onDelete:p.pointToEdit.id?x:void 0,point:p.pointToEdit}),(0,e.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,e.jsx)("div",{className:"lg:col-span-2 space-y-6",children:(0,e.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,e.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Mapa Corporal Interativo"}),(0,e.jsx)("p",{className:"text-sm text-slate-500 mb-4",children:"Clique em uma \xe1rea para adicionar um ponto de dor, ou em um ponto existente para editar."}),c||!a?(0,e.jsx)(l.E,{className:"h-96 w-full"}):(0,e.jsx)(m.A,{selectedParts:[],points:a.painPoints||[],onSelectPart:()=>{},onMapClick:(a,b,c)=>{r({isOpen:!0,pointToEdit:{x:a,y:b,bodyPart:c}})},onPointClick:v})]})}),(0,e.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,e.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,e.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Evolu\xe7\xe3o da Dor"}),c||!a?(0,e.jsx)(l.E,{className:"h-64 w-full"}):a.painPoints&&a.painPoints.length>0?(0,e.jsx)(h.A,{painLogs:a.painPoints}):(0,e.jsx)("p",{className:"text-center text-sm text-slate-500 py-8",children:"O gr\xe1fico aparecer\xe1 aqui quando voc\xea tiver registros."})]}),(0,e.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,e.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Seu Hist\xf3rico de Dor"}),(()=>{if(c)return(0,e.jsx)(l.E,{className:"h-48 w-full rounded-lg"});let b=[...a?.painPoints||[]].sort((a,b)=>new Date(b.date).getTime()-new Date(a.date).getTime());return 0===b.length?(0,e.jsx)("p",{className:"text-center text-slate-500 py-8",children:"Nenhum registro de dor encontrado. Adicione seu primeiro registro no mapa corporal."}):(0,e.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto pr-2",children:b.map(a=>(0,e.jsx)(q,{point:a,onEdit:v},a.id))})})()]})]})]})]})};d()}catch(a){d(a)}})},85923:a=>{a.exports=require("es-toolkit/compat/uniqBy")},90393:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(8732);c(82015);var e=c(51302);let f=({selectedScore:a,onSelectScore:b})=>{let c=a=>a>=0&&a<=3?{color:"text-green-600",bgColor:"bg-green-100",hoverBg:"hover:bg-green-200",icon:(0,d.jsx)(e.pnY,{className:"w-5 h-5"})}:a>=4&&a<=6?{color:"text-amber-600",bgColor:"bg-amber-100",hoverBg:"hover:bg-amber-200",icon:(0,d.jsx)(e.D3j,{className:"w-5 h-5"})}:a>=7&&a<=10?{color:"text-red-600",bgColor:"bg-red-100",hoverBg:"hover:bg-red-200",icon:(0,d.jsx)(e.Vdx,{className:"w-5 h-5"})}:{color:"text-slate-600",bgColor:"bg-slate-100",hoverBg:"hover:bg-slate-200",icon:null};return(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-semibold text-teal-700 mb-2 block",children:"Escala Visual de Dor (EVA)"}),(0,d.jsx)("div",{className:"flex items-center justify-between space-x-1 bg-slate-50 p-2 rounded-lg",children:Array.from({length:11},(a,b)=>b).map(e=>{let f=a===e,{color:g,bgColor:h,hoverBg:i}=c(e);return(0,d.jsx)("button",{type:"button",onClick:()=>b(e),className:`w-8 h-8 flex items-center justify-center rounded-full text-sm font-bold transition-all duration-200
                ${f?`${g} ${h} ring-2 ring-offset-1 ring-current`:`text-slate-600 ${i}`}
              `,title:`Dor n\xedvel ${e}`,children:e},e)})}),void 0!==a&&(0,d.jsxs)("div",{className:"mt-2 flex items-center justify-center p-2 rounded-md bg-slate-100",children:[(0,d.jsxs)("div",{className:`mr-2 ${c(a).color}`,children:[" ",c(a).icon]}),(0,d.jsxs)("p",{className:`text-sm font-semibold ${c(a).color}`,children:["N\xedvel de dor selecionado: ",a]})]})]})}},90742:a=>{a.exports=require("es-toolkit/compat/sortBy")},91651:a=>{a.exports=require("tiny-invariant")},93939:a=>{a.exports=require("@supabase/supabase-js")},94296:(a,b,c)=>{c.d(b,{A:()=>i});var d=c(8732),e=c(82015),f=c(51302),g=c(90393);let h=["aguda","cansa\xe7o","formigamento","latejante","queima\xe7\xe3o"],i=({isOpen:a,onClose:b,onSave:c,onDelete:i,point:j})=>{let[k,l]=(0,e.useState)(j.intensity||0),[m,n]=(0,e.useState)(j.type||"aguda"),[o,p]=(0,e.useState)(j.description||"");return((0,e.useEffect)(()=>{l(j.intensity||0),n(j.type||"aguda"),p(j.description||"")},[j,a]),a)?(0,d.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:b,children:(0,d.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:a=>a.stopPropagation(),children:[(0,d.jsxs)("header",{className:"flex items-center justify-between p-5 border-b border-slate-200",children:[(0,d.jsx)("h2",{className:"text-lg font-bold text-slate-800",children:j.id?"Editar Ponto de Dor":"Adicionar Ponto de Dor"}),(0,d.jsx)("button",{onClick:b,className:"p-2 rounded-full hover:bg-slate-100",children:(0,d.jsx)(f.X,{className:"w-5 h-5 text-slate-600"})})]}),(0,d.jsxs)("main",{className:"p-6 space-y-4",children:[(0,d.jsx)(g.A,{selectedScore:k,onSelectScore:l}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Tipo de Dor"}),(0,d.jsx)("select",{value:m,onChange:a=>n(a.target.value),className:"mt-1 w-full p-2 border border-slate-300 rounded-lg bg-white",children:h.map(a=>(0,d.jsx)("option",{value:a,className:"capitalize",children:a},a))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Descri\xe7\xe3o (opcional)"}),(0,d.jsx)("textarea",{value:o,onChange:a=>p(a.target.value),rows:3,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg",placeholder:"Ex: Dor pontual ao realizar rota\xe7\xe3o externa..."})]})]}),(0,d.jsxs)("footer",{className:"flex justify-between items-center p-4 border-t border-slate-200 bg-slate-50",children:[i&&(0,d.jsxs)("button",{onClick:i,className:"px-4 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg flex items-center",children:[(0,d.jsx)(f.TBR,{className:"w-4 h-4 mr-2"})," Excluir"]}),(0,d.jsxs)("div",{className:"ml-auto flex items-center",children:[(0,d.jsx)("button",{onClick:b,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 mr-2",children:"Cancelar"}),(0,d.jsxs)("button",{onClick:()=>{c({intensity:k,type:m,description:o})},className:"px-4 py-2 text-sm font-medium text-white bg-teal-500 rounded-lg hover:bg-teal-600 flex items-center",children:[(0,d.jsx)(f.eMP,{className:"w-4 h-4 mr-2"})," Salvar"]})]})]})]})}):null}},99597:(a,b,c)=>{c.d(b,{dj:()=>g}),c(8732);var d=c(82015);c(54822);let e=(0,d.createContext)(void 0),f=(0,d.createContext)(void 0),g=()=>{let a=(()=>{let a=(0,d.useContext)(e);return void 0===a?{enabled:!1,logRouterChange:()=>{},logHookCall:()=>{},logContextAccess:()=>{}}:a})(),b=(0,d.useContext)(f);if(a.logContextAccess("ToastContext","useToast"),!b){let a=Error("useToast must be used within a ToastProvider");throw console.error("âŒ Toast Context Error:",a.message),a}return{showToast:b.showToast}}}};var b=require("../../webpack-runtime.js");b.C(a);var c=b.X(0,[3317,9871,1302,284,4183,7367,8471],()=>b(b.s=75091));module.exports=c})();