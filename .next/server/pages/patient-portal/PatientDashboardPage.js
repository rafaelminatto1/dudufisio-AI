"use strict";(()=>{var a={};a.id=133,a.ids=[133,3220,4456],a.modules={8732:a=>{a.exports=require("react/jsx-runtime")},19119:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{E:()=>h});var e=c(8732),f=c(71253),g=a([f]);function h({className:a,...b}){return(0,e.jsx)("div",{className:(0,f.cn)("animate-pulse rounded-md bg-muted",a),...b})}f=(g.then?(await g)():g)[0],d()}catch(a){d(a)}})},22320:(a,b,c)=>{c.d(b,{Fq:()=>h,td:()=>i,z0:()=>g});var d=c(92273),e=c(40396);let f=a=>new Promise(b=>setTimeout(b,a)),g=async a=>{await f(300);let b=d.db.getTreatmentPlans().find(b=>b.patientId===a);if(b){let a=await h(b.id);return{...b,exercises:a}}},h=async a=>(await f(300),d.db.getExercisePrescriptions().filter(b=>b.treatmentPlanId===a)),i=async(a,b)=>{await f(400);let c=d.db.getTreatmentPlans(),g=c.findIndex(b=>b.patientId===a);if(g>-1){let a=c[g],f=(b.exercises||[]).map((b,c)=>({id:`ex_${Date.now()}_${c}`,treatmentPlanId:a.id,exerciseName:b.exerciseName,sets:b.sets,repetitions:b.repetitions,resistanceLevel:"A definir",progressionCriteria:"A definir"})),h={...a,treatmentGoals:b.treatmentGoals||a.treatmentGoals,exercises:f.length>0?f:a.exercises};return d.db.updateTreatmentPlan(h),d.db.setExercisePrescriptionsForPlan(a.id,f),e.g.emit("treatmentPlans:changed"),h}throw Error("Plano de tratamento n\xe3o encontrado para este paciente.")}},33873:a=>{a.exports=require("path")},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},42227:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(8732);c(82015);let e=({title:a,subtitle:b,children:c})=>(0,d.jsxs)("div",{className:"pb-8 md:flex md:items-center md:justify-between",children:[(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold leading-tight text-slate-900 tracking-tight",children:a}),(0,d.jsx)("p",{className:"mt-2 text-lg text-slate-600",children:b})]}),(0,d.jsx)("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:c})]})},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},50802:a=>{a.exports=import("clsx")},54822:a=>{a.exports=require("react-router-dom")},56472:a=>{a.exports=require("@opentelemetry/api")},58273:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{config:()=>s,default:()=>o,getServerSideProps:()=>r,getStaticPaths:()=>q,getStaticProps:()=>p,handler:()=>A,reportWebVitals:()=>t,routeModule:()=>z,unstable_getServerProps:()=>x,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>w,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>u});var e=c(63885),f=c(80237),g=c(81413),h=c(3317),i=c.n(h),j=c(76195),k=c.n(j),l=c(84456),m=c(12289),n=a([l]);l=(n.then?(await n)():n)[0];let o=(0,g.M)(l,"default"),p=(0,g.M)(l,"getStaticProps"),q=(0,g.M)(l,"getStaticPaths"),r=(0,g.M)(l,"getServerSideProps"),s=(0,g.M)(l,"config"),t=(0,g.M)(l,"reportWebVitals"),u=(0,g.M)(l,"unstable_getStaticProps"),v=(0,g.M)(l,"unstable_getStaticPaths"),w=(0,g.M)(l,"unstable_getStaticParams"),x=(0,g.M)(l,"unstable_getServerProps"),y=(0,g.M)(l,"unstable_getServerSideProps"),z=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/patient-portal/PatientDashboardPage",pathname:"/patient-portal/PatientDashboardPage",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:k(),Document:i()},userland:l}),A=(0,m.U)({srcPage:"/patient-portal/PatientDashboardPage",config:s,userland:l,routeModule:z,getStaticPaths:q,getStaticProps:p,getServerSideProps:r});d()}catch(a){d(a)}})},71253:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{cn:()=>h});var e=c(50802),f=c(75979),g=a([e,f]);function h(...a){return(0,f.twMerge)((0,e.clsx)(a))}[e,f]=g.then?(await g)():g,d()}catch(a){d(a)}})},75355:(a,b,c)=>{c.d(b,{Ah:()=>m,CC:()=>o,C_:()=>l,K7:()=>p,O7:()=>k,WV:()=>j,st:()=>n,t5:()=>i,xY:()=>h});var d=c(4183);let e=[...d.St],f=[...new Set(d.St.map(a=>a.category))].sort(),g=a=>new Promise(b=>setTimeout(b,a)),h=async()=>(await g(500),{exercises:[...e].sort((a,b)=>a.name.localeCompare(b.name)),categories:[...f]}),i=async a=>(await g(50),e.find(b=>b.name.toLowerCase()===a.toLowerCase())),j=async a=>{await g(400);let b={id:`ex_${Date.now()}`,...a};return f.includes(b.category)||(f.push(b.category),f.sort()),e.unshift(b),b},k=async a=>(await g(400),e=e.map(b=>b.id===a.id?a:b),f.includes(a.category)||(f.push(a.category),f.sort()),a),l=async a=>{await g(400),e=e.filter(b=>b.id!==a)},m=async a=>{await g(100),f.includes(a)||(f.push(a),f.sort())},n=async(a,b)=>{await g(200);let c=f.indexOf(a);c>-1&&(f[c]=b,f.sort()),e=e.map(c=>c.category===a?{...c,category:b}:c)},o=async(a,b)=>{await g(300),f.includes(b)||(f.push(b),f.sort());let c=e.filter(b=>b.category===a).map(a=>({...a,id:`ex_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:`${a.name}`,category:b}));e.push(...c)},p=async a=>{await g(200),f=f.filter(b=>b!==a),e=e.filter(b=>b.category!==a)}},75979:a=>{a.exports=import("tailwind-merge")},82015:a=>{a.exports=require("react")},84456:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>s});var e=c(8732),f=c(82015),g=c(54822),h=c(42227),i=c(28471),j=c(22320),k=c(75355),l=c(72393),m=c(51302),n=c(19119),o=a([n]);n=(o.then?(await o)():o)[0];let p=({to:a,icon:b,title:c,subtitle:d})=>(0,e.jsxs)(g.Link,{to:a,className:"bg-white p-6 rounded-2xl shadow-sm hover:shadow-lg hover:bg-slate-50 transition-all duration-300 flex items-center",children:[(0,e.jsx)("div",{className:"bg-teal-100 text-teal-600 p-4 rounded-full mr-4",children:b}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"text-lg font-bold text-slate-800",children:c}),(0,e.jsx)("p",{className:"text-sm text-slate-500",children:d})]}),(0,e.jsx)(m.c_$,{className:"w-6 h-6 text-slate-400 ml-auto"})]}),q=({appointment:a})=>(0,e.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,e.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center",children:[(0,e.jsx)(m.VvS,{className:"w-5 h-5 mr-2 text-teal-500"}),"Pr\xf3xima Consulta"]}),a?(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:new Date(a.startTime).toLocaleDateString("pt-BR",{weekday:"long"})}),(0,e.jsxs)("p",{className:"text-slate-600",children:[new Date(a.startTime).toLocaleDateString("pt-BR",{day:"2-digit",month:"long"})," \xe0s ",new Date(a.startTime).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]}),(0,e.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:a.type})]}):(0,e.jsx)("p",{className:"text-slate-500",children:"Nenhuma consulta agendada."})]}),r=({exercise:a})=>(0,e.jsxs)("div",{className:"bg-slate-50 p-3 rounded-lg flex items-center gap-4",children:[(0,e.jsx)("img",{src:a.media.thumbnailUrl,alt:a.name,className:"w-16 h-16 object-cover rounded-md"}),(0,e.jsxs)("div",{className:"flex-1",children:[(0,e.jsx)("h4",{className:"font-semibold text-slate-800",children:a.name}),(0,e.jsxs)("p",{className:"text-sm text-slate-500",children:[a.prescription.sets,"x ",a.prescription.repetitions]})]}),(0,e.jsx)(g.Link,{to:"/portal/my-exercises",className:"p-2 bg-white rounded-full shadow-sm hover:bg-slate-100",children:(0,e.jsx)(m.c_$,{className:"w-5 h-5 text-teal-600"})})]}),s=()=>{let{user:a}=(0,i.As)(),{appointments:b,isLoading:c}=(0,i.Ez)(),[d,g]=(0,f.useState)([]),[o,s]=(0,f.useState)(!0);(0,f.useEffect)(()=>{(async()=>{if(a?.patientId){s(!0);let b=await j.z0(a.patientId);if(b?.exercises){let a=await Promise.all(b.exercises.map(async a=>{let b=await k.t5(a.exerciseName);return b?{...b,prescription:a}:null}));g(a.filter(a=>null!==a))}s(!1)}})()},[a]);let t=(0,f.useMemo)(()=>{if(a?.patientId)return b.filter(b=>b.patientId===a.patientId&&b.status===l.y2.Scheduled&&b.startTime>new Date).sort((a,b)=>a.startTime.getTime()-b.startTime.getTime())[0]},[b,a]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(h.A,{title:`Bem-vindo(a), ${a?.name.split(" ")[0]||a?.name}!`,subtitle:"Sua jornada de recupera\xe7\xe3o come\xe7a aqui. O que vamos fazer hoje?"}),c||o?(0,e.jsx)(n.E,{className:"h-screen w-full"}):(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,e.jsx)(p,{to:"/portal/my-exercises",icon:(0,e.jsx)(m.O0M,{className:"w-8 h-8"}),title:"Exerc\xedcios de Hoje",subtitle:"Comece sua rotina di\xe1ria"}),(0,e.jsx)(p,{to:"/portal/pain-diary",icon:(0,e.jsx)(m.$io,{className:"w-8 h-8"}),title:"Registrar Dor",subtitle:"Conte-nos como se sente"})]}),(0,e.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,e.jsx)(q,{appointment:t}),(0,e.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,e.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center",children:[(0,e.jsx)(m.O0M,{className:"w-5 h-5 mr-2 text-teal-500"}),"Sua Rotina de Hoje"]}),d.length>0?(0,e.jsx)("div",{className:"space-y-3 max-h-48 overflow-y-auto pr-2",children:d.slice(0,3).map(a=>(0,e.jsx)(r,{exercise:a},a.id))}):(0,e.jsx)("p",{className:"text-slate-500 text-center py-8",children:"Nenhum exerc\xedcio prescrito para hoje."})]})]})]})]})};d()}catch(a){d(a)}})},93939:a=>{a.exports=require("@supabase/supabase-js")}};var b=require("../../webpack-runtime.js");b.C(a);var c=b.X(0,[3317,9871,1302,4183,7367,8471],()=>b(b.s=58273));module.exports=c})();