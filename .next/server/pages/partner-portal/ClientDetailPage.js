"use strict";(()=>{var a={};a.id=1267,a.ids=[1267,3220],a.modules={8307:a=>{a.exports=require("es-toolkit")},8704:(a,b,c)=>{c.d(b,{Gp:()=>j,OL:()=>h,Up:()=>g,VN:()=>k,bV:()=>i});var d=c(4183);let e=[...d.Ef],f=a=>new Promise(b=>setTimeout(b,a)),g=async()=>(await f(300),[...e]),h=async a=>{if(await f(400),a.id){let b=e.findIndex(b=>b.id===a.id);if(b>-1){let c={...e[b],...a};return e[b]=c,c}throw Error("Partner not found")}{let b={id:`partner_${Date.now()}`,...a,avatarUrl:`https://i.pravatar.cc/150?u=${a.userId}`};return e.push(b),b}},i=async(a,b,c)=>{await f(600);let e=d.Nk.find(a=>a.id===c);if(!e)throw Error("Plano n\xe3o encontrado.");let g=new Date,h=new Date;h.setDate(g.getDate()+e.durationDays);let i={id:`voucher_${Date.now()}`,code:`VF-CLINIC-${Math.random().toString(36).substr(2,6).toUpperCase()}`,patientId:a,plan:e,status:"activated",purchaseDate:g,activationDate:g,expiryDate:h,remainingCredits:e.credits};return d.XM.unshift(i),i},j=async a=>{await f(500);let b=[];for(let a of d.XM){let c=d.N.find(b=>b.id===a.patientId);c&&b.push({patient:c,voucher:a})}return b},k=async(a,b)=>{await f(700);let c=d.XM.find(b=>b.patientId===a),e=d.N.find(b=>b.id===a);return c&&e?{patient:e,voucher:c,soapNotes:d.Tf.filter(b=>b.patientId===a)}:null}},8732:a=>{a.exports=require("react/jsx-runtime")},12490:a=>{a.exports=require("es-toolkit/compat/isPlainObject")},13261:a=>{a.exports=require("victory-vendor/d3-shape")},16844:a=>{a.exports=require("es-toolkit/compat/minBy")},17150:a=>{a.exports=require("es-toolkit/compat/maxBy")},17889:a=>{a.exports=require("es-toolkit/compat/get")},19643:a=>{a.exports=require("es-toolkit/compat/throttle")},20887:a=>{a.exports=require("es-toolkit/compat/last")},22326:a=>{a.exports=require("react-dom")},22544:a=>{a.exports=require("react-redux")},24584:a=>{a.exports=require("use-sync-external-store/shim/with-selector")},33873:a=>{a.exports=require("path")},34562:a=>{a.exports=require("react-is")},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},42227:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(8732);c(82015);let e=({title:a,subtitle:b,children:c})=>(0,d.jsxs)("div",{className:"pb-8 md:flex md:items-center md:justify-between",children:[(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold leading-tight text-slate-900 tracking-tight",children:a}),(0,d.jsx)("p",{className:"mt-2 text-lg text-slate-600",children:b})]}),(0,d.jsx)("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:c})]})},45034:a=>{a.exports=require("es-toolkit/compat/omit")},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},47740:a=>{a.exports=require("@reduxjs/toolkit")},50158:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(8732);c(82015);let e=({title:a,icon:b,children:c,actionButton:e})=>(0,d.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm h-full flex flex-col border border-slate-200/80",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 flex items-center",children:[b&&(0,d.jsx)("span",{className:"mr-3 text-sky-500",children:b}),a]}),e]}),(0,d.jsx)("div",{className:"flex-grow",children:c})]})},51343:a=>{a.exports=require("eventemitter3")},54822:a=>{a.exports=require("react-router-dom")},56472:a=>{a.exports=require("@opentelemetry/api")},57106:a=>{a.exports=require("immer")},62546:a=>{a.exports=require("victory-vendor/d3-scale")},70109:a=>{a.exports=require("reselect")},73150:(a,b,c)=>{c.r(b),c.d(b,{config:()=>D,default:()=>z,getServerSideProps:()=>C,getStaticPaths:()=>B,getStaticProps:()=>A,handler:()=>L,reportWebVitals:()=>E,routeModule:()=>K,unstable_getServerProps:()=>I,unstable_getServerSideProps:()=>J,unstable_getStaticParams:()=>H,unstable_getStaticPaths:()=>G,unstable_getStaticProps:()=>F});var d={};c.r(d),c.d(d,{default:()=>x});var e=c(63885),f=c(80237),g=c(81413),h=c(3317),i=c.n(h),j=c(76195),k=c.n(j),l=c(8732),m=c(82015),n=c(54822),o=c(42227),p=c(8704),q=c(28471),r=c(7976),s=c(99597),t=c(51302),u=c(50158),v=c(82449);let w=({note:a})=>(0,l.jsxs)("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[(0,l.jsx)("div",{className:"flex justify-between items-start mb-2",children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("h4",{className:"font-bold text-sm text-slate-700",children:["Nota Cl\xednica - ",a.date]}),(0,l.jsxs)("p",{className:"text-xs text-slate-500",children:["Por: ",a.therapist]})]})}),(0,l.jsxs)("p",{className:"text-xs text-slate-600",children:[(0,l.jsx)("strong",{className:"font-semibold text-slate-800",children:"S:"})," ",a.subjective]}),(0,l.jsxs)("p",{className:"text-xs text-slate-600",children:[(0,l.jsx)("strong",{className:"font-semibold text-slate-800",children:"A:"})," ",a.assessment]})]}),x=()=>{let{id:a}=n.useParams(),{user:b}=(0,q.As)(),{showToast:c}=(0,s.dj)(),[d,e]=(0,m.useState)(!0),[f,g]=(0,m.useState)(null);if((0,m.useEffect)(()=>{(async()=>{if(a&&b){e(!0);try{let c=await p.VN(a,b.id);g(c)}catch{c("Erro ao carregar dados do cliente.","error")}finally{e(!1)}}})()},[a,b,c]),d)return(0,l.jsx)(r.A,{});if(!f)return(0,l.jsx)("div",{className:"text-center p-10",children:"Cliente n\xe3o encontrado."});let{patient:h,voucher:i,soapNotes:j}=f;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.A,{title:h.name,subtitle:`Plano: ${i.plan.name}`,children:(0,l.jsxs)(n.Link,{to:"/partner/clients",className:"inline-flex items-center rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50",children:[(0,l.jsx)(t.JGc,{className:"-ml-1 mr-2 h-5 w-5"}),"Voltar para a Lista"]})}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,l.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,l.jsx)(u.A,{title:"Informa\xe7\xf5es do Paciente",icon:(0,l.jsx)(t.KJW,{}),children:(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Email:"})," ",h.email]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Telefone:"})," ",h.phone]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Status:"})," ",(0,l.jsx)("span",{className:"font-semibold text-green-700",children:h.status})]})]})}),(0,l.jsx)(u.A,{title:"Di\xe1rio de Dor",icon:(0,l.jsx)(t.bl6,{}),children:h.painPoints&&h.painPoints.length>0?(0,l.jsx)(v.A,{painLogs:h.painPoints}):(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"Nenhum registro de dor."})})]}),(0,l.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,l.jsx)(u.A,{title:"Hist\xf3rico Relevante de Fisioterapia",icon:(0,l.jsx)(t.iUU,{}),children:(0,l.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto pr-2",children:j.length>0?j.map(a=>(0,l.jsx)(w,{note:a},a.id)):(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"Nenhuma nota cl\xednica encontrada."})})}),(0,l.jsxs)(u.A,{title:"Plano de Treino e Anota\xe7\xf5es",icon:(0,l.jsx)(t.g$A,{}),children:[(0,l.jsx)("textarea",{rows:8,className:"w-full p-2 border border-slate-300 rounded-lg text-sm",placeholder:"Digite aqui o plano de treino, observa\xe7\xf5es e anota\xe7\xf5es sobre este cliente..."}),(0,l.jsx)("div",{className:"text-right mt-2",children:(0,l.jsx)("button",{className:"px-4 py-2 text-sm font-medium text-white bg-teal-500 rounded-lg hover:bg-teal-600",children:"Salvar Anota\xe7\xf5es"})})]})]})]})]})};var y=c(12289);let z=(0,g.M)(d,"default"),A=(0,g.M)(d,"getStaticProps"),B=(0,g.M)(d,"getStaticPaths"),C=(0,g.M)(d,"getServerSideProps"),D=(0,g.M)(d,"config"),E=(0,g.M)(d,"reportWebVitals"),F=(0,g.M)(d,"unstable_getStaticProps"),G=(0,g.M)(d,"unstable_getStaticPaths"),H=(0,g.M)(d,"unstable_getStaticParams"),I=(0,g.M)(d,"unstable_getServerProps"),J=(0,g.M)(d,"unstable_getServerSideProps"),K=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/partner-portal/ClientDetailPage",pathname:"/partner-portal/ClientDetailPage",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:k(),Document:i()},userland:d}),L=(0,y.U)({srcPage:"/partner-portal/ClientDetailPage",config:D,userland:d,routeModule:K,getStaticPaths:B,getStaticProps:A,getServerSideProps:C})},74956:a=>{a.exports=require("clsx")},75965:a=>{a.exports=require("decimal.js-light")},79291:a=>{a.exports=require("es-toolkit/compat/sumBy")},82015:a=>{a.exports=require("react")},82449:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(8732);c(82015);var e=c(50284);let f=({painLogs:a})=>{let b=a.map(a=>({name:new Date(a.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),"N\xedvel de Dor":a.intensity,notes:a.description})).sort((a,b)=>new Date(a.name.split("/").reverse().join("-")).getTime()-new Date(b.name.split("/").reverse().join("-")).getTime());return(0,d.jsx)("div",{className:"h-64",children:(0,d.jsx)(e.uf,{width:"100%",height:"100%",children:(0,d.jsxs)(e.bl,{data:b,margin:{top:5,right:20,left:-10,bottom:5},children:[(0,d.jsx)(e.dC,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),(0,d.jsx)(e.WX,{dataKey:"name",stroke:"#64748b",fontSize:12}),(0,d.jsx)(e.h8,{domain:[0,10],stroke:"#64748b",fontSize:12}),(0,d.jsx)(e.m_,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"0.5rem"},labelStyle:{color:"#1e293b",fontWeight:"bold"}}),(0,d.jsx)(e.s$,{wrapperStyle:{fontSize:"12px"}}),(0,d.jsx)(e.N1,{type:"monotone",dataKey:"N\xedvel de Dor",stroke:"#ef4444",strokeWidth:2,activeDot:{r:8}})]})})})}},83428:a=>{a.exports=require("es-toolkit/compat/range")},85923:a=>{a.exports=require("es-toolkit/compat/uniqBy")},90742:a=>{a.exports=require("es-toolkit/compat/sortBy")},91651:a=>{a.exports=require("tiny-invariant")},93939:a=>{a.exports=require("@supabase/supabase-js")},99597:(a,b,c)=>{c.d(b,{dj:()=>g}),c(8732);var d=c(82015);c(54822);let e=(0,d.createContext)(void 0),f=(0,d.createContext)(void 0),g=()=>{let a=(()=>{let a=(0,d.useContext)(e);return void 0===a?{enabled:!1,logRouterChange:()=>{},logHookCall:()=>{},logContextAccess:()=>{}}:a})(),b=(0,d.useContext)(f);if(a.logContextAccess("ToastContext","useToast"),!b){let a=Error("useToast must be used within a ToastProvider");throw console.error("âŒ Toast Context Error:",a.message),a}return{showToast:b.showToast}}}};var b=require("../../webpack-runtime.js");b.C(a);var c=b.X(0,[3317,9871,1302,284,4183,7367,8471],()=>b(b.s=73150));module.exports=c})();