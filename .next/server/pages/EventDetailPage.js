"use strict";(()=>{var a={};a.id=430,a.ids=[430,3220],a.modules={8732:a=>{a.exports=require("react/jsx-runtime")},31907:(a,b,c)=>{c.r(b),c.d(b,{config:()=>K,default:()=>G,getServerSideProps:()=>J,getStaticPaths:()=>I,getStaticProps:()=>H,handler:()=>S,reportWebVitals:()=>L,routeModule:()=>R,unstable_getServerProps:()=>P,unstable_getServerSideProps:()=>Q,unstable_getStaticParams:()=>O,unstable_getStaticPaths:()=>N,unstable_getStaticProps:()=>M});var d={};c.r(d),c.d(d,{default:()=>E});var e=c(63885),f=c(80237),g=c(81413),h=c(3317),i=c.n(h),j=c(76195),k=c.n(j),l=c(8732),m=c(82015),n=c(54822),o=c(72393),p=c(40396),q=c(99597),r=c(7976),s=c(51302);let t=({event:a,registrations:b})=>{let{totalRegistered:c,checkInRate:d,revenue:e,checkInCount:f}=(0,m.useMemo)(()=>{let c=b.length,d=b.filter(a=>a.status===o.m7.Attended).length,e=c>0?d/c*100:0,f=a.isFree?0:c*(a.price||0);return{totalRegistered:c.toString(),checkInRate:e,revenue:`R$ ${f.toFixed(2).replace(".",",")}`,checkInCount:d}},[a,b]),g=`${d.toFixed(1)}%`,h="bg-teal-500";return d<75&&(h="bg-amber-500"),d<50&&(h="bg-red-500"),(0,l.jsx)("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-200",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,l.jsxs)("div",{className:"md:col-span-1 space-y-4",children:[(0,l.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm text-center",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-slate-500",children:"Total de Inscritos"}),(0,l.jsx)("p",{className:"text-4xl font-bold text-slate-800 mt-1",children:c})]}),(0,l.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm text-center",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-slate-500",children:"Faturamento Previsto"}),(0,l.jsx)("p",{className:"text-4xl font-bold text-slate-800 mt-1",children:e})]})]}),(0,l.jsxs)("div",{className:"md:col-span-2 bg-white p-6 rounded-xl shadow-sm flex flex-col justify-center",children:[(0,l.jsx)("h4",{className:"font-semibold text-slate-700 text-center mb-3 text-lg",children:"Taxa de Check-in"}),(0,l.jsxs)("div",{className:"w-full bg-slate-200 rounded-full h-8 relative",children:[(0,l.jsx)("div",{className:`${h} h-8 rounded-full transition-all duration-500`,style:{width:`${d}%`}}),(0,l.jsx)("span",{className:"absolute inset-0 flex items-center justify-center text-sm font-bold text-white drop-shadow-sm",children:g})]}),(0,l.jsxs)("p",{className:"text-center text-xs text-slate-500 mt-2",children:[f," de ",c," participantes compareceram."]})]})]})})},u={[o.m7.Pending]:{text:"text-amber-700",bg:"bg-amber-100"},[o.m7.Confirmed]:{text:"text-blue-700",bg:"bg-blue-100"},[o.m7.Attended]:{text:"text-green-700",bg:"bg-green-100"},[o.m7.Cancelled]:{text:"text-red-700",bg:"bg-red-100"}},v=({registrations:a,onCheckIn:b})=>{let[c,d]=(0,m.useState)(""),e=a.filter(a=>a.fullName.toLowerCase().includes(c.toLowerCase())||a.email.toLowerCase().includes(c.toLowerCase()));return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"relative mb-4 max-w-sm",children:[(0,l.jsx)(s.vji,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,l.jsx)("input",{type:"text",value:c,onChange:a=>d(a.target.value),placeholder:"Buscar participante...",className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg"})]}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[(0,l.jsx)("thead",{className:"bg-slate-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"p-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nome"}),(0,l.jsx)("th",{className:"p-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Contato"}),(0,l.jsx)("th",{className:"p-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Data Inscri\xe7\xe3o"}),(0,l.jsx)("th",{className:"p-3 text-center text-xs font-medium text-slate-500 uppercase",children:"Status"}),(0,l.jsx)("th",{className:"p-3 text-center text-xs font-medium text-slate-500 uppercase",children:"A\xe7\xf5es"})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-slate-200",children:e.map(a=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"p-3 font-medium text-slate-800",children:a.fullName}),(0,l.jsx)("td",{className:"p-3 text-sm text-slate-500",children:a.email}),(0,l.jsx)("td",{className:"p-3 text-sm text-slate-500",children:a.registrationDate.toLocaleDateString("pt-BR")}),(0,l.jsx)("td",{className:"p-3 text-center",children:(0,l.jsx)("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${u[a.status].bg} ${u[a.status].text}`,children:a.status})}),(0,l.jsx)("td",{className:"p-3 text-center",children:a.status===o.m7.Confirmed&&(0,l.jsx)("button",{onClick:()=>b(a.id),className:"p-1.5 text-green-600 bg-green-50 hover:bg-green-100 rounded-full",title:"Realizar Check-in",children:(0,l.jsx)(s.rAV,{className:"w-4 h-4"})})})]},a.id))})]})})]})},w=({isOpen:a,onClose:b,registrations:c,onCheckIn:d})=>{let[e,f]=(0,m.useState)(""),[g,h]=(0,m.useState)(null);if(!a)return null;let i=c.filter(a=>a.fullName.toLowerCase().includes(e.toLowerCase())),j=async a=>{h(a),await d(a,"manual"),h(null)};return(0,l.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:b,children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col",onClick:a=>a.stopPropagation(),children:[(0,l.jsxs)("header",{className:"flex items-center justify-between p-5 border-b",children:[(0,l.jsx)("h2",{className:"text-lg font-bold text-slate-800",children:"Check-in Manual"}),(0,l.jsx)("button",{onClick:b,className:"p-2 rounded-full hover:bg-slate-100",children:(0,l.jsx)(s.X,{className:"w-5 h-5"})})]}),(0,l.jsxs)("main",{className:"p-6 flex-1 flex flex-col",children:[(0,l.jsxs)("div",{className:"relative mb-4",children:[(0,l.jsx)(s.vji,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,l.jsx)("input",{type:"text",value:e,onChange:a=>f(a.target.value),placeholder:"Buscar participante para check-in...",className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg"})]}),(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto -mx-6 px-6 divide-y divide-slate-200",children:[i.map(a=>(0,l.jsxs)("div",{className:"flex items-center justify-between py-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold text-slate-800",children:a.fullName}),(0,l.jsx)("p",{className:"text-sm text-slate-500",children:a.email})]}),(0,l.jsx)("button",{onClick:()=>j(a.id),disabled:g===a.id,className:"inline-flex items-center justify-center bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg shadow-sm transition-colors disabled:bg-green-300",children:g===a.id?(0,l.jsx)(s.aHM,{className:"w-5 h-5 animate-spin"}):(0,l.jsx)(s.rAV,{className:"w-5 h-5"})})]},a.id)),0===i.length&&(0,l.jsx)("p",{className:"text-center text-slate-500 pt-10",children:"Nenhum participante encontrado ou todos j\xe1 fizeram check-in."})]})]})]})})};var x=c(28471);let y={[o.fb.Draft]:{text:"text-slate-700",bg:"bg-slate-200",dot:"bg-slate-500"},[o.fb.Published]:{text:"text-blue-700",bg:"bg-blue-200",dot:"bg-blue-500"},[o.fb.Active]:{text:"text-green-700",bg:"bg-green-200",dot:"bg-green-500"},[o.fb.Completed]:{text:"text-gray-700",bg:"bg-gray-300",dot:"bg-gray-600"},[o.fb.Cancelled]:{text:"text-red-700",bg:"bg-red-200",dot:"bg-red-500"}},z=({event:a,onEdit:b,onCheckIn:c})=>{let{text:d,bg:e,dot:f}=y[a.status],g=a.startDate.toLocaleString("pt-BR",{dateStyle:"full",timeStyle:"short"});return(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden mb-8",children:[(0,l.jsxs)("div",{className:"relative h-48 md:h-64 bg-slate-200",children:[(0,l.jsx)("img",{src:a.bannerUrl||"https://images.unsplash.com/photo-1511795409834-ef04bbd61622?q=80&w=1470",alt:`Banner for ${a.name}`,className:"w-full h-full object-cover"}),(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),(0,l.jsxs)("div",{className:"absolute bottom-0 left-0 p-6",children:[(0,l.jsxs)("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${e} ${d} shadow`,children:[(0,l.jsx)("span",{className:`w-2 h-2 mr-2 rounded-full ${f}`}),a.status]}),(0,l.jsx)("h1",{className:"text-2xl md:text-4xl font-extrabold text-white mt-2 shadow-lg",children:a.name})]})]}),(0,l.jsxs)("div",{className:"p-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center text-slate-600",children:[(0,l.jsx)(s.VvS,{className:"w-5 h-5 mr-3 text-slate-400"}),(0,l.jsx)("span",{className:"font-semibold",children:g})]}),(0,l.jsxs)("div",{className:"flex items-center text-slate-600",children:[(0,l.jsx)(s.sDd,{className:"w-5 h-5 mr-3 text-slate-400"}),(0,l.jsx)("span",{className:"font-semibold",children:a.location})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[(0,l.jsxs)("button",{onClick:b,className:"w-full md:w-auto flex-1 inline-flex items-center justify-center rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50",children:[(0,l.jsx)(s.ffu,{className:"w-4 h-4 mr-2"})," Editar"]}),(0,l.jsxs)("button",{onClick:c,className:"w-full md:w-auto flex-1 inline-flex items-center justify-center rounded-lg border border-transparent bg-teal-500 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-teal-600",children:[(0,l.jsx)(s.vW6,{className:"w-4 h-4 mr-2"})," Check-in"]})]})]})]})},A={[o.aJ.Applied]:{text:"text-amber-700",bg:"bg-amber-100"},[o.aJ.Confirmed]:{text:"text-blue-700",bg:"bg-blue-100"},[o.aJ.Paid]:{text:"text-green-700",bg:"bg-green-100"},[o.aJ.Cancelled]:{text:"text-red-700",bg:"bg-red-100"}},B=({providers:a})=>{let[b,c]=(0,m.useState)(""),[d,e]=(0,m.useState)(null),{showToast:f}=(0,q.dj)(),g=async a=>{e(a);try{await p.g.confirmProvider(a),f("Participa\xe7\xe3o confirmada!","success")}catch(a){f(a.message,"error")}finally{e(null)}},h=async a=>{e(a);try{await p.g.payProvider(a),f("Pagamento registrado!","success")}catch(a){f(a.message,"error")}finally{e(null)}},i=a.filter(a=>a.name.toLowerCase().includes(b.toLowerCase()));return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"relative mb-4 max-w-sm",children:[(0,l.jsx)(s.vji,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,l.jsx)("input",{type:"text",value:b,onChange:a=>c(a.target.value),placeholder:"Buscar fisioterapeuta...",className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg"})]}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[(0,l.jsx)("thead",{className:"bg-slate-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"p-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nome"}),(0,l.jsx)("th",{className:"p-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Contato"}),(0,l.jsx)("th",{className:"p-3 text-left text-xs font-medium text-slate-500 uppercase",children:"CREFITO"}),(0,l.jsx)("th",{className:"p-3 text-center text-xs font-medium text-slate-500 uppercase",children:"Status"}),(0,l.jsx)("th",{className:"p-3 text-center text-xs font-medium text-slate-500 uppercase",children:"A\xe7\xf5es"})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-slate-200",children:i.map(a=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"p-3 font-medium text-slate-800",children:a.name}),(0,l.jsx)("td",{className:"p-3 text-sm text-slate-500",children:a.phone}),(0,l.jsx)("td",{className:"p-3 text-sm text-slate-500",children:a.professionalId||"N/A"}),(0,l.jsx)("td",{className:"p-3 text-center",children:(0,l.jsx)("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${A[a.status].bg} ${A[a.status].text}`,children:a.status})}),(0,l.jsx)("td",{className:"p-3 text-center space-x-2",children:d===a.id?(0,l.jsx)(s.aHM,{className:"w-4 h-4 animate-spin mx-auto text-slate-400"}):(0,l.jsxs)(l.Fragment,{children:[a.status===o.aJ.Applied&&(0,l.jsx)("button",{onClick:()=>g(a.id),className:"p-1.5 text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-full",title:"Confirmar Presen\xe7a",children:(0,l.jsx)(s.Jlk,{className:"w-4 h-4"})}),a.status===o.aJ.Confirmed&&(0,l.jsx)("button",{onClick:()=>h(a.id),className:"p-1.5 text-green-600 bg-green-50 hover:bg-green-100 rounded-full",title:"Registrar Pagamento",children:(0,l.jsx)(s.G9t,{className:"w-4 h-4"})})]})})]},a.id))})]})}),0===i.length&&(0,l.jsx)("p",{className:"text-center py-8 text-sm text-slate-500",children:"Nenhum fisioterapeuta encontrado."})]})};var C=c(51258);let D=({icon:a,label:b,isActive:c,onClick:d})=>(0,l.jsxs)("button",{onClick:d,className:`flex items-center whitespace-nowrap py-3 px-4 font-medium text-sm rounded-t-lg border-b-2 ${c?"border-teal-500 text-teal-600 bg-white":"border-transparent text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,children:[(0,l.jsx)(a,{className:"w-5 h-5 mr-2"})," ",b]}),E=()=>{let{id:a}=n.useParams(),{showToast:b}=(0,q.dj)(),{user:c}=(0,x.As)(),[d,e]=(0,m.useState)(null),[f,g]=(0,m.useState)([]),[h,i]=(0,m.useState)(!0),[j,k]=(0,m.useState)("participants"),[u,y]=(0,m.useState)(!1),[A,E]=(0,m.useState)(!1),F=(0,m.useCallback)(async()=>{if(a){i(!0);try{let b=await p.g.getEventById(a),c=await p.g.getRegistrationsByEventId(a);e(b||null),g(c)}catch(a){b("Erro ao carregar detalhes do evento.","error")}finally{i(!1)}}},[a,b]);(0,m.useEffect)(()=>(F(),p.g.on("events:changed",F),()=>{p.g.off("events:changed",F)}),[F]);let G=async(a,d)=>{if(!c)return!1;try{return await p.g.checkInParticipant(a,d,c.id),b("Check-in realizado com sucesso!","success"),!0}catch(a){return b(a.message,"error"),!1}},H=async a=>{if(c)try{await p.g.saveEvent(a,c.id),b(a.id?"Evento atualizado!":"Evento criado!","success"),E(!1)}catch(a){b("Falha ao salvar o evento.","error")}};return h?(0,l.jsx)(r.A,{}):d?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.Link,{to:"/events",className:"inline-flex items-center text-sm font-semibold text-slate-600 hover:text-slate-800 mb-4",children:[(0,l.jsx)(s.JGc,{className:"mr-2 h-4 w-4"}),"Voltar para todos os eventos"]}),(0,l.jsx)(z,{event:d,onEdit:()=>E(!0),onCheckIn:()=>y(!0)}),(0,l.jsx)(C.A,{isOpen:A,onClose:()=>E(!1),onSave:H,eventToEdit:d}),(0,l.jsx)(w,{isOpen:u,onClose:()=>y(!1),registrations:f.filter(a=>a.status!==o.m7.Attended),onCheckIn:G}),(0,l.jsxs)("div",{className:"mt-8 bg-white rounded-2xl shadow-sm",children:[(0,l.jsx)("div",{className:"border-b border-slate-200",children:(0,l.jsxs)("nav",{className:"flex space-x-2 px-4","aria-label":"Tabs",children:[(0,l.jsx)(D,{icon:s.EsT,label:"Dashboard",isActive:"dashboard"===j,onClick:()=>k("dashboard")}),(0,l.jsx)(D,{icon:s.zWC,label:"Participantes",isActive:"participants"===j,onClick:()=>k("participants")}),d.allowsProviders&&(0,l.jsx)(D,{icon:s.MWd,label:"Fisioterapeutas",isActive:"providers"===j,onClick:()=>k("providers")})]})}),(0,l.jsxs)("div",{className:"p-6",children:["dashboard"===j&&(0,l.jsx)(t,{event:d,registrations:f}),"participants"===j&&(0,l.jsx)(v,{registrations:f,onCheckIn:a=>G(a,"manual")}),"providers"===j&&d.allowsProviders&&(0,l.jsx)(B,{providers:d.providers})]})]})]}):(0,l.jsx)("div",{className:"text-center p-10",children:"Evento n\xe3o encontrado."})};var F=c(12289);let G=(0,g.M)(d,"default"),H=(0,g.M)(d,"getStaticProps"),I=(0,g.M)(d,"getStaticPaths"),J=(0,g.M)(d,"getServerSideProps"),K=(0,g.M)(d,"config"),L=(0,g.M)(d,"reportWebVitals"),M=(0,g.M)(d,"unstable_getStaticProps"),N=(0,g.M)(d,"unstable_getStaticPaths"),O=(0,g.M)(d,"unstable_getStaticParams"),P=(0,g.M)(d,"unstable_getServerProps"),Q=(0,g.M)(d,"unstable_getServerSideProps"),R=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/EventDetailPage",pathname:"/EventDetailPage",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:k(),Document:i()},userland:d}),S=(0,F.U)({srcPage:"/EventDetailPage",config:K,userland:d,routeModule:R,getStaticPaths:I,getStaticProps:H,getServerSideProps:J})},33873:a=>{a.exports=require("path")},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},54822:a=>{a.exports=require("react-router-dom")},56472:a=>{a.exports=require("@opentelemetry/api")},82015:a=>{a.exports=require("react")},93939:a=>{a.exports=require("@supabase/supabase-js")}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[3317,9871,1302,4183,7367,8471,2376],()=>b(b.s=31907));module.exports=c})();