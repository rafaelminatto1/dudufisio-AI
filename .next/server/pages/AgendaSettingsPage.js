"use strict";(()=>{var a={};a.id=1450,a.ids=[1450,3220],a.modules={8732:a=>{a.exports=require("react/jsx-runtime")},33873:a=>{a.exports=require("path")},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},42227:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(8732);c(82015);let e=({title:a,subtitle:b,children:c})=>(0,d.jsxs)("div",{className:"pb-8 md:flex md:items-center md:justify-between",children:[(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold leading-tight text-slate-900 tracking-tight",children:a}),(0,d.jsx)("p",{className:"mt-2 text-lg text-slate-600",children:b})]}),(0,d.jsx)("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:c})]})},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},54822:a=>{a.exports=require("react-router-dom")},56472:a=>{a.exports=require("@opentelemetry/api")},72393:(a,b,c)=>{c.d(b,{Bx:()=>r,D_:()=>l,Ks:()=>i,Kw:()=>o,Lc:()=>m,UB:()=>p,W6:()=>k,WW:()=>e,Xh:()=>d,YY:()=>g,aJ:()=>u,e1:()=>j,fb:()=>s,m7:()=>t,pn:()=>n,q1:()=>h,tv:()=>q,y2:()=>f});var d=function(a){return a.Admin="Admin",a.Therapist="Fisioterapeuta",a.Patient="Paciente",a.EducadorFisico="EducadorFisico",a}({}),e=function(a){return a.Active="Active",a.Inactive="Inactive",a.Discharged="Discharged",a}({}),f=function(a){return a.Scheduled="Agendado",a.Completed="Realizado",a.Canceled="Cancelado",a.NoShow="Faltou",a}({}),g=function(a){return a.Evaluation="Avalia\xe7\xe3o",a.Session="Sess\xe3o",a.Return="Retorno",a.Pilates="Pilates",a.Urgent="Urgente",a.Teleconsulta="Teleconsulta",a}({});let h={Avaliação:"purple",Sessão:"emerald",Retorno:"blue",Pilates:"amber",Urgente:"red",Teleconsulta:"cyan"};var i=function(a){return a.Active="Ativo",a.Concluded="Conclu\xeddo",a.Paused="Pausado",a}({}),j=function(a){return a.ToDo="A Fazer",a.InProgress="Em Andamento",a.Done="Conclu\xeddo",a}({}),k=function(a){return a.High="Alta",a.Medium="M\xe9dia",a.Low="Baixa",a}({}),l=function(a){return a.Receita="Receita",a.Despesa="Despesa",a}({}),m=function(a){return a.Aluguel="Aluguel",a.Salarios="Sal\xe1rios",a.Marketing="Marketing",a.Suprimentos="Suprimentos",a.Equipamentos="Equipamentos",a.Impostos="Impostos",a.Outros="Outros",a}({}),n=function(a){return a.Active="Ativo",a.Inactive="Inativo",a}({}),o=function(a){return a.Active="Ativo",a.OutOfStock="Sem Estoque",a.Discontinued="Descontinuado",a}({}),p=function(a){return a.In="Entrada",a.Out="Sa\xedda",a}({}),q=function(a){return a.LowStock="Estoque Baixo",a.OutOfStock="Sem Estoque",a.Expiring="Vencimento Pr\xf3ximo",a.Expired="Vencido",a}({}),r=function(a){return a.Corrida="Corrida de Rua",a.Workshop="Workshop",a.Palestra="Palestra",a.Campanha="Campanha de Sa\xfade",a.Atendimento="Atendimento Externo",a}({}),s=function(a){return a.Draft="Rascunho",a.Published="Publicado",a.Active="Ativo",a.Completed="Conclu\xeddo",a.Cancelled="Cancelado",a}({}),t=function(a){return a.Pending="Pendente",a.Confirmed="Confirmado",a.Attended="Compareceu",a.Cancelled="Cancelado",a}({}),u=function(a){return a.Applied="Inscrito",a.Confirmed="Confirmado",a.Paid="Pago",a.Cancelled="Cancelado",a}({})},82015:a=>{a.exports=require("react")},84313:(a,b,c)=>{c.d(b,{T:()=>h});var d=c(72393);let e="fisioflow_scheduling_settings",f={limits:{weekday:[{id:"wd1",startTime:"07:00",endTime:"13:00",limit:3},{id:"wd2",startTime:"13:00",endTime:"15:00",limit:1},{id:"wd3",startTime:"15:00",endTime:"21:00",limit:4}],saturday:[{id:"sat1",startTime:"07:00",endTime:"13:00",limit:3}]},maxEvaluationsPerSlot:1,teleconsultaEnabled:!1};class g{getSettings(){try{let a=localStorage.getItem(e);if(a){let b=JSON.parse(a);return{...f,...b}}}catch(a){console.error("Failed to parse scheduling settings from localStorage",a)}return f}saveSettings(a){try{a.limits.weekday.sort((a,b)=>a.startTime.localeCompare(b.startTime)),a.limits.saturday.sort((a,b)=>a.startTime.localeCompare(b.startTime)),localStorage.setItem(e,JSON.stringify(a))}catch(a){console.error("Failed to save scheduling settings to localStorage",a)}}getSlotOccupancy(a,b,c){let e=this.getSettings(),f=a.getDay(),g=a.toTimeString().slice(0,5),h=(6===f?e.limits.saturday:e.limits.weekday).find(a=>g>=a.startTime&&g<a.endTime)||{limit:0},i=b.filter(b=>(!c||b.id!==c)&&b.startTime.getTime()===a.getTime()),j=i.filter(a=>a.type===d.YY.Evaluation),k=i.length>=h.limit,l=j.length>=e.maxEvaluationsPerSlot;return{patientCount:i.length,patientLimit:h.limit,evalCount:j.length,evalLimit:e.maxEvaluationsPerSlot,isFull:0===h.limit||k,isPatientLimitFull:0===h.limit||k,isEvalLimitFull:l}}}let h=new g},99597:(a,b,c)=>{c.d(b,{dj:()=>g}),c(8732);var d=c(82015);c(54822);let e=(0,d.createContext)(void 0),f=(0,d.createContext)(void 0),g=()=>{let a=(()=>{let a=(0,d.useContext)(e);return void 0===a?{enabled:!1,logRouterChange:()=>{},logHookCall:()=>{},logContextAccess:()=>{}}:a})(),b=(0,d.useContext)(f);if(a.logContextAccess("ToastContext","useToast"),!b){let a=Error("useToast must be used within a ToastProvider");throw console.error("❌ Toast Context Error:",a.message),a}return{showToast:b.showToast}}},99862:(a,b,c)=>{c.r(b),c.d(b,{config:()=>y,default:()=>u,getServerSideProps:()=>x,getStaticPaths:()=>w,getStaticProps:()=>v,handler:()=>G,reportWebVitals:()=>z,routeModule:()=>F,unstable_getServerProps:()=>D,unstable_getServerSideProps:()=>E,unstable_getStaticParams:()=>C,unstable_getStaticPaths:()=>B,unstable_getStaticProps:()=>A});var d={};c.r(d),c.d(d,{default:()=>s});var e=c(63885),f=c(80237),g=c(81413),h=c(3317),i=c.n(h),j=c(76195),k=c.n(j),l=c(8732),m=c(82015),n=c(51302),o=c(84313),p=c(42227),q=c(99597);let r=({slot:a,onUpdate:b,onRemove:c})=>(0,l.jsxs)("div",{className:"grid grid-cols-4 gap-3 items-center",children:[(0,l.jsx)("input",{type:"time",value:a.startTime,onChange:a=>b("startTime",a.target.value),className:"w-full p-2 border border-slate-300 rounded-lg"}),(0,l.jsx)("input",{type:"time",value:a.endTime,onChange:a=>b("endTime",a.target.value),className:"w-full p-2 border border-slate-300 rounded-lg"}),(0,l.jsx)("input",{type:"number",min:"0",value:a.limit,onChange:a=>b("limit",parseInt(a.target.value,10)||0),className:"w-full p-2 border border-slate-300 rounded-lg"}),(0,l.jsx)("button",{onClick:c,className:"p-2 text-red-500 hover:bg-red-50 rounded-full justify-self-center",children:(0,l.jsx)(n.TBR,{className:"w-5 h-5"})})]}),s=()=>{let[a,b]=(0,m.useState)(()=>o.T.getSettings()),{showToast:c}=(0,q.dj)(),d=(a,c,d,e)=>{b(b=>{let f=[...b.limits[a]],g=f[c];if(!g)return b;let h={id:g.id,startTime:g.startTime,endTime:g.endTime,limit:g.limit};return"limit"===d?h.limit=Number(e):("startTime"===d||"endTime"===d||"id"===d)&&(h[d]=String(e)),f[c]=h,{...b,limits:{...b.limits,[a]:f}}})},e=(a,c)=>{b(b=>({...b,limits:{...b.limits,[a]:b.limits[a].filter((a,b)=>b!==c)}}))},f=a=>{let c={id:`new_${Date.now()}`,startTime:"08:00",endTime:"12:00",limit:3};b(b=>({...b,limits:{...b.limits,[a]:[...b.limits[a],c]}}))};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.A,{title:"Configura\xe7\xf5es da Agenda",subtitle:"Defina os limites de agendamento e a capacidade da sua cl\xednica por hor\xe1rio.",children:(0,l.jsxs)("button",{onClick:()=>{o.T.saveSettings(a),c("Configura\xe7\xf5es salvas com sucesso!","success")},className:"inline-flex items-center justify-center rounded-lg border border-transparent bg-teal-500 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-teal-600",children:[(0,l.jsx)(n.eMP,{className:"w-5 h-5 mr-2"}),"Salvar Altera\xe7\xf5es"]})}),(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Limites por Faixa de Hor\xe1rio (Segunda a Sexta)"}),(0,l.jsx)("p",{className:"text-sm text-slate-500 mb-4",children:"Defina o n\xfamero m\xe1ximo de pacientes que podem ser agendados simultaneamente em cada per\xedodo."}),(0,l.jsxs)("div",{className:"grid grid-cols-4 gap-3 text-sm font-medium text-slate-600 px-1 mb-2",children:[(0,l.jsx)("span",{children:"In\xedcio"}),(0,l.jsx)("span",{children:"Fim"}),(0,l.jsx)("span",{children:"Limite Pacientes"}),(0,l.jsx)("span",{className:"text-center",children:"A\xe7\xe3o"})]}),(0,l.jsx)("div",{className:"space-y-2",children:a.limits.weekday.map((a,b)=>(0,l.jsx)(r,{slot:a,onUpdate:(a,c)=>d("weekday",b,a,c),onRemove:()=>e("weekday",b)},a.id))}),(0,l.jsxs)("button",{onClick:()=>f("weekday"),className:"mt-4 flex items-center text-sm font-semibold text-teal-600 hover:text-teal-700",children:[(0,l.jsx)(n.FWt,{className:"w-4 h-4 mr-2"})," Adicionar Faixa de Hor\xe1rio"]})]}),(0,l.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Limites por Faixa de Hor\xe1rio (S\xe1bado)"}),(0,l.jsxs)("div",{className:"grid grid-cols-4 gap-3 text-sm font-medium text-slate-600 px-1 mb-2",children:[(0,l.jsx)("span",{children:"In\xedcio"}),(0,l.jsx)("span",{children:"Fim"}),(0,l.jsx)("span",{children:"Limite Pacientes"}),(0,l.jsx)("span",{className:"text-center",children:"A\xe7\xe3o"})]}),(0,l.jsx)("div",{className:"space-y-2",children:a.limits.saturday.map((a,b)=>(0,l.jsx)(r,{slot:a,onUpdate:(a,c)=>d("saturday",b,a,c),onRemove:()=>e("saturday",b)},a.id))}),(0,l.jsxs)("button",{onClick:()=>f("saturday"),className:"mt-4 flex items-center text-sm font-semibold text-teal-600 hover:text-teal-700",children:[(0,l.jsx)(n.FWt,{className:"w-4 h-4 mr-2"})," Adicionar Faixa de Hor\xe1rio"]})]}),(0,l.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Regras Globais"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"max-evals",className:"block text-sm font-medium text-slate-700",children:"M\xe1ximo de Avalia\xe7\xf5es por Hor\xe1rio"}),(0,l.jsx)("p",{className:"text-xs text-slate-500 mb-2",children:"Isso se aplica a qualquer hor\xe1rio, independentemente do limite de pacientes, devido \xe0 limita\xe7\xe3o da sala."}),(0,l.jsx)("input",{id:"max-evals",type:"number",min:"0",value:a.maxEvaluationsPerSlot,onChange:a=>b(b=>({...b,maxEvaluationsPerSlot:parseInt(a.target.value)||0})),className:"w-full max-w-xs p-2 border border-slate-300 rounded-lg"})]})]}),(0,l.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"M\xf3dulos Adicionais"}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold text-slate-800",children:"M\xf3dulo de Teleconsulta"}),(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"Permite realizar atendimentos por v\xeddeo diretamente na plataforma."})]}),(0,l.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:a.teleconsultaEnabled,onChange:a=>b(b=>({...b,teleconsultaEnabled:a.target.checked})),className:"sr-only peer"}),(0,l.jsx)("div",{className:"w-11 h-6 bg-slate-200 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-teal-500"})]})]})]})]})]})};var t=c(12289);let u=(0,g.M)(d,"default"),v=(0,g.M)(d,"getStaticProps"),w=(0,g.M)(d,"getStaticPaths"),x=(0,g.M)(d,"getServerSideProps"),y=(0,g.M)(d,"config"),z=(0,g.M)(d,"reportWebVitals"),A=(0,g.M)(d,"unstable_getStaticProps"),B=(0,g.M)(d,"unstable_getStaticPaths"),C=(0,g.M)(d,"unstable_getStaticParams"),D=(0,g.M)(d,"unstable_getServerProps"),E=(0,g.M)(d,"unstable_getServerSideProps"),F=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/AgendaSettingsPage",pathname:"/AgendaSettingsPage",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:k(),Document:i()},userland:d}),G=(0,t.U)({srcPage:"/AgendaSettingsPage",config:y,userland:d,routeModule:F,getStaticPaths:w,getStaticProps:v,getServerSideProps:x})}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[3317,9871,1302],()=>b(b.s=99862));module.exports=c})();