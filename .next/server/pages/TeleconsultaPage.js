"use strict";(()=>{var a={};a.id=6280,a.ids=[3220,6280],a.modules={498:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>l});var e=c(8732),f=c(82015),g=c(55489),h=c(22320),i=c(51302),j=c(19119),k=a([j]);j=(k.then?(await k)():k)[0];let l=({patient:a})=>{let[b,c]=(0,f.useState)(null),[d,k]=(0,f.useState)(null),[l,m]=(0,f.useState)(!0);return((0,f.useEffect)(()=>{(async()=>{m(!0);let[b,d]=await Promise.all([g.lV(a.id),h.z0(a.id)]);c(b[0]||null),k(d||null),m(!1)})()},[a.id]),l)?(0,e.jsxs)("div",{className:"space-y-4 p-4",children:[(0,e.jsx)(j.E,{className:"h-24 w-full"}),(0,e.jsx)(j.E,{className:"h-32 w-full"})]}):(0,e.jsxs)("div",{className:"space-y-4 text-sm text-slate-300 p-4",children:[(0,e.jsxs)("div",{className:"p-3 bg-slate-700/50 rounded-lg",children:[(0,e.jsxs)("h3",{className:"font-bold text-lg flex items-center mb-2 text-slate-100",children:[(0,e.jsx)(i.GvK,{className:"w-5 h-5 mr-2 text-teal-400"}),"Paciente"]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Queixa:"})," ",a.conditions?.[0]?.name||"N/A"]}),a.medicalAlerts&&(0,e.jsxs)("div",{className:"mt-2 p-2 bg-amber-500/20 text-amber-200 rounded flex items-start",children:[(0,e.jsx)(i.hcu,{className:"w-4 h-4 mr-2 mt-0.5 shrink-0"}),(0,e.jsx)("p",{className:"text-xs",children:a.medicalAlerts})]})]}),d&&(0,e.jsxs)("div",{className:"p-3 bg-slate-700/50 rounded-lg",children:[(0,e.jsxs)("h3",{className:"font-bold flex items-center mb-2 text-slate-100",children:[(0,e.jsx)(i.DTr,{className:"w-5 h-5 mr-2 text-teal-400"}),"Objetivos"]}),(0,e.jsx)("p",{className:"text-xs",children:d.treatmentGoals})]}),b&&(0,e.jsxs)("div",{className:"p-3 bg-slate-700/50 rounded-lg",children:[(0,e.jsxs)("h3",{className:"font-bold flex items-center mb-2 text-slate-100",children:[(0,e.jsx)(i.iUU,{className:"w-5 h-5 mr-2 text-teal-400"}),"\xdaltima Sess\xe3o (",b.date,")"]}),(0,e.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"S:"})," ",b.subjective]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"A:"})," ",b.assessment]})]})]})]})};d()}catch(a){d(a)}})},6439:(a,b,c)=>{c.d(b,{d:()=>e});var d=c(82015);function e(a,b){let[c,e]=(0,d.useState)(a);return c}},6451:(a,b,c)=>{c.d(b,{F:()=>g});var d=c(82015),e=c(75355),f=c(99597);let g=()=>{let[a,b]=(0,d.useState)([]),[c,g]=(0,d.useState)([]),[h,i]=(0,d.useState)(!0),[j,k]=(0,d.useState)(null),{showToast:l}=(0,f.dj)(),m=(0,d.useCallback)(async()=>{i(!0);try{let{exercises:a,categories:c}=await e.xY();b(a),g(c),k(null)}catch(a){k(a),l("Falha ao carregar exerc\xedcios.","error")}finally{i(!1)}},[l]);(0,d.useEffect)(()=>{m()},[m]);let n=(0,d.useMemo)(()=>[...new Set(a.flatMap(a=>a.bodyParts))].sort((a,b)=>a.localeCompare(b)),[a]),o=(0,d.useMemo)(()=>[...new Set(a.flatMap(a=>a.equipment))].sort((a,b)=>a.localeCompare(b)),[a]),p=async a=>{try{await e.WV(a),l("Exerc\xedcio adicionado com sucesso!","success"),await m()}catch{l("Falha ao adicionar exerc\xedcio.","error")}},q=async a=>{try{await e.O7(a),l("Exerc\xedcio atualizado com sucesso!","success"),await m()}catch{l("Falha ao atualizar exerc\xedcio.","error")}},r=async a=>{try{await e.C_(a),l("Exerc\xedcio exclu\xeddo com sucesso!","success"),await m()}catch{l("Falha ao excluir exerc\xedcio.","error")}},s=async a=>{try{await e.Ah(a),l(`Grupo "${a}" criado com sucesso!`,"success"),await m()}catch{l("Falha ao criar grupo.","error")}},t=async(a,b)=>{try{await e.st(a,b),l("Grupo renomeado com sucesso!","success"),await m()}catch{l("Falha ao renomear grupo.","error")}},u=async(a,b)=>{try{await e.CC(a,b),l(`Grupo "${a}" copiado para "${b}"!`,"success"),await m()}catch{l("Falha ao copiar grupo.","error")}},v=async a=>{try{await e.K7(a),l(`Grupo "${a}" e seus exerc\xedcios foram exclu\xeddos.`,"success"),await m()}catch{l("Falha ao excluir grupo.","error")}};return{exercises:a,categories:c,isLoading:h,error:j,refetch:m,addExercise:p,updateExercise:q,deleteExercise:r,addCategory:s,updateCategory:t,copyCategory:u,deleteCategory:v,uniqueBodyParts:n,uniqueEquipment:o}}},8732:a=>{a.exports=require("react/jsx-runtime")},10775:(a,b,c)=>{c.d(b,{A:()=>g});var d=c(8732),e=c(82015);let f={front:`
        M100,20 C115,20 125,30 125,45 S115,70 100,70 S75,60 75,45 S85,20 100,20 Z
        M100,70 L100,80
        M100,80 C130,80 140,90 140,120 L140,180
        M100,80 C70,80 60,90 60,120 L60,180
        M140,120 L160,120 L165,250 L155,250 Z
        M60,120 L40,120 L35,250 L45,250 Z
        M100,180 C120,180 125,185 125,200 L125,350 L115,350 L115,480 L125,490 L125,500 L105,500 Z
        M100,180 C80,180 75,185 75,200 L75,350 L85,350 L85,480 L75,490 L75,500 L95,500 Z
    `,back:`
        M100,20 C115,20 125,30 125,45 S115,70 100,70 S75,60 75,45 S85,20 100,20 Z
        M100,70 L100,80
        M100,80 C130,80 140,90 140,120 L140,180
        M100,80 C70,80 60,90 60,120 L60,180
        M140,120 L160,120 L165,250 L155,250 Z
        M60,120 L40,120 L35,250 L45,250 Z
        M100,180 C120,180 125,185 125,200 L125,350 L115,350 L115,480 L125,490 L125,500 L105,500 Z
        M100,180 C80,180 75,185 75,200 L75,350 L85,350 L85,480 L75,490 L75,500 L95,500 Z
        M100,85 L100,175
    `},g=({points:a,onMapClick:b,onPointClick:c})=>{let[g,h]=(0,e.useState)(null),i=(0,e.useRef)(null),j=()=>{h(null)};return(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("div",{className:"flex justify-center gap-4",children:["front","back"].map(e=>(0,d.jsxs)("div",{className:"w-1/2",children:[(0,d.jsx)("h4",{className:"text-center font-semibold text-sm text-slate-600 mb-1 capitalize",children:"front"===e?"Frente":"Costas"}),(0,d.jsxs)("svg",{ref:i,viewBox:"0 0 200 500",onClick:a=>((a,c)=>{if(!i.current)return;let d=i.current.getBoundingClientRect();b((a.clientX-d.left)/d.width*100,(a.clientY-d.top)/d.height*100,c)})(a,e),className:"w-full cursor-crosshair",children:[(0,d.jsx)("path",{d:f[e],className:"fill-slate-200",stroke:"#94a3b8",strokeWidth:"1"}),a.filter(a=>a.bodyPart===e).map(a=>(0,d.jsx)("circle",{cx:`${a.x}%`,cy:`${a.y}%`,r:"5",className:`cursor-pointer transition-all hover:r-7 ${(a=>a<=3?"fill-green-500/80 stroke-green-700":a<=6?"fill-yellow-500/80 stroke-yellow-700":"fill-red-500/80 stroke-red-700")(a.intensity)}`,strokeWidth:"1.5",onClick:b=>{b.stopPropagation(),c(a)},onMouseEnter:b=>((a,b)=>{h({content:`Intensidade: ${b.intensity}/10
Tipo: ${b.type}
Data: ${new Date(b.date).toLocaleDateString()}`,x:a.pageX,y:a.pageY})})(b,a),onMouseLeave:j},a.id))]})]},e))}),g&&(0,d.jsx)("div",{style:{top:g.y,left:g.x},className:"absolute z-10 p-2 text-xs text-white bg-slate-800 rounded-md shadow-lg pointer-events-none transform -translate-y-full -translate-x-1/2 whitespace-pre-wrap",children:g.content})]})}},19119:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{E:()=>h});var e=c(8732),f=c(71253),g=a([f]);function h({className:a,...b}){return(0,e.jsx)("div",{className:(0,f.cn)("animate-pulse rounded-md bg-muted",a),...b})}f=(g.then?(await g)():g)[0],d()}catch(a){d(a)}})},22320:(a,b,c)=>{c.d(b,{Fq:()=>h,td:()=>i,z0:()=>g});var d=c(92273),e=c(40396);let f=a=>new Promise(b=>setTimeout(b,a)),g=async a=>{await f(300);let b=d.db.getTreatmentPlans().find(b=>b.patientId===a);if(b){let a=await h(b.id);return{...b,exercises:a}}},h=async a=>(await f(300),d.db.getExercisePrescriptions().filter(b=>b.treatmentPlanId===a)),i=async(a,b)=>{await f(400);let c=d.db.getTreatmentPlans(),g=c.findIndex(b=>b.patientId===a);if(g>-1){let a=c[g],f=(b.exercises||[]).map((b,c)=>({id:`ex_${Date.now()}_${c}`,treatmentPlanId:a.id,exerciseName:b.exerciseName,sets:b.sets,repetitions:b.repetitions,resistanceLevel:"A definir",progressionCriteria:"A definir"})),h={...a,treatmentGoals:b.treatmentGoals||a.treatmentGoals,exercises:f.length>0?f:a.exercises};return d.db.updateTreatmentPlan(h),d.db.setExercisePrescriptionsForPlan(a.id,f),e.g.emit("treatmentPlans:changed"),h}throw Error("Plano de tratamento n\xe3o encontrado para este paciente.")}},33873:a=>{a.exports=require("path")},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},42621:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>s});var e=c(8732),f=c(82015),g=c(54822),h=c(28471),i=c(7976),j=c(76841),k=c(99597),l=c(51302),m=c(55657),n=c(99487),o=c(55489),p=c(6439),q=c(84313),r=a([n]);n=(r.then?(await r)():r)[0];let s=()=>{let{appointmentId:a}=g.useParams(),b=g.useNavigate(),{showToast:c}=(0,k.dj)(),{appointments:d,patients:r,refetch:s}=(0,h.Ez)(),[t,u]=(0,f.useState)(null),[v,w]=(0,f.useState)(null),[x,y]=(0,f.useState)(null),[z,A]=(0,f.useState)(!0),[B,C]=(0,f.useState)(!0),[D,E]=(0,f.useState)(0),[F,G]=(0,f.useState)(!1),[H,I]=(0,f.useState)(null),[J,K]=(0,f.useState)({subjective:"",objective:"",assessment:"",plan:""}),[L,M]=(0,f.useState)(!1),N=(0,f.useRef)(null),O=(0,p.d)(J,2e3);(0,f.useEffect)(()=>{let b=d.find(b=>b.id===a);if(b){u(b);let a=r.find(a=>a.id===b.patientId);a&&w(a)}},[a,d,r]),(0,f.useEffect)(()=>{(async()=>{if(v&&t&&O&&!Object.values(O).every(a=>""===a||void 0===a)){M(!0);try{await o.Cq({...O,patientId:v.id,date:new Date().toLocaleDateString("pt-BR"),sessionNumber:t.sessionNumber}),c("Anota\xe7\xf5es salvas automaticamente.","info")}catch(a){c("Erro ao salvar anota\xe7\xf5es.","error")}finally{M(!1)}}})()},[O,v,t,c]);let P=(0,f.useCallback)(()=>{x&&(x.getTracks().forEach(a=>a.stop()),y(null)),N.current&&clearInterval(N.current)},[x]);return((0,f.useEffect)(()=>{let a=async()=>{try{let a=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});y(a),N.current=window.setInterval(()=>E(a=>a+1),1e3)}catch(a){console.error("Error accessing media devices.",a),c("Permiss\xe3o para c\xe2mera/microfone negada.","error"),b("/agenda")}};return q.T.getSettings().teleconsultaEnabled?a():(c("O m\xf3dulo de Teleconsulta est\xe1 desativado.","error"),b("/agenda",{replace:!0})),P},[b,c,P]),t&&v)?(0,e.jsxs)("div",{className:"flex h-full bg-slate-900 text-white -m-8",children:[(0,e.jsxs)("main",{className:"flex-1 flex flex-col p-4 overflow-hidden",children:[(0,e.jsxs)("header",{className:"flex justify-between items-center mb-4",children:[(0,e.jsxs)("h1",{className:"text-xl font-bold truncate",children:["Teleconsulta: ",v.name]}),(0,e.jsxs)("div",{className:"flex items-center gap-4",children:[(0,e.jsxs)("div",{className:"bg-red-500/80 text-white px-3 py-1 rounded-md text-sm font-semibold flex items-center",children:[(0,e.jsx)("div",{className:"w-2 h-2 bg-white rounded-full mr-2 animate-pulse"}),(0,e.jsx)("span",{children:"REC"}),(0,e.jsx)("span",{className:"ml-2 font-mono",children:(a=>{let b=Math.floor(a/60).toString().padStart(2,"0"),c=(a%60).toString().padStart(2,"0");return`${b}:${c}`})(D)})]}),(0,e.jsx)("button",{onClick:()=>{document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),G(!1)):(document.documentElement.requestFullscreen(),G(!0))},className:"p-2 hover:bg-slate-700 rounded-full",children:F?(0,e.jsx)(l.Xjb,{}):(0,e.jsx)(l.hz4,{})})]})]}),(0,e.jsx)(m.A,{patientStream:x,therapistStream:x,isTherapistCameraOn:B,sharedContent:H}),(0,e.jsx)("footer",{className:"mt-4",children:(0,e.jsx)(j.A,{isMicOn:z,isCameraOn:B,onToggleMic:()=>{x?.getAudioTracks().forEach(a=>a.enabled=!z),A(!z)},onToggleCamera:()=>{x?.getVideoTracks().forEach(a=>a.enabled=!B),C(!B)},onEndCall:()=>{P(),b(`/patients/${v?.id}`)}})})]}),(0,e.jsx)("aside",{className:"w-96 bg-slate-800 border-l border-slate-700 flex flex-col",children:(0,e.jsx)(n.A,{patient:v,onShareContent:I,sessionNote:J,onNoteChange:K,isSaving:L})})]}):(0,e.jsx)(i.A,{})};d()}catch(a){d(a)}})},43069:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{config:()=>s,default:()=>o,getServerSideProps:()=>r,getStaticPaths:()=>q,getStaticProps:()=>p,handler:()=>A,reportWebVitals:()=>t,routeModule:()=>z,unstable_getServerProps:()=>x,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>w,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>u});var e=c(63885),f=c(80237),g=c(81413),h=c(3317),i=c.n(h),j=c(76195),k=c.n(j),l=c(42621),m=c(12289),n=a([l]);l=(n.then?(await n)():n)[0];let o=(0,g.M)(l,"default"),p=(0,g.M)(l,"getStaticProps"),q=(0,g.M)(l,"getStaticPaths"),r=(0,g.M)(l,"getServerSideProps"),s=(0,g.M)(l,"config"),t=(0,g.M)(l,"reportWebVitals"),u=(0,g.M)(l,"unstable_getStaticProps"),v=(0,g.M)(l,"unstable_getStaticPaths"),w=(0,g.M)(l,"unstable_getStaticParams"),x=(0,g.M)(l,"unstable_getServerProps"),y=(0,g.M)(l,"unstable_getServerSideProps"),z=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/TeleconsultaPage",pathname:"/TeleconsultaPage",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:k(),Document:i()},userland:l}),A=(0,m.U)({srcPage:"/TeleconsultaPage",config:s,userland:l,routeModule:z,getStaticPaths:q,getStaticProps:p,getServerSideProps:r});d()}catch(a){d(a)}})},44396:(a,b,c)=>{c.d(b,{A:()=>g});var d=c(8732),e=c(82015),f=c(51302);let g=({value:a,onChange:b,rows:c=3,placeholder:g,disabled:h=!1})=>{let i=(0,e.useRef)(null),j=c=>{let d=i.current;if(!d||h)return;let e="",f=d.selectionStart,g=d.selectionEnd,j=a.substring(f,g),k="";if("list"===c){let b=a.lastIndexOf("\n",f-1)+1,c=a.substring(0,b),d=a.substring(b,g),e=a.substring(g),h=d.split("\n"),i=h.every(a=>a.trim().startsWith("* ")),j=h.map(a=>i?a.replace(/^\s*\*\s?/,""):a.trim()?`* ${a}`:a).join("\n");k=`${c}${j}${e}`}else{e="bold"===c?"**":"*";let b=`${e}${j}${e}`;k=`${a.substring(0,f)}${b}${a.substring(g)}`}b(k),setTimeout(()=>{d.focus(),"list"!==c&&(d.selectionStart=f+e.length,d.selectionEnd=g+e.length)},0)};return(0,d.jsxs)("div",{className:"flex flex-col h-full",children:[(0,d.jsxs)("div",{className:`flex items-center gap-2 border border-b-0 border-slate-300 p-2 rounded-t-lg ${h?"bg-slate-200":"bg-slate-50"}`,children:[(0,d.jsx)("button",{type:"button",onClick:()=>j("bold"),className:"p-1.5 rounded hover:bg-slate-200 disabled:opacity-50",title:"Negrito (Ctrl+B)",disabled:h,children:(0,d.jsx)(f.yN4,{className:"w-4 h-4"})}),(0,d.jsx)("button",{type:"button",onClick:()=>j("italic"),className:"p-1.5 rounded hover:bg-slate-200 disabled:opacity-50",title:"It\xe1lico (Ctrl+I)",disabled:h,children:(0,d.jsx)(f.J20,{className:"w-4 h-4"})}),(0,d.jsx)("button",{type:"button",onClick:()=>j("list"),className:"p-1.5 rounded hover:bg-slate-200 disabled:opacity-50",title:"Lista",disabled:h,children:(0,d.jsx)(f.B8B,{className:"w-4 h-4"})})]}),(0,d.jsx)("textarea",{ref:i,value:a,onChange:a=>b(a.target.value),rows:c,placeholder:g,className:`w-full p-2 border border-slate-300 rounded-b-lg focus:outline-none focus:ring-1 focus:ring-sky-500 text-sm flex-1 ${h?"bg-slate-100 cursor-not-allowed":""}`,"aria-label":"Editor de Texto do Relat\xf3rio",disabled:h})]})}},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},48198:(a,b,c)=>{c.d(b,{A:()=>h});var d=c(8732),e=c(82015),f=c(6451),g=c(51302);let h=({onShare:a})=>{let{exercises:b,isLoading:c}=(0,f.F)(),[h,i]=(0,e.useState)(""),[j,k]=(0,e.useState)(null),l=(0,e.useMemo)(()=>h?b.filter(a=>a.name.toLowerCase().includes(h.toLowerCase())||a.category.toLowerCase().includes(h.toLowerCase())):b.slice(0,20),[b,h]);return(0,d.jsxs)("div",{className:"p-4 flex flex-col h-full",children:[(0,d.jsxs)("div",{className:"relative mb-4",children:[(0,d.jsx)(g.vji,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,d.jsx)("input",{type:"text",placeholder:"Buscar exerc\xedcio...",value:h,onChange:a=>i(a.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-200"})]}),(0,d.jsx)("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2 space-y-2",children:c?(0,d.jsx)("p",{children:"Carregando..."}):l.map(a=>(0,d.jsxs)("div",{onClick:()=>k(a),className:`p-2 rounded-md cursor-pointer ${j?.id===a.id?"bg-teal-500/20":"hover:bg-slate-700"}`,children:[(0,d.jsx)("p",{className:"font-semibold text-sm text-slate-200",children:a.name}),(0,d.jsx)("p",{className:"text-xs text-slate-400",children:a.category})]},a.id))}),j&&(0,d.jsxs)("div",{className:"mt-4 pt-4 border-t border-slate-700",children:[(0,d.jsx)("h4",{className:"font-bold text-slate-100",children:j.name}),(0,d.jsx)("p",{className:"text-xs text-slate-300 mt-1",children:j.description}),(0,d.jsxs)("button",{onClick:()=>a(j),className:"w-full mt-3 flex items-center justify-center bg-teal-500 hover:bg-teal-600 text-white font-semibold py-2 px-4 rounded-lg",children:[(0,d.jsx)(g._HI,{className:"w-4 h-4 mr-2"})," Compartilhar com Paciente"]})]})]})}},50802:a=>{a.exports=import("clsx")},54822:a=>{a.exports=require("react-router-dom")},55489:(a,b,c)=>{c.d(b,{Cq:()=>i,gp:()=>h,lV:()=>g});var d=c(92273),e=c(40396);let f=a=>new Promise(b=>setTimeout(b,a)),g=async a=>(await f(300),[...d.db.getSoapNotes()].filter(b=>b.patientId===a).sort((a,b)=>new Date(b.date.split("/").reverse().join("-")).getTime()-new Date(a.date.split("/").reverse().join("-")).getTime())),h=async(a,b)=>{await f(400);let c={id:`note_${Date.now()}`,patientId:a,therapist:"Dr. Roberto",...b};return d.db.saveSoapNote(c),e.g.emit("notes:changed"),c},i=async a=>{let b;return await f(300),b=a.id?{...d.db.getSoapNotes().find(b=>b.id===a.id),...a}:{id:`note_${Date.now()}`,therapist:"Dr. Roberto",date:new Date().toLocaleDateString("pt-BR"),subjective:"",objective:"",assessment:"",plan:"",...a},d.db.saveSoapNote(b),e.g.emit("notes:changed"),b}},55657:(a,b,c)=>{c.d(b,{A:()=>i});var d=c(8732),e=c(82015),f=c(51302);let g=({stream:a,isMuted:b,isCameraOn:c,username:g})=>{let h=(0,e.useRef)(null);return(0,e.useEffect)(()=>{h.current&&a&&(h.current.srcObject=a)},[a]),(0,d.jsxs)("div",{className:"w-full h-full bg-slate-800 flex items-center justify-center relative",children:[c?(0,d.jsx)("video",{ref:h,autoPlay:!0,playsInline:!0,muted:b,className:"w-full h-full object-cover"}):(0,d.jsxs)("div",{className:"flex flex-col items-center text-slate-400",children:[(0,d.jsx)(f.KJW,{className:"w-16 h-16"}),(0,d.jsx)("p",{className:"mt-2 font-semibold",children:g}),(0,d.jsxs)("div",{className:"mt-1 flex items-center text-xs bg-slate-700 px-2 py-1 rounded-full",children:[(0,d.jsx)(f.$93,{className:"w-3 h-3 mr-1.5"}),"C\xe2mera desligada"]})]}),(0,d.jsx)("div",{className:"absolute bottom-2 left-2 bg-black/50 text-white text-xs px-2 py-1 rounded-md",children:g})]})};var h=c(10775);let i=({patientStream:a,therapistStream:b,isTherapistCameraOn:c,sharedContent:e})=>(0,d.jsxs)("div",{className:"flex-1 bg-black rounded-lg overflow-hidden relative",children:[e?(()=>{if(!e)return null;switch(e.type){case"exercise":return(0,d.jsxs)("div",{className:"w-full h-full bg-black flex flex-col items-center justify-center p-4",children:[(0,d.jsx)("div",{className:"w-full max-w-2xl aspect-video bg-slate-800 rounded-lg overflow-hidden",children:e.data.media.videoUrl?(0,d.jsx)("video",{src:e.data.media.videoUrl,controls:!0,autoPlay:!0,loop:!0,className:"w-full h-full object-contain"}):(0,d.jsxs)("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:[(0,d.jsx)(f.fmr,{className:"w-16 h-16 mb-4"}),(0,d.jsx)("p",{children:"Este exerc\xedcio n\xe3o possui v\xeddeo."})]})}),(0,d.jsx)("h3",{className:"text-xl font-bold mt-4",children:e.data.name}),(0,d.jsx)("p",{className:"text-slate-300",children:e.data.description})]});case"painMap":return(0,d.jsxs)("div",{className:"w-full h-full bg-slate-100 flex flex-col items-center justify-center p-4",children:[(0,d.jsx)("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Mapa de Dor do Paciente"}),(0,d.jsx)("div",{className:"w-full max-w-sm",children:(0,d.jsx)(h.A,{points:e.data||[],onMapClick:()=>{},onPointClick:()=>{}})})]});default:return null}})():(0,d.jsx)(g,{stream:a,isMuted:!1,isCameraOn:!0,username:"Paciente (Simulado)"}),(0,d.jsx)("div",{className:"absolute bottom-4 right-4 w-64 h-40 bg-black rounded-lg overflow-hidden border-2 border-slate-700 shadow-lg",children:(0,d.jsx)(g,{stream:b,isMuted:!0,isCameraOn:c,username:"Fisioterapeuta"})})]})},56472:a=>{a.exports=require("@opentelemetry/api")},71253:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{cn:()=>h});var e=c(50802),f=c(75979),g=a([e,f]);function h(...a){return(0,f.twMerge)((0,e.clsx)(a))}[e,f]=g.then?(await g)():g,d()}catch(a){d(a)}})},75355:(a,b,c)=>{c.d(b,{Ah:()=>m,CC:()=>o,C_:()=>l,K7:()=>p,O7:()=>k,WV:()=>j,st:()=>n,t5:()=>i,xY:()=>h});var d=c(4183);let e=[...d.St],f=[...new Set(d.St.map(a=>a.category))].sort(),g=a=>new Promise(b=>setTimeout(b,a)),h=async()=>(await g(500),{exercises:[...e].sort((a,b)=>a.name.localeCompare(b.name)),categories:[...f]}),i=async a=>(await g(50),e.find(b=>b.name.toLowerCase()===a.toLowerCase())),j=async a=>{await g(400);let b={id:`ex_${Date.now()}`,...a};return f.includes(b.category)||(f.push(b.category),f.sort()),e.unshift(b),b},k=async a=>(await g(400),e=e.map(b=>b.id===a.id?a:b),f.includes(a.category)||(f.push(a.category),f.sort()),a),l=async a=>{await g(400),e=e.filter(b=>b.id!==a)},m=async a=>{await g(100),f.includes(a)||(f.push(a),f.sort())},n=async(a,b)=>{await g(200);let c=f.indexOf(a);c>-1&&(f[c]=b,f.sort()),e=e.map(c=>c.category===a?{...c,category:b}:c)},o=async(a,b)=>{await g(300),f.includes(b)||(f.push(b),f.sort());let c=e.filter(b=>b.category===a).map(a=>({...a,id:`ex_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:`${a.name}`,category:b}));e.push(...c)},p=async a=>{await g(200),f=f.filter(b=>b!==a),e=e.filter(b=>b.category!==a)}},75979:a=>{a.exports=import("tailwind-merge")},76841:(a,b,c)=>{c.d(b,{A:()=>g});var d=c(8732);c(82015);var e=c(51302);let f=({onClick:a,children:b,className:c="",title:e,disabled:f=!1})=>(0,d.jsx)("button",{onClick:a,title:e,disabled:f,className:`p-3 rounded-full transition-colors ${c}`,children:b}),g=({isMicOn:a,isCameraOn:b,onToggleMic:c,onToggleCamera:g,onEndCall:h})=>(0,d.jsxs)("div",{className:"flex justify-center items-center gap-4 bg-slate-800/50 p-2 rounded-xl max-w-md mx-auto",children:[(0,d.jsx)(f,{onClick:c,className:a?"bg-slate-700 hover:bg-slate-600":"bg-red-500 hover:bg-red-600",title:a?"Desativar microfone":"Ativar microfone",children:a?(0,d.jsx)(e.GOn,{className:"w-6 h-6"}):(0,d.jsx)(e.jjZ,{className:"w-6 h-6"})}),(0,d.jsx)(f,{onClick:g,className:b?"bg-slate-700 hover:bg-slate-600":"bg-red-500 hover:bg-red-600",title:b?"Desativar c\xe2mera":"Ativar c\xe2mera",children:b?(0,d.jsx)(e.CeX,{className:"w-6 h-6"}):(0,d.jsx)(e.$93,{className:"w-6 h-6"})}),(0,d.jsx)(f,{className:"bg-slate-700 hover:bg-slate-600 disabled:opacity-50",title:"Compartilhar tela (em breve)",disabled:!0,children:(0,d.jsx)(e.GIu,{className:"w-6 h-6"})}),(0,d.jsx)(f,{onClick:h,className:"bg-red-600 hover:bg-red-700",title:"Encerrar chamada",children:(0,d.jsx)(e.Q3b,{className:"w-6 h-6"})})]})},82015:a=>{a.exports=require("react")},82708:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(8732);c(82015);var e=c(44396);let f=({note:a,onNoteChange:b})=>{let c=(c,d)=>{b({...a,[c]:d})};return(0,d.jsxs)("div",{className:"p-4 space-y-4 text-sm",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"font-semibold text-sky-400",children:"S (Subjetivo)"}),(0,d.jsx)(e.A,{value:a.subjective||"",onChange:a=>c("subjective",a),rows:3,placeholder:"Relato do paciente..."})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"font-semibold text-sky-400",children:"O (Objetivo)"}),(0,d.jsx)(e.A,{value:a.objective||"",onChange:a=>c("objective",a),rows:3,placeholder:"Observa\xe7\xf5es da sess\xe3o..."})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"font-semibold text-sky-400",children:"A (Avalia\xe7\xe3o)"}),(0,d.jsx)(e.A,{value:a.assessment||"",onChange:a=>c("assessment",a),rows:3,placeholder:"An\xe1lise da evolu\xe7\xe3o..."})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"font-semibold text-sky-400",children:"P (Plano)"}),(0,d.jsx)(e.A,{value:a.plan||"",onChange:a=>c("plan",a),rows:3,placeholder:"Pr\xf3ximos passos..."})]})]})}},84313:(a,b,c)=>{c.d(b,{T:()=>h});var d=c(72393);let e="fisioflow_scheduling_settings",f={limits:{weekday:[{id:"wd1",startTime:"07:00",endTime:"13:00",limit:3},{id:"wd2",startTime:"13:00",endTime:"15:00",limit:1},{id:"wd3",startTime:"15:00",endTime:"21:00",limit:4}],saturday:[{id:"sat1",startTime:"07:00",endTime:"13:00",limit:3}]},maxEvaluationsPerSlot:1,teleconsultaEnabled:!1};class g{getSettings(){try{let a=localStorage.getItem(e);if(a){let b=JSON.parse(a);return{...f,...b}}}catch(a){console.error("Failed to parse scheduling settings from localStorage",a)}return f}saveSettings(a){try{a.limits.weekday.sort((a,b)=>a.startTime.localeCompare(b.startTime)),a.limits.saturday.sort((a,b)=>a.startTime.localeCompare(b.startTime)),localStorage.setItem(e,JSON.stringify(a))}catch(a){console.error("Failed to save scheduling settings to localStorage",a)}}getSlotOccupancy(a,b,c){let e=this.getSettings(),f=a.getDay(),g=a.toTimeString().slice(0,5),h=(6===f?e.limits.saturday:e.limits.weekday).find(a=>g>=a.startTime&&g<a.endTime)||{limit:0},i=b.filter(b=>(!c||b.id!==c)&&b.startTime.getTime()===a.getTime()),j=i.filter(a=>a.type===d.YY.Evaluation),k=i.length>=h.limit,l=j.length>=e.maxEvaluationsPerSlot;return{patientCount:i.length,patientLimit:h.limit,evalCount:j.length,evalLimit:e.maxEvaluationsPerSlot,isFull:0===h.limit||k,isPatientLimitFull:0===h.limit||k,isEvalLimitFull:l}}}let h=new g},89996:(a,b,c)=>{c.d(b,{A:()=>g});var d=c(8732);c(82015);var e=c(10775),f=c(51302);let g=({patient:a,onShare:b})=>(0,d.jsxs)("div",{className:"p-4 flex flex-col h-full",children:[(0,d.jsx)("h3",{className:"text-lg font-bold text-slate-100 mb-2",children:"Mapa de Dor"}),(0,d.jsx)("p",{className:"text-xs text-slate-400 mb-4",children:"Visualize o mapa de dor registrado pelo paciente. Voc\xea pode compartilhar esta tela para discutir em tempo real."}),(0,d.jsx)("div",{className:"flex-1 bg-slate-100 rounded-lg p-2",children:(0,d.jsx)(e.A,{points:a.painPoints||[],onMapClick:()=>{},onPointClick:()=>{}})}),(0,d.jsxs)("button",{onClick:()=>b(a.painPoints),className:"w-full mt-4 flex items-center justify-center bg-teal-500 hover:bg-teal-600 text-white font-semibold py-2 px-4 rounded-lg",children:[(0,d.jsx)(f._HI,{className:"w-4 h-4 mr-2"})," Compartilhar Tela do Mapa"]})]})},93939:a=>{a.exports=require("@supabase/supabase-js")},99487:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>n});var e=c(8732),f=c(82015),g=c(51302),h=c(498),i=c(48198),j=c(89996),k=c(82708),l=a([h]);h=(l.then?(await l)():l)[0];let m=({icon:a,label:b,isActive:c,onClick:d})=>(0,e.jsxs)("button",{onClick:d,className:`flex-1 flex flex-col items-center justify-center p-3 text-xs font-medium border-b-2 transition-colors ${c?"border-teal-400 text-teal-300 bg-slate-700/50":"border-transparent text-slate-400 hover:bg-slate-700"}`,title:b,children:[(0,e.jsx)(a,{className:"w-5 h-5 mb-1"}),(0,e.jsx)("span",{className:"truncate",children:b})]}),n=({patient:a,onShareContent:b,sessionNote:c,onNoteChange:d,isSaving:l})=>{let[n,o]=(0,f.useState)("info");return(0,e.jsxs)("div",{className:"flex flex-col h-full",children:[(0,e.jsxs)("nav",{className:"flex items-center border-b border-slate-700",children:[(0,e.jsx)(m,{icon:g.KJW,label:"Info Paciente",isActive:"info"===n,onClick:()=>o("info")}),(0,e.jsx)(m,{icon:g.O0M,label:"Exerc\xedcios",isActive:"exercises"===n,onClick:()=>o("exercises")}),(0,e.jsx)(m,{icon:g.sDd,label:"Mapa de Dor",isActive:"painMap"===n,onClick:()=>o("painMap")}),(0,e.jsx)(m,{icon:g.ZMX,label:"Anota\xe7\xf5es",isActive:"notes"===n,onClick:()=>o("notes")})]}),(0,e.jsxs)("div",{className:"flex-1 overflow-y-auto",children:["info"===n&&(0,e.jsx)(h.A,{patient:a}),"exercises"===n&&(0,e.jsx)(i.A,{onShare:a=>{b({type:"exercise",data:a})}}),"painMap"===n&&(0,e.jsx)(j.A,{patient:a,onShare:a=>{b({type:"painMap",data:a})}}),"notes"===n&&(0,e.jsx)(k.A,{note:c,onNoteChange:d})]}),(0,e.jsx)("footer",{className:"p-2 border-t border-slate-700 bg-slate-900 text-center text-xs text-slate-400",children:l?"Salvando anota\xe7\xf5es...":(0,e.jsxs)("span",{className:"flex items-center justify-center text-green-400",children:[(0,e.jsx)(g.rAV,{size:12,className:"mr-1.5"})," Anota\xe7\xf5es salvas"]})})]})};d()}catch(a){d(a)}})},99597:(a,b,c)=>{c.d(b,{dj:()=>g}),c(8732);var d=c(82015);c(54822);let e=(0,d.createContext)(void 0),f=(0,d.createContext)(void 0),g=()=>{let a=(()=>{let a=(0,d.useContext)(e);return void 0===a?{enabled:!1,logRouterChange:()=>{},logHookCall:()=>{},logContextAccess:()=>{}}:a})(),b=(0,d.useContext)(f);if(a.logContextAccess("ToastContext","useToast"),!b){let a=Error("useToast must be used within a ToastProvider");throw console.error("âŒ Toast Context Error:",a.message),a}return{showToast:b.showToast}}}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[3317,9871,1302,4183,7367,8471],()=>b(b.s=43069));module.exports=c})();