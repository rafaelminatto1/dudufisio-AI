"use strict";(()=>{var a={};a.id=1036,a.ids=[1036,3220],a.modules={8732:a=>{a.exports=require("react/jsx-runtime")},19119:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{E:()=>h});var e=c(8732),f=c(71253),g=a([f]);function h({className:a,...b}){return(0,e.jsx)("div",{className:(0,f.cn)("animate-pulse rounded-md bg-muted",a),...b})}f=(g.then?(await g)():g)[0],d()}catch(a){d(a)}})},25433:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{config:()=>s,default:()=>o,getServerSideProps:()=>r,getStaticPaths:()=>q,getStaticProps:()=>p,handler:()=>A,reportWebVitals:()=>t,routeModule:()=>z,unstable_getServerProps:()=>x,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>w,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>u});var e=c(63885),f=c(80237),g=c(81413),h=c(3317),i=c.n(h),j=c(76195),k=c.n(j),l=c(47493),m=c(12289),n=a([l]);l=(n.then?(await n)():n)[0];let o=(0,g.M)(l,"default"),p=(0,g.M)(l,"getStaticProps"),q=(0,g.M)(l,"getStaticPaths"),r=(0,g.M)(l,"getServerSideProps"),s=(0,g.M)(l,"config"),t=(0,g.M)(l,"reportWebVitals"),u=(0,g.M)(l,"unstable_getStaticProps"),v=(0,g.M)(l,"unstable_getStaticPaths"),w=(0,g.M)(l,"unstable_getStaticParams"),x=(0,g.M)(l,"unstable_getServerProps"),y=(0,g.M)(l,"unstable_getServerSideProps"),z=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/AuditLogPage",pathname:"/AuditLogPage",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:k(),Document:i()},userland:l}),A=(0,m.U)({srcPage:"/AuditLogPage",config:s,userland:l,routeModule:z,getStaticPaths:q,getStaticProps:p,getServerSideProps:r});d()}catch(a){d(a)}})},33873:a=>{a.exports=require("path")},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},42227:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(8732);c(82015);let e=({title:a,subtitle:b,children:c})=>(0,d.jsxs)("div",{className:"pb-8 md:flex md:items-center md:justify-between",children:[(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold leading-tight text-slate-900 tracking-tight",children:a}),(0,d.jsx)("p",{className:"mt-2 text-lg text-slate-600",children:b})]}),(0,d.jsx)("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:c})]})},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},46454:(a,b,c)=>{c.d(b,{U:()=>g});var d=c(82015),e=c(4183);let f=async()=>(await new Promise(a=>setTimeout(a,500)),[...e.T5].sort((a,b)=>b.timestamp.getTime()-a.timestamp.getTime())),g=({filters:a,currentPage:b,logsPerPage:c})=>{let[e,g]=(0,d.useState)([]),[h,i]=(0,d.useState)(!0),[j,k]=(0,d.useState)(null);(0,d.useEffect)(()=>{(async()=>{try{let a=await f();g(a)}catch(a){k(a)}finally{i(!1)}})()},[]);let l=(0,d.useMemo)(()=>["All",...Array.from(new Set(e.map(a=>a.action)))],[e]),m=(0,d.useMemo)(()=>e.filter(b=>{let c=b.user.toLowerCase().includes(a.user.toLowerCase())||b.details.toLowerCase().includes(a.user.toLowerCase()),d="All"===a.action||b.action===a.action,e=!a.date||new Date(b.timestamp).toISOString().split("T")[0]===a.date;return c&&d&&e}),[e,a]);return{logs:(0,d.useMemo)(()=>{let a=(b-1)*c;return m.slice(a,a+c)},[m,b,c]),totalLogs:m.length,isLoading:h,error:j,uniqueActions:l}}},47493:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>n});var e=c(8732),f=c(82015),g=c(51302),h=c(42227),i=c(46454),j=c(75876),k=c(19119),l=a([k]);k=(l.then?(await l)():l)[0];let m=({log:a})=>(0,e.jsxs)("tr",{className:"border-b border-slate-200",children:[(0,e.jsx)("td",{className:"p-4 whitespace-nowrap text-sm text-slate-500 font-mono",children:a.timestamp.toLocaleString("pt-BR")}),(0,e.jsx)("td",{className:"p-4 whitespace-nowrap",children:(0,e.jsx)("div",{className:"text-sm font-medium text-slate-900",children:a.user})}),(0,e.jsx)("td",{className:"p-4 whitespace-nowrap",children:(0,e.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${(a=>{let b=a.toLowerCase();return b.includes("create")||b.includes("assign")?"bg-sky-100 text-sky-800":b.includes("update")?"bg-purple-100 text-purple-800":b.includes("delete")?"bg-red-100 text-red-800":b.includes("login_success")?"bg-green-100 text-green-800":b.includes("failed")?"bg-yellow-100 text-yellow-800":b.includes("view")?"bg-blue-100 text-blue-800":b.includes("security")?"bg-orange-100 text-orange-800":"bg-slate-100 text-slate-800"})(a.action)}`,children:a.action})}),(0,e.jsx)("td",{className:"p-4 text-sm text-slate-600 max-w-md truncate",title:a.details,children:a.details})]}),n=()=>{let[a,b]=(0,f.useState)({date:"",user:"",action:"All"}),[c,d]=(0,f.useState)(1),{logs:l,totalLogs:n,isLoading:o,error:p,uniqueActions:q}=(0,i.U)({filters:a,currentPage:c,logsPerPage:15}),r=a=>{b(b=>({...b,[a.target.name]:a.target.value})),d(1)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(h.A,{title:"Trilha de Auditoria",subtitle:"Monitore todas as atividades importantes realizadas no sistema."}),(0,e.jsx)("div",{className:"bg-white p-4 rounded-t-2xl shadow-sm border-b border-slate-200",children:(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)(g.KJW,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,e.jsx)("input",{type:"text",name:"user",placeholder:"Buscar por usu\xe1rio ou detalhes...",value:a.user,onChange:r,className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500"})]}),(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)(g.ZUJ,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,e.jsx)("select",{name:"action",value:a.action,onChange:r,className:"appearance-none w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 bg-white",children:q.map(a=>(0,e.jsx)("option",{value:a,children:"All"===a?"Todas as A\xe7\xf5es":a},a))})]}),(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)(g.VvS,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,e.jsx)("input",{type:"date",name:"date",value:a.date,onChange:r,className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500"})]})]})}),(0,e.jsx)("div",{className:"overflow-x-auto bg-white shadow-sm",children:(0,e.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[(0,e.jsx)("thead",{className:"bg-slate-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{scope:"col",className:"p-4 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Data/Hora"}),(0,e.jsx)("th",{scope:"col",className:"p-4 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Usu\xe1rio"}),(0,e.jsx)("th",{scope:"col",className:"p-4 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"A\xe7\xe3o"}),(0,e.jsx)("th",{scope:"col",className:"p-4 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Detalhes"})]})}),(0,e.jsx)("tbody",{className:"bg-white divide-y divide-slate-200",children:o?Array.from({length:5}).map((a,b)=>(0,e.jsx)("tr",{children:(0,e.jsx)("td",{colSpan:4,className:"p-4",children:(0,e.jsx)(k.E,{className:"h-10 w-full"})})},b)):p?(0,e.jsx)("tr",{children:(0,e.jsx)("td",{colSpan:4,className:"text-center p-10 text-red-500",children:"Falha ao carregar logs de auditoria."})}):0===l.length?(0,e.jsx)("tr",{children:(0,e.jsx)("td",{colSpan:4,className:"text-center p-10 text-slate-500",children:"Nenhum log encontrado para os filtros aplicados."})}):l.map(a=>(0,e.jsx)(m,{log:a},a.id))})]})}),(0,e.jsx)(j.A,{currentPage:c,totalItems:n,itemsPerPage:15,onPageChange:d})]})};d()}catch(a){d(a)}})},50802:a=>{a.exports=import("clsx")},56472:a=>{a.exports=require("@opentelemetry/api")},71253:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{cn:()=>h});var e=c(50802),f=c(75979),g=a([e,f]);function h(...a){return(0,f.twMerge)((0,e.clsx)(a))}[e,f]=g.then?(await g)():g,d()}catch(a){d(a)}})},75876:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(8732);c(82015);var e=c(51302);let f=({currentPage:a,totalItems:b,itemsPerPage:c,onPageChange:f})=>{let g=Math.ceil(b/c);if(g<=1)return null;let h=()=>{a>1&&f(a-1)},i=()=>{a<g&&f(a+1)},j=Math.min(a*c,b);return(0,d.jsxs)("div",{className:"flex items-center justify-between bg-white px-4 py-3 sm:px-6 rounded-b-2xl shadow-sm",children:[(0,d.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,d.jsx)("button",{onClick:h,disabled:1===a,className:"relative inline-flex items-center rounded-md border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 disabled:opacity-50",children:"Anterior"}),(0,d.jsx)("button",{onClick:i,disabled:a===g,className:"relative ml-3 inline-flex items-center rounded-md border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 disabled:opacity-50",children:"Pr\xf3ximo"})]}),(0,d.jsxs)("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[(0,d.jsx)("div",{children:(0,d.jsxs)("p",{className:"text-sm text-slate-700",children:["Mostrando ",(0,d.jsx)("span",{className:"font-medium",children:(a-1)*c+1})," a ",(0,d.jsx)("span",{className:"font-medium",children:j})," de"," ",(0,d.jsx)("span",{className:"font-medium",children:b})," resultados"]})}),(0,d.jsx)("div",{children:(0,d.jsxs)("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[(0,d.jsxs)("button",{onClick:h,disabled:1===a,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-slate-400 ring-1 ring-inset ring-slate-300 hover:bg-slate-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[(0,d.jsx)("span",{className:"sr-only",children:"Anterior"}),(0,d.jsx)(e.JGc,{className:"h-5 w-5","aria-hidden":"true"})]}),(0,d.jsxs)("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-slate-700 ring-1 ring-inset ring-slate-300",children:["P\xe1gina ",a," de ",g]}),(0,d.jsxs)("button",{onClick:i,disabled:a===g,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-slate-400 ring-1 ring-inset ring-slate-300 hover:bg-slate-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[(0,d.jsx)("span",{className:"sr-only",children:"Pr\xf3ximo"}),(0,d.jsx)(e.c_$,{className:"h-5 w-5","aria-hidden":"true"})]})]})})]})]})}},75979:a=>{a.exports=import("tailwind-merge")},82015:a=>{a.exports=require("react")}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[3317,9871,1302,4183],()=>b(b.s=25433));module.exports=c})();