"use strict";(()=>{var a={};a.id=1373,a.ids=[1373,3220],a.modules={1424:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>x});var e=c(8732),f=c(82015),g=c(42227),h=c(97517),i=c(78628),j=c(60931),k=c(75935),l=c(31747),m=c(51302),n=c(28471),o=c(82189),p=c(47714),q=c(13003),r=c(17819),s=c(72393),t=c(26821),u=c(737),v=c(40396),w=a([h,p,q]);[h,p,q]=w.then?(await w)():w;let x=()=>{let{therapists:a,isLoading:b}=(0,n.Ez)(),[c,d]=(0,f.useState)([]),[w,x]=(0,f.useState)([]),[y,z]=(0,f.useState)(!0),A=(0,f.useCallback)(async()=>{z(!0);try{let a=new Date;a.setDate(a.getDate()-30);let[b,c]=await Promise.all([t.uE(),u.Xj(a,new Date)]);d(b),x(c)}catch(a){console.error("Failed to fetch dashboard data",a)}finally{z(!1)}},[]);(0,f.useEffect)(()=>{A();let a=()=>A();return v.g.on("patients:changed",a),v.g.on("appointments:changed",a),()=>{v.g.off("patients:changed",a),v.g.off("appointments:changed",a)}},[A]);let B=(0,f.useMemo)(()=>{let b=w.filter(a=>(a=>{let b=new Date;return a.getDate()===b.getDate()&&a.getMonth()===b.getMonth()&&a.getFullYear()===b.getFullYear()})(new Date(a.startTime))),d=new Map(a.map(a=>[a.id,a])),e=new Map(c.map(a=>[a.id,a]));return b.map(a=>{let b=e.get(a.patientId),c=d.get(a.therapistId);return{...a,therapistColor:c?.color||"slate",therapistName:c?.name||"Unknown",typeColor:s.q1[a.type]||"slate",patientPhone:b?.phone||"",patientMedicalAlerts:b?.medicalAlerts}})},[w,c,a]),{stats:C}=(0,r.A)({patients:c,appointments:w});return(0,e.jsxs)("div",{className:"space-y-8",children:[(0,e.jsx)(g.A,{title:"Dashboard Administrativo",subtitle:"Vis\xe3o 360\xb0 do neg\xf3cio com m\xe9tricas financeiras, operacionais e cl\xednicas."}),(0,e.jsxs)("div",{className:"space-y-8",children:[(0,e.jsx)(h.A,{stats:C,isLoading:b||y}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Resumo do Dia"}),(0,e.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,e.jsx)(o.A,{appointments:B}),(0,e.jsx)(p.A,{}),(0,e.jsx)(q.A,{})]})]}),(0,e.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,e.jsx)(i.A,{appointments:w}),(0,e.jsx)(j.A,{patients:c})]}),(0,e.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,e.jsxs)("div",{className:"lg:col-span-2 bg-white p-6 rounded-2xl shadow-sm",children:[(0,e.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center",children:[(0,e.jsx)(m.Ilq,{className:"w-5 h-5 mr-2 text-teal-500"})," Mapa de Calor de Agendamentos"]}),(0,e.jsx)(l.A,{appointments:w})]}),(0,e.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,e.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center",children:[(0,e.jsx)(m.zWC,{className:"w-5 h-5 mr-2 text-teal-500"})," Produtividade da Equipe"]}),(0,e.jsx)(k.A,{appointments:w,therapists:a})]})]})]})]})};d()}catch(a){d(a)}})},7548:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(8732);c(82015);var e=c(51302);let f=({title:a,value:b,icon:c,change:f,changeType:g,subtitle:h})=>{let i="increase"===g;return(0,d.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm hover:shadow-lg transition-shadow duration-300",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-slate-500 truncate",children:a}),(0,d.jsx)("p",{className:"text-3xl font-bold text-slate-800 mt-1",children:b})]}),(0,d.jsx)("div",{className:"bg-sky-100 text-sky-600 p-3 rounded-full",children:c})]}),(0,d.jsxs)("div",{className:"mt-2 flex items-center text-sm",children:[f&&(0,d.jsxs)("div",{className:`flex items-center font-semibold ${i?"text-green-600":"text-red-600"}`,children:[i?(0,d.jsx)(e.DoI,{className:"w-4 h-4"}):(0,d.jsx)(e.yd$,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:f}),(0,d.jsx)("span",{className:"text-slate-500 font-normal ml-1.5",children:"vs. m\xeas anterior"})]}),!f&&h&&(0,d.jsx)("p",{className:"text-slate-500",children:h})]})]})}},8307:a=>{a.exports=require("es-toolkit")},8732:a=>{a.exports=require("react/jsx-runtime")},12490:a=>{a.exports=require("es-toolkit/compat/isPlainObject")},13003:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>m});var e=c(8732),f=c(82015),g=c(86211),h=c(46423),i=c(51302),j=c(19119),k=a([j]);j=(k.then?(await k)():k)[0];let l={pain_point:(0,e.jsx)(i.$io,{className:"w-5 h-5 text-purple-500"}),exercise_feedback:(0,e.jsx)(i.O0M,{className:"w-5 h-5 text-green-500"}),new_message:(0,e.jsx)(i.$io,{className:"w-5 h-5 text-blue-500"})},m=()=>{let[a,b]=(0,f.useState)([]),[c,d]=(0,f.useState)(!0),k=(0,g.Z)();return(0,f.useEffect)(()=>{(async()=>{d(!0);let a=await h.L();b(a),d(!1)})()},[]),(0,e.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm flex flex-col h-full max-h-96",children:[(0,e.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center",children:[(0,e.jsx)(i.Ilq,{className:"w-5 h-5 mr-2 text-sky-500"}),"Atividade Recente"]}),c?(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(j.E,{className:"h-12 w-full rounded-lg"}),(0,e.jsx)(j.E,{className:"h-12 w-full rounded-lg"}),(0,e.jsx)(j.E,{className:"h-12 w-full rounded-lg"})]}):a.length>0?(0,e.jsx)("div",{className:"space-y-2 overflow-y-auto flex-1 -mr-2 pr-2",children:a.map(a=>(0,e.jsxs)("div",{onClick:()=>k(`/patients/${a.patientId}`),className:"p-2.5 rounded-lg flex items-center gap-3 hover:bg-slate-50 cursor-pointer transition-colors",children:[(0,e.jsx)("div",{className:"p-2 bg-slate-100 rounded-full",children:l[a.type]}),(0,e.jsxs)("div",{className:"flex-1",children:[(0,e.jsx)("p",{className:"font-medium text-sm text-slate-800",children:a.patientName}),(0,e.jsx)("p",{className:"text-xs text-slate-500",children:a.summary})]}),(0,e.jsx)("p",{className:"text-xs text-slate-400 self-start",children:(a=>{let b=Math.floor((new Date().getTime()-a.getTime())/1e3);if(b<60)return"agora";let c=Math.floor(b/60);if(c<60)return`h\xe1 ${c} min`;let d=Math.floor(c/60);if(d<24)return`h\xe1 ${d}h`;let e=Math.floor(d/24);return`h\xe1 ${e}d`})(a.timestamp)})]},a.id))}):(0,e.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-center text-slate-500",children:[(0,e.jsx)(i.Ilq,{className:"w-12 h-12 text-slate-300 mb-2"}),(0,e.jsx)("p",{className:"font-semibold",children:"Nenhuma atividade recente."})]})]})};d()}catch(a){d(a)}})},13261:a=>{a.exports=require("victory-vendor/d3-shape")},16844:a=>{a.exports=require("es-toolkit/compat/minBy")},17150:a=>{a.exports=require("es-toolkit/compat/maxBy")},17819:(a,b,c)=>{c.d(b,{A:()=>g});var d=c(82015),e=c(72393);let f=(a,b)=>{if(0===b)return a>0?{change:"+âˆž%",changeType:"increase"}:{};let c=(a-b)/b*100;return .1>Math.abs(c)?{}:{change:`${c>0?"+":""}${c.toFixed(1)}%`,changeType:c>=0?"increase":"decrease"}};function g({patients:a,appointments:b}){return{stats:(0,d.useMemo)(()=>{let c=new Date,d=new Date(c.getFullYear(),c.getMonth(),1),g=new Date(c.getFullYear(),c.getMonth()-1,1),h=b.filter(a=>a.status===e.y2.Completed&&new Date(a.startTime)>=d).reduce((a,b)=>a+b.value,0),i=b.filter(a=>{let b=new Date(a.startTime);return a.status===e.y2.Completed&&b>=g&&b<d}).reduce((a,b)=>a+b.value,0),j=a.filter(a=>new Date(a.registrationDate)>=d).length,k=a.filter(a=>{let b=new Date(a.registrationDate);return b>=g&&b<d}).length,l=a.filter(a=>"Active"===a.status).length,m=f(h,i),n=f(j,k);return{monthlyRevenue:{value:`R$ ${h.toLocaleString("pt-BR")}`,...m},activePatients:{value:l.toString(),subtitle:"Total em tratamento"},newPatientsThisMonth:{value:j.toString(),...n},avgSatisfaction:{value:"9.2/10",subtitle:"Baseado em 48 avalia\xe7\xf5es"}}},[a,b])}}},17889:a=>{a.exports=require("es-toolkit/compat/get")},19119:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{E:()=>h});var e=c(8732),f=c(71253),g=a([f]);function h({className:a,...b}){return(0,e.jsx)("div",{className:(0,f.cn)("animate-pulse rounded-md bg-muted",a),...b})}f=(g.then?(await g)():g)[0],d()}catch(a){d(a)}})},19643:a=>{a.exports=require("es-toolkit/compat/throttle")},20887:a=>{a.exports=require("es-toolkit/compat/last")},22326:a=>{a.exports=require("react-dom")},22544:a=>{a.exports=require("react-redux")},24584:a=>{a.exports=require("use-sync-external-store/shim/with-selector")},31747:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(8732),e=c(82015);let f=({appointments:a})=>{let b=(0,e.useMemo)(()=>{let b=["Domingo","Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado"].map(a=>({day:a,"8h":0,"9h":0,"10h":0,"11h":0,"12h":0,"13h":0,"14h":0,"15h":0,"16h":0,"17h":0,"18h":0,"19h":0}));return a.forEach(a=>{let c=a.startTime.getDay(),d=a.startTime.getHours();if(d>=8&&d<=19){let a=`${d}h`;b[c]&&"number"==typeof b[c][a]&&(b[c][a]+=1)}}),b.slice(1).concat(b.slice(0,1))},[a]),c=["8h","9h","10h","11h","12h","13h","14h","15h","16h","17h","18h","19h"];return(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full text-center text-xs",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"p-1"}),c.map(a=>(0,d.jsx)("th",{className:"p-1 font-normal text-slate-500",children:a},a))]})}),(0,d.jsx)("tbody",{children:b.map(a=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"p-1 font-medium text-slate-500 text-right pr-2",children:a.day.substring(0,3)}),c.map((b,c)=>{let e=a[b];return(0,d.jsx)("td",{className:"p-1",children:(0,d.jsx)("div",{className:`w-full h-6 rounded ${(a=>0===a?"bg-slate-100":a<=1?"bg-sky-200":a<=3?"bg-sky-400":"bg-sky-600")(e)}`,title:`${e} agendamentos`})},`${a.day}-${b}-${c}`)})]},a.day))})]})})}},33873:a=>{a.exports=require("path")},34562:a=>{a.exports=require("react-is")},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},41337:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{config:()=>s,default:()=>o,getServerSideProps:()=>r,getStaticPaths:()=>q,getStaticProps:()=>p,handler:()=>A,reportWebVitals:()=>t,routeModule:()=>z,unstable_getServerProps:()=>x,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>w,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>u});var e=c(63885),f=c(80237),g=c(81413),h=c(3317),i=c.n(h),j=c(76195),k=c.n(j),l=c(1424),m=c(12289),n=a([l]);l=(n.then?(await n)():n)[0];let o=(0,g.M)(l,"default"),p=(0,g.M)(l,"getStaticProps"),q=(0,g.M)(l,"getStaticPaths"),r=(0,g.M)(l,"getServerSideProps"),s=(0,g.M)(l,"config"),t=(0,g.M)(l,"reportWebVitals"),u=(0,g.M)(l,"unstable_getStaticProps"),v=(0,g.M)(l,"unstable_getStaticPaths"),w=(0,g.M)(l,"unstable_getStaticParams"),x=(0,g.M)(l,"unstable_getServerProps"),y=(0,g.M)(l,"unstable_getServerSideProps"),z=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/DashboardPage",pathname:"/DashboardPage",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:k(),Document:i()},userland:l}),A=(0,m.U)({srcPage:"/DashboardPage",config:s,userland:l,routeModule:z,getStaticPaths:q,getStaticProps:p,getServerSideProps:r});d()}catch(a){d(a)}})},42227:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(8732);c(82015);let e=({title:a,subtitle:b,children:c})=>(0,d.jsxs)("div",{className:"pb-8 md:flex md:items-center md:justify-between",children:[(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold leading-tight text-slate-900 tracking-tight",children:a}),(0,d.jsx)("p",{className:"mt-2 text-lg text-slate-600",children:b})]}),(0,d.jsx)("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:c})]})},45034:a=>{a.exports=require("es-toolkit/compat/omit")},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},46423:(a,b,c)=>{c.d(b,{L:()=>e});var d=c(4183);let e=async()=>(await new Promise(a=>setTimeout(a,400)),d.N.flatMap(a=>(a.painPoints||[]).map(b=>({...b,patient:a}))).sort((a,b)=>new Date(b.date).getTime()-new Date(a.date).getTime()).slice(0,5).map(a=>({id:`act_pp_${a.id}`,type:"pain_point",patientId:a.patient.id,patientName:a.patient.name,patientAvatarUrl:a.patient.avatarUrl,summary:`Registrou dor em uma \xe1rea (n\xedvel ${a.intensity})`,timestamp:new Date(a.date)})).sort((a,b)=>b.timestamp.getTime()-a.timestamp.getTime()))},47714:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>m});var e=c(8732),f=c(82015),g=c(86211),h=c(72393),i=c(63167),j=c(51302),k=c(19119),l=a([k]);k=(l.then?(await l)():l)[0];let m=()=>{let[a,b]=(0,f.useState)([]),[c,d]=(0,f.useState)(!0),l=(0,g.Z)();(0,f.useEffect)(()=>{(async()=>{d(!0);let a=(await i.x1()).filter(a=>a.status!==h.e1.Done).sort((a,b)=>{let c={[h.W6.High]:0,[h.W6.Medium]:1,[h.W6.Low]:2};return c[a.priority]!==c[b.priority]?c[a.priority]-c[b.priority]:new Date(a.dueDate).getTime()-new Date(b.dueDate).getTime()}).slice(0,5);b(a),d(!1)})()},[]);let m={[h.W6.High]:(0,e.jsx)(j.uGo,{className:"w-4 h-4 text-red-500"}),[h.W6.Medium]:(0,e.jsx)(j.rXn,{className:"w-4 h-4 text-amber-500"}),[h.W6.Low]:(0,e.jsx)(j.n97,{className:"w-4 h-4 text-sky-500"})};return(0,e.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm flex flex-col h-full max-h-96",children:[(0,e.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,e.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 flex items-center",children:[(0,e.jsx)(j.ZMX,{className:"w-5 h-5 mr-2 text-sky-500"}),"Tarefas Pendentes"]}),(0,e.jsx)("a",{href:"#/tasks",onClick:a=>{a.preventDefault(),l("/tasks")},className:"text-sm font-semibold text-sky-600 hover:underline",children:"Ver todas"})]}),c?(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(k.E,{className:"h-10 w-full rounded-lg"}),(0,e.jsx)(k.E,{className:"h-10 w-full rounded-lg"}),(0,e.jsx)(k.E,{className:"h-10 w-full rounded-lg"})]}):a.length>0?(0,e.jsx)("div",{className:"space-y-2 overflow-y-auto flex-1 -mr-2 pr-2",children:a.map(a=>(0,e.jsxs)("div",{onClick:()=>l("/tasks"),className:"p-2.5 rounded-lg flex items-center justify-between hover:bg-slate-50 cursor-pointer transition-colors",children:[(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[(0,e.jsx)("div",{title:`Prioridade ${a.priority}`,children:m[a.priority]}),(0,e.jsx)("p",{className:"font-medium text-sm text-slate-800",children:a.title})]}),(0,e.jsx)("p",{className:"text-xs text-slate-500",children:new Date(a.dueDate).toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})})]},a.id))}):(0,e.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-center text-slate-500",children:[(0,e.jsx)(j.ZMX,{className:"w-12 h-12 text-slate-300 mb-2"}),(0,e.jsx)("p",{className:"font-semibold",children:"Nenhuma tarefa pendente."}),(0,e.jsx)("p",{className:"text-xs",children:"Tudo em ordem!"})]})]})};d()}catch(a){d(a)}})},47740:a=>{a.exports=require("@reduxjs/toolkit")},50802:a=>{a.exports=import("clsx")},51343:a=>{a.exports=require("eventemitter3")},56472:a=>{a.exports=require("@opentelemetry/api")},57106:a=>{a.exports=require("immer")},60931:(a,b,c)=>{c.d(b,{A:()=>h});var d=c(8732),e=c(82015),f=c(50284),g=c(51302);let h=({patients:a})=>{let b=(0,e.useMemo)(()=>{let b=new Map,c=new Date;c.setMonth(c.getMonth()-5),c.setDate(1);for(let a=0;a<6;a++){let d=new Date(c);d.setMonth(d.getMonth()+a);let e=d.toLocaleDateString("pt-BR",{month:"short"});b.set(e,{name:e,"Novos Pacientes":0,"Pacientes de Alta":0})}return a.forEach(a=>{let d=new Date(a.registrationDate);if(d>=c){let a=d.toLocaleDateString("pt-BR",{month:"short"});b.has(a)&&b.get(a)["Novos Pacientes"]++}if("Discharged"===a.status){let d=new Date(a.lastVisit);if(d>=c){let a=d.toLocaleDateString("pt-BR",{month:"short"});b.has(a)&&b.get(a)["Pacientes de Alta"]++}}}),Array.from(b.values())},[a]);return(0,d.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm hover:shadow-lg transition-shadow duration-300 h-80",children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center",children:[(0,d.jsx)(g.ntg,{className:"w-5 h-5 mr-2 text-sky-500"})," Fluxo de Pacientes (\xdaltimos 6 meses)"]}),(0,d.jsx)(f.uf,{width:"100%",height:"100%",children:(0,d.jsxs)(f.Es,{data:b,margin:{top:5,right:20,left:-10,bottom:-15},children:[(0,d.jsx)(f.dC,{strokeDasharray:"3 3",vertical:!1,stroke:"#e2e8f0"}),(0,d.jsx)(f.WX,{dataKey:"name",stroke:"#64748b",fontSize:12,tickLine:!1,axisLine:!1}),(0,d.jsx)(f.h8,{stroke:"#64748b",fontSize:12,tickLine:!1,axisLine:!1}),(0,d.jsx)(f.m_,{}),(0,d.jsx)(f.s$,{wrapperStyle:{fontSize:"14px"}}),(0,d.jsx)(f.yP,{dataKey:"Novos Pacientes",fill:"#0ea5e9"}),(0,d.jsx)(f.yP,{dataKey:"Pacientes de Alta",fill:"#64748b"})]})})]})}},62546:a=>{a.exports=require("victory-vendor/d3-scale")},63167:(a,b,c)=>{c.d(b,{JQ:()=>h,fd:()=>j,x1:()=>i});var d=c(4183);let e=[...d.Bj],f=[...d.tq],g=a=>new Promise(b=>setTimeout(b,a)),h=async()=>(await g(300),[...f]),i=async a=>(await g(500),a)?[...e].filter(b=>b.projectId===a):[...e],j=async(a,b)=>{if(await g(400),a.id){let c={...e.find(b=>b.id===a.id),...a,actorUserId:b};return e=e.map(b=>b.id===a.id?c:b),c}{let c={id:`task_${Date.now()}`,...a,actorUserId:b};return e.unshift(c),c}}},70109:a=>{a.exports=require("reselect")},71253:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{cn:()=>h});var e=c(50802),f=c(75979),g=a([e,f]);function h(...a){return(0,f.twMerge)((0,e.clsx)(a))}[e,f]=g.then?(await g)():g,d()}catch(a){d(a)}})},74956:a=>{a.exports=require("clsx")},75935:(a,b,c)=>{c.d(b,{A:()=>h});var d=c(8732),e=c(82015),f=c(50284),g=c(72393);let h=({appointments:a,therapists:b})=>{let c=(0,e.useMemo)(()=>{let c=new Date,d=new Date(c.getFullYear(),c.getMonth(),1),e=a.filter(a=>a.status===g.y2.Completed&&a.startTime>=d),f=new Map;return b.forEach(a=>{f.set(a.id,{name:a.name,atendimentos:0,color:`#${(a=>{switch(a){case"teal":return"0ea5e9";case"sky":return"38bdf8";case"indigo":return"6366f1";default:return"64748b"}})(a.color)}`})}),e.forEach(a=>{if(f.has(a.therapistId)){let b=f.get(a.therapistId);b.atendimentos+=1}}),Array.from(f.values())},[a,b]);return(0,d.jsx)("div",{className:"h-64 mt-4",children:(0,d.jsx)(f.uf,{width:"100%",height:"100%",children:(0,d.jsxs)(f.Es,{data:c,layout:"vertical",margin:{top:5,right:10,left:10,bottom:5},children:[(0,d.jsx)(f.dC,{strokeDasharray:"3 3",horizontal:!1,stroke:"#e2e8f0"}),(0,d.jsx)(f.WX,{type:"number",stroke:"#64748b",fontSize:12,tickLine:!1,axisLine:!1}),(0,d.jsx)(f.h8,{type:"category",dataKey:"name",stroke:"#64748b",fontSize:12,tickLine:!1,axisLine:!1,width:80}),(0,d.jsx)(f.m_,{cursor:{fill:"#f1f5f9"},contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"0.5rem"}}),(0,d.jsx)(f.yP,{dataKey:"atendimentos",barSize:20,children:c.map((a,b)=>(0,d.jsx)(f.fh,{fill:a.color},`productivity-${b}-${a.name}`))})]})})})}},75965:a=>{a.exports=require("decimal.js-light")},75979:a=>{a.exports=import("tailwind-merge")},78628:(a,b,c)=>{c.d(b,{A:()=>i});var d=c(8732),e=c(82015),f=c(50284),g=c(72393),h=c(51302);let i=({appointments:a})=>{let b=(0,e.useMemo)(()=>{let b=new Map,c=new Date,d=new Date;d.setDate(c.getDate()-30);let e=a.filter(a=>a.status===g.y2.Completed&&a.startTime>=d);for(let a=0;a<=30;a++){let d=new Date;d.setDate(c.getDate()-a);let e=d.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"});b.set(e,0)}return e.forEach(a=>{let c=a.startTime.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),d=b.get(c)||0;b.set(c,d+a.value)}),Array.from(b.entries()).map(([a,b])=>({name:a,Faturamento:b})).reverse()},[a]);return(0,d.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm hover:shadow-lg transition-shadow duration-300 h-80",children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center",children:[(0,d.jsx)(h.Ilq,{className:"w-5 h-5 mr-2 text-sky-500"})," Faturamento dos \xdaltimos 30 Dias"]}),(0,d.jsx)(f.uf,{width:"100%",height:"100%",children:(0,d.jsxs)(f.bl,{data:b,margin:{top:5,right:20,left:-10,bottom:-15},children:[(0,d.jsx)(f.dC,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),(0,d.jsx)(f.WX,{dataKey:"name",stroke:"#64748b",fontSize:12,tickLine:!1,axisLine:!1}),(0,d.jsx)(f.h8,{stroke:"#64748b",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:a=>`R$${a}`}),(0,d.jsx)(f.m_,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"0.5rem"},labelStyle:{color:"#1e293b",fontWeight:"bold"},formatter:a=>[`R$${a.toFixed(2)}`,"Faturamento"]}),(0,d.jsx)(f.s$,{wrapperStyle:{fontSize:"14px"}}),(0,d.jsx)(f.N1,{type:"monotone",dataKey:"Faturamento",stroke:"#0ea5e9",strokeWidth:2,dot:{r:4},activeDot:{r:8}})]})})]})}},79291:a=>{a.exports=require("es-toolkit/compat/sumBy")},82015:a=>{a.exports=require("react")},82189:(a,b,c)=>{c.d(b,{A:()=>i});var d=c(8732),e=c(82015),f=c(86211),g=c(72393),h=c(51302);let i=({appointments:a})=>{let b=(0,f.Z)(),c=(0,e.useMemo)(()=>a.filter(a=>a.status===g.y2.Scheduled).sort((a,b)=>a.startTime.getTime()-b.startTime.getTime()),[a]);return(0,d.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm flex flex-col h-full max-h-96",children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center",children:[(0,d.jsx)(h.VvS,{className:"w-5 h-5 mr-2 text-sky-500"}),"Consultas de Hoje"]}),c.length>0?(0,d.jsx)("div",{className:"space-y-3 overflow-y-auto flex-1 -mr-2 pr-2",children:c.map(a=>(0,d.jsxs)("div",{onClick:()=>{b(`/atendimento/${a.id}`)},className:"p-3 rounded-lg flex items-center gap-3 hover:bg-slate-50 cursor-pointer transition-colors",children:[(0,d.jsx)("img",{src:a.patientAvatarUrl,alt:a.patientName,className:"w-10 h-10 rounded-full"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("p",{className:"font-semibold text-sm text-slate-900",children:a.patientName}),(0,d.jsx)("p",{className:"text-xs text-slate-500",children:a.type})]}),(0,d.jsxs)("div",{className:"flex items-center text-sm font-semibold text-slate-600 bg-slate-100 px-2 py-1 rounded-md",children:[(0,d.jsx)(h.zD7,{className:"w-4 h-4 mr-1.5 text-slate-400"}),new Date(a.startTime).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]},a.id))}):(0,d.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-center text-slate-500",children:[(0,d.jsx)(h.VvS,{className:"w-12 h-12 text-slate-300 mb-2"}),(0,d.jsx)("p",{className:"font-semibold",children:"Nenhuma consulta hoje."}),(0,d.jsx)("p",{className:"text-xs",children:"Um bom dia para organizar a cl\xednica!"})]})]})}},83428:a=>{a.exports=require("es-toolkit/compat/range")},85923:a=>{a.exports=require("es-toolkit/compat/uniqBy")},86211:(a,b,c)=>{c.d(b,{Z:()=>e});let d={navigate:a=>{console.log("Navigation requested to:",a);let b=window.__setCurrentPage;if(b&&"function"==typeof b){if(a.startsWith("/patients/")){let c=a.replace("/patients/","");window.__selectedPatientId=c,b("patient-detail")}else if(a.startsWith("/patients"))b("patients");else if(a.startsWith("/atendimento/")||a.startsWith("/teleconsulta/")){let c=a.split("/")[2];window.__selectedAppointmentId=c,b("session")}}}},e=()=>d.navigate},90742:a=>{a.exports=require("es-toolkit/compat/sortBy")},91651:a=>{a.exports=require("tiny-invariant")},93939:a=>{a.exports=require("@supabase/supabase-js")},97517:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>j});var e=c(8732);c(82015);var f=c(51302),g=c(7548),h=c(19119),i=a([h]);h=(i.then?(await i)():i)[0];let j=({stats:a,isLoading:b})=>b||!a?(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((a,b)=>(0,e.jsx)(h.E,{className:"h-32 rounded-2xl"},`kpi-skeleton-${b}`))}):(0,e.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,e.jsx)(g.A,{title:"Faturamento do M\xeas",value:a.monthlyRevenue.value,icon:(0,e.jsx)(f.G9t,{}),...a.monthlyRevenue.change&&{change:a.monthlyRevenue.change},...a.monthlyRevenue.changeType&&{changeType:a.monthlyRevenue.changeType}}),(0,e.jsx)(g.A,{title:"Pacientes Ativos",value:a.activePatients.value,icon:(0,e.jsx)(f.zWC,{}),subtitle:a.activePatients.subtitle}),(0,e.jsx)(g.A,{title:"Novos Pacientes (M\xeas)",value:a.newPatientsThisMonth.value,icon:(0,e.jsx)(f.VH9,{}),...a.newPatientsThisMonth.change&&{change:a.newPatientsThisMonth.change},...a.newPatientsThisMonth.changeType&&{changeType:a.newPatientsThisMonth.changeType}}),(0,e.jsx)(g.A,{title:"Satisfa\xe7\xe3o (NPS)",value:a.avgSatisfaction.value,icon:(0,e.jsx)(f.FEq,{}),subtitle:a.avgSatisfaction.subtitle})]});d()}catch(a){d(a)}})}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[3317,9871,1302,284,4183,7367,8471],()=>b(b.s=41337));module.exports=c})();