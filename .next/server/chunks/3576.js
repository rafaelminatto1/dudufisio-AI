"use strict";exports.id=3576,exports.ids=[3576],exports.modules={3576:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>M});var e=c(8732),f=c(82015),g=c(54822),h=c(51302),i=c(26821),j=c(55489),k=c(22320),l=c(65600),m=c(63167),n=c(737),o=c(42227),p=c(3287),q=c(43709),r=c(31761),s=c(7976),t=c(50158),u=c(99597),v=c(77590),w=c(31186),x=c(97679),y=c(83805),z=c(28471),A=c(63014),B=c(81703),C=c(94296),D=c(98618),E=c(40396),F=c(72393),G=c(17367),H=a([r,A,D]);[r,A,D]=H.then?(await H)():H;let I=({icon:a,label:b,value:c})=>(0,e.jsxs)("div",{className:"flex items-start",children:[(0,e.jsx)("div",{className:"flex-shrink-0 h-10 w-10 flex items-center justify-center bg-slate-100 rounded-lg text-slate-600",children:a}),(0,e.jsxs)("div",{className:"ml-4",children:[(0,e.jsx)("p",{className:"text-sm font-medium text-slate-500",children:b}),(0,e.jsx)("div",{className:"text-sm font-semibold text-slate-800",children:c})]})]}),J=({plan:a,onSuggestProtocol:b})=>(0,e.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,e.jsxs)("div",{className:"border-b border-slate-200 pb-4 mb-4 flex justify-between items-center",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("h4",{className:"font-bold text-lg text-slate-800",children:"Plano de Tratamento"}),(0,e.jsxs)("p",{className:"text-sm text-slate-500",children:["Diagn\xf3stico COFFITO: ",a.coffitoDiagnosisCodes]})]}),(0,e.jsxs)("button",{onClick:b,className:"inline-flex items-center text-sm font-medium text-sky-600 bg-sky-50 border border-sky-200 rounded-lg hover:bg-sky-100 px-3 py-1.5 transition-colors",children:[(0,e.jsx)(h.g5W,{className:"w-4 h-4 mr-2"})," Sugerir Protocolo"]})]}),(0,e.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,e.jsxs)("div",{children:[(0,e.jsxs)("h5",{className:"font-semibold text-sky-600 flex items-center mb-2",children:[(0,e.jsx)(h.DTr,{className:"w-4 h-4 mr-2"})," Objetivos Principais"]}),(0,e.jsx)("p",{className:"text-slate-600 pl-6",children:a.treatmentGoals})]}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("h5",{className:"font-semibold text-sky-600 flex items-center mb-2",children:[(0,e.jsx)(h.y8v,{className:"w-4 h-4 mr-2"})," Exerc\xedcios Prescritos"]}),(0,e.jsx)("div",{className:"flex flex-wrap gap-2 pl-6",children:(a.exercises||[]).map(a=>(0,e.jsxs)("span",{className:"px-3 py-1 text-sm bg-slate-100 text-slate-800 rounded-md shadow-sm",children:[a.exerciseName," (",a.sets,"x",a.repetitions,")"]},a.id))})]})]})]}),K=({note:a,onClose:b})=>a?(0,e.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:b,children:(0,e.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",onClick:a=>a.stopPropagation(),children:[(0,e.jsxs)("header",{className:"flex justify-between items-center p-4 border-b",children:[(0,e.jsxs)("h3",{className:"font-bold text-lg text-slate-800",children:["Sess\xe3o #",a.sessionNumber," - ",a.date]}),(0,e.jsx)("button",{onClick:b,className:"p-2 rounded-full hover:bg-slate-100",children:(0,e.jsx)(h.X,{className:"w-5 h-5"})})]}),(0,e.jsxs)("main",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("strong",{className:"font-semibold text-sky-600 block mb-1",children:"S (Subjetivo):"})," ",(0,e.jsx)(v.A,{content:a.subjective})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("strong",{className:"font-semibold text-sky-600 block mb-1",children:"O (Objetivo):"})," ",(0,e.jsx)(v.A,{content:a.objective})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("strong",{className:"font-semibold text-sky-600 block mb-1",children:"A (Avalia\xe7\xe3o):"})," ",(0,e.jsx)(v.A,{content:a.assessment})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("strong",{className:"font-semibold text-sky-600 block mb-1",children:"P (Plano):"})," ",(0,e.jsx)(v.A,{content:a.plan})]})]})]})}):null,L=({icon:a,label:b,isActive:c,onClick:d})=>(0,e.jsxs)("button",{onClick:d,className:`flex items-center whitespace-nowrap py-3 px-4 font-medium text-sm rounded-t-lg border-b-2 ${c?"border-sky-500 text-sky-600 bg-white":"border-transparent text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,children:[(0,e.jsx)(a,{className:"w-5 h-5 mr-2"})," ",b]}),M=()=>{let a=g.useParams(),b=window.__selectedPatientId||a.id,{therapists:c}=(0,z.Ez)(),{user:d}=(0,G.W6)(),[v,H]=(0,f.useState)(null),[M,N]=(0,f.useState)([]),[O,P]=(0,f.useState)([]),[Q,R]=(0,f.useState)(void 0),[S,T]=(0,f.useState)([]),[U,V]=(0,f.useState)([]),[W,X]=(0,f.useState)(!0),[Y,Z]=(0,f.useState)(null),[$,_]=(0,f.useState)("dashboard"),[aa,ab]=(0,f.useState)(!1),[ac,ad]=(0,f.useState)(!1),[ae,af]=(0,f.useState)(null),[ag,ah]=(0,f.useState)(!1),[ai,aj]=(0,f.useState)(!1),ak=(0,f.useMemo)(()=>{if(!d||!b)return!1;switch(d.role){case F.Xh.Patient:return d.patientId===b;case F.Xh.EducadorFisico:case F.Xh.Therapist:case F.Xh.Admin:return!0;default:return!1}},[d,b]),[al,am]=(0,f.useState)({isOpen:!1,pointToEdit:null}),[an,ao]=(0,f.useState)(null),[ap,aq]=(0,f.useState)(null),{showToast:ar}=(0,u.dj)(),as=(0,f.useCallback)(async()=>{if(b){X(!0);try{let[a,c,d,e,f,g]=await Promise.all([i.mQ(b),j.lV(b),k.z0(b),l.bb(b),m.JQ(),n.Uh(b)]);if(!a)return void Z("Paciente n\xe3o encontrado.");H(a),P(c),R(d),T(e),V(f.filter(a=>a.patientId===b)),N(g),Z(null)}catch(a){Z("Falha ao carregar dados do paciente."),console.error(a)}finally{X(!1)}}},[b]);(0,f.useEffect)(()=>{as()},[as]),(0,f.useEffect)(()=>{let a=()=>as();return E.g.on("appointments:changed",a),E.g.on("notes:changed",a),E.g.on("treatmentPlans:changed",a),E.g.on("patients:changed",a),()=>{E.g.off("appointments:changed",a),E.g.off("notes:changed",a),E.g.off("treatmentPlans:changed",a),E.g.off("patients:changed",a)}},[as]);let at=(0,f.useCallback)(async()=>{aj(!1),ar("Protocolo aplicado com sucesso ao plano de tratamento!","success"),await as()},[as,ar]),au=async a=>{v&&(await j.gp(v.id,a),ab(!1))},av=async a=>{v&&(await i.Z6({...v,...a}),ad(!1),ar("Paciente atualizado com sucesso!","success"))},aw=async a=>{try{return await n.Fy(a),ar("Consulta salva com sucesso!","success"),ah(!1),!0}catch{return ar("Falha ao salvar a consulta.","error"),!1}},ax=async(a,b)=>{let c=M.find(b=>b.id===a);if(!c)return!1;try{return b?await n.aJ(b,c.startTime):await n.d3(a),ar("Consulta removida com sucesso!","success"),ah(!1),!0}catch{return ar("Falha ao remover a consulta.","error"),!1}},ay=async()=>{if(an&&v)try{await i.Xl(v.id,an),ar("Arquivo anexado com sucesso!","success"),ao(null)}catch(a){ar("Falha ao anexar arquivo.","error")}},az=async a=>{if(v){ar("Gerando PDF...","info");try{await l.Mp(a,v)}catch(a){ar("Falha ao gerar o PDF.","error")}}},aA=async a=>{if("finalized"!==a.status)return void ar("Apenas relat\xf3rios finalizados podem ser enviados.","error");aq(a.id);try{await l.Ns(a.id),ar("Relat\xf3rio marcado como enviado!","success"),as()}catch(a){ar(a.message,"error")}finally{aq(null)}},aB=async a=>{if(!v||!al.pointToEdit)return;let b=[...v.painPoints||[]];if(al.pointToEdit.id)b=b.map(b=>b.id===al.pointToEdit.id?{...b,...a}:b);else{let{x:c,y:d,bodyPart:e}=al.pointToEdit;if(void 0===c||void 0===d||void 0===e)return void ar("Erro: n\xe3o foi poss\xedvel determinar a localiza\xe7\xe3o do ponto de dor.","error");let f={id:`pp_${Date.now()}`,date:new Date().toISOString(),x:c,y:d,bodyPart:e,...a};b.push(f)}await i.TC(v.id,b),am({isOpen:!1,pointToEdit:null}),ar("Mapa de dor atualizado!","success")},aC=async()=>{if(!v||!al.pointToEdit?.id)return;let a=(v.painPoints||[]).filter(a=>a.id!==al.pointToEdit.id);await i.TC(v.id,a),am({isOpen:!1,pointToEdit:null}),ar("Ponto de dor removido.","success")};if(W)return(0,e.jsx)(s.A,{});if(!ak)return(0,e.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-8",children:(0,e.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md text-center",children:[(0,e.jsx)("div",{className:"w-12 h-12 text-red-500 mx-auto mb-4",children:"\uD83D\uDEAB"}),(0,e.jsx)("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Acesso Negado"}),(0,e.jsx)("p",{className:"text-red-600",children:"Voc\xea n\xe3o tem permiss\xe3o para visualizar este paciente."})]})});if(Y||!v)return(0,e.jsx)("div",{className:"text-center p-10 text-red-500",children:Y||"Paciente n\xe3o encontrado."});let aD=new Date(v.birthDate),aE=isNaN(aD.getTime())?"N/A":aD.toLocaleDateString("pt-BR",{timeZone:"UTC"});return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(o.A,{title:v.name,subtitle:`Detalhes do prontu\xe1rio, hist\xf3rico e agendamentos.`,children:[(0,e.jsxs)("button",{onClick:()=>{delete window.__selectedPatientId;let a=window.__setCurrentPage;a&&a("patients")},className:"inline-flex items-center rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 mr-3",children:[(0,e.jsx)(h.JGc,{className:"-ml-1 mr-2 h-5 w-5"}),"Voltar"]}),(0,e.jsxs)("button",{onClick:()=>ad(!0),className:"inline-flex items-center rounded-lg border border-transparent bg-sky-500 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-sky-600",children:[(0,e.jsx)(h.ffu,{className:"-ml-1 mr-2 h-5 w-5"}),"Editar Cadastro"]})]}),(0,e.jsx)(p.A,{isOpen:aa,onClose:()=>ab(!1),onSave:au}),(0,e.jsx)(q.A,{isOpen:ac,onClose:()=>ad(!1),onSave:av,patientToEdit:v}),(0,e.jsx)(K,{note:ae,onClose:()=>af(null)}),(0,e.jsx)(r.A,{isOpen:ag,onClose:()=>ah(!1),onSave:aw,onDelete:ax,initialData:{date:new Date,therapistId:c[0]?.id},patients:[v],therapists:c,allAppointments:M}),al.isOpen&&al.pointToEdit&&(0,e.jsx)(C.A,{isOpen:al.isOpen,onClose:()=>am({isOpen:!1,pointToEdit:null}),onSave:aB,onDelete:al.pointToEdit.id?aC:void 0,point:al.pointToEdit}),v.conditions&&v.conditions.length>0&&(0,e.jsx)(A.A,{isOpen:ai,onClose:()=>aj(!1),patient:v,onApply:at}),(0,e.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,e.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,e.jsx)(t.A,{title:"Informa\xe7\xf5es Pessoais",icon:(0,e.jsx)(h.KJW,{}),children:(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsx)(I,{icon:(0,e.jsx)(h.Tni,{className:"w-5 h-5"}),label:"Data de Nascimento",value:aE}),(0,e.jsx)(I,{icon:(0,e.jsx)(h.bcf,{className:"w-5 h-5"}),label:"Telefone",value:v.phone}),(0,e.jsx)(I,{icon:(0,e.jsx)(h.gE4,{className:"w-5 h-5"}),label:"Email",value:v.email})]})}),U.length>0&&(0,e.jsx)(t.A,{title:"Projetos Ativos",icon:(0,e.jsx)(h.ZMX,{}),children:(0,e.jsx)("ul",{className:"space-y-3",children:U.map(a=>(0,e.jsx)("li",{className:"p-3 bg-slate-50 rounded-lg",children:(0,e.jsx)(g.Link,{to:`/tasks?projectId=${a.id}`,className:"font-semibold text-slate-800 hover:text-sky-600",children:a.title})},a.id))})}),v.conditions&&v.conditions.length>0&&(0,e.jsx)(t.A,{title:"Condi\xe7\xf5es / Queixas",icon:(0,e.jsx)(h.B1N,{}),children:(0,e.jsx)("ul",{className:"space-y-3",children:v.conditions.map((a,b)=>(0,e.jsx)("li",{className:"p-3 bg-slate-50 rounded-lg",children:(0,e.jsx)("p",{className:"font-semibold text-slate-800",children:a.name})},`condition-${a.name}-${b}`))})}),v.surgeries&&v.surgeries.length>0&&(0,e.jsx)(t.A,{title:"Hist\xf3rico Cir\xfargico",icon:(0,e.jsx)(h.B1N,{}),children:(0,e.jsx)("ul",{className:"space-y-3",children:v.surgeries.map((a,b)=>{let c=(a=>{let b=new Date(a),c=new Date,d=Math.abs(c.getTime()-b.getTime()),e=Math.ceil(d/864e5),f=Math.floor(e/7);return{days:e,weeks:f}})(a.date);return(0,e.jsxs)("li",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,e.jsx)("p",{className:"font-semibold text-slate-800",children:a.name}),(0,e.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:(0,e.jsxs)("span",{children:[c.weeks," semanas"]})})]},`surgery-${a.name}-${b}`)})})})]}),(0,e.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,e.jsx)("div",{className:"border-b border-slate-200",children:(0,e.jsxs)("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[(0,e.jsx)(L,{icon:h.EsT,label:"Dashboard Cl\xednico",isActive:"dashboard"===$,onClick:()=>_("dashboard")}),(0,e.jsx)(L,{icon:h.zgK,label:"Vis\xe3o Geral",isActive:"overview"===$,onClick:()=>_("overview")}),(0,e.jsx)(L,{icon:h.Ilq,label:"Mapa Corporal",isActive:"bodymap"===$,onClick:()=>_("bodymap")}),(0,e.jsx)(L,{icon:h.Gyj,label:"Hist\xf3rico Cl\xednico",isActive:"history"===$,onClick:()=>_("history")}),(0,e.jsx)(L,{icon:h.ADG,label:"Agendamentos",isActive:"appointments"===$,onClick:()=>_("appointments")}),(0,e.jsx)(L,{icon:h.iUU,label:"Laudos & Anexos",isActive:"docs"===$,onClick:()=>_("docs")})]})}),"dashboard"===$&&(0,e.jsx)(B.A,{patient:v,appointments:M,notes:O,plan:Q,onMapClick:(a,b,c)=>{am({isOpen:!0,pointToEdit:{x:a,y:b,bodyPart:c}})},onPointClick:a=>{am({isOpen:!0,pointToEdit:a})}}),"overview"===$&&(0,e.jsxs)("div",{className:"space-y-6",children:[Q?(0,e.jsx)(J,{plan:Q,onSuggestProtocol:()=>aj(!0)}):(0,e.jsx)(t.A,{title:"Plano de Tratamento",children:(0,e.jsx)("p",{children:"Nenhum plano ativo."})}),(v.trackedMetrics||[]).filter(a=>a.isActive).map(a=>(0,e.jsx)(w.A,{metric:a,notes:O},a.id))]}),"bodymap"===$&&(0,e.jsx)(D.A,{patient:v}),"history"===$&&(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsx)("div",{className:"text-right",children:(0,e.jsxs)("button",{onClick:()=>ab(!0),className:"inline-flex items-center rounded-lg border border-transparent bg-sky-500 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-sky-600",children:[(0,e.jsx)(h.FWt,{className:"-ml-1 mr-2 h-5 w-5"})," Nova Anota\xe7\xe3o"]})}),(0,e.jsx)(x.A,{notes:O,onViewNote:af})]}),"appointments"===$&&(0,e.jsx)(y.A,{appointments:M,onAdd:()=>ah(!0)}),"docs"===$&&(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)(t.A,{title:"Laudos M\xe9dicos",icon:(0,e.jsx)(h.iUU,{}),children:[(0,e.jsx)("div",{className:"space-y-3 mb-4",children:S.map(a=>(0,e.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[(0,e.jsx)("p",{className:"font-semibold text-slate-800",children:a.title}),(0,e.jsxs)("div",{className:"mt-3 pt-3 border-t border-slate-200 flex items-center justify-end gap-2",children:[(0,e.jsxs)(g.Link,{to:`/medical-report/edit/${a.id}`,className:"inline-flex items-center px-2.5 py-1.5 border border-slate-300 text-xs font-medium rounded-md text-slate-700 bg-white hover:bg-slate-50",children:[(0,e.jsx)(h.ffu,{className:"w-3 h-3 mr-1.5"})," ","draft"===a.status?"Editar":"Visualizar"]}),(0,e.jsxs)("button",{onClick:()=>aA(a),disabled:"finalized"!==a.status||ap===a.id,className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-sky-500 hover:bg-sky-600 disabled:bg-slate-300",children:[(0,e.jsx)(h.Vnp,{className:"w-3 h-3 mr-1.5"})," Enviar"]}),(0,e.jsxs)("button",{onClick:()=>az(a),disabled:"draft"===a.status,className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-slate-600 hover:bg-slate-700 disabled:bg-slate-300",children:[(0,e.jsx)(h.f5X,{className:"w-3 h-3 mr-1.5"})," PDF"]})]})]},a.id))}),(0,e.jsxs)(g.Link,{to:`/medical-report/new/${v.id}`,className:"w-full inline-flex items-center justify-center rounded-lg border border-transparent bg-sky-500 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-sky-600",children:[(0,e.jsx)(h.FWt,{className:"-ml-1 mr-2 h-5 w-5"})," Gerar Novo Laudo"]})]}),(0,e.jsxs)(t.A,{title:"Anexos do Paciente",icon:(0,e.jsx)(h.xv8,{}),children:[(0,e.jsx)("div",{className:"space-y-3 mb-4",children:(v.attachments||[]).map((a,b)=>(0,e.jsxs)("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center p-2 bg-slate-50 rounded-lg hover:bg-slate-100",children:[(0,e.jsx)(h.iUU,{className:"w-5 h-5 text-slate-500 mr-3"}),(0,e.jsx)("span",{className:"text-sm text-slate-700 font-medium truncate",children:a.name})]},`attachment-${a.name}-${b}`))}),(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("input",{type:"file",id:"file-upload",className:"hidden",onChange:a=>ao(a.target.files?.[0]||null)}),(0,e.jsx)("label",{htmlFor:"file-upload",className:"w-full text-center px-3 py-2 text-sm bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors cursor-pointer truncate",children:an?an.name:"Escolher arquivo..."}),(0,e.jsx)("button",{onClick:ay,disabled:!an,className:"p-2 bg-sky-500 text-white rounded-lg hover:bg-sky-600 disabled:bg-slate-300",children:(0,e.jsx)(h._OO,{className:"w-5 h-5"})})]})]})]})]})]})]})};d()}catch(a){d(a)}})},10775:(a,b,c)=>{c.d(b,{A:()=>g});var d=c(8732),e=c(82015);let f={front:`
        M100,20 C115,20 125,30 125,45 S115,70 100,70 S75,60 75,45 S85,20 100,20 Z
        M100,70 L100,80
        M100,80 C130,80 140,90 140,120 L140,180
        M100,80 C70,80 60,90 60,120 L60,180
        M140,120 L160,120 L165,250 L155,250 Z
        M60,120 L40,120 L35,250 L45,250 Z
        M100,180 C120,180 125,185 125,200 L125,350 L115,350 L115,480 L125,490 L125,500 L105,500 Z
        M100,180 C80,180 75,185 75,200 L75,350 L85,350 L85,480 L75,490 L75,500 L95,500 Z
    `,back:`
        M100,20 C115,20 125,30 125,45 S115,70 100,70 S75,60 75,45 S85,20 100,20 Z
        M100,70 L100,80
        M100,80 C130,80 140,90 140,120 L140,180
        M100,80 C70,80 60,90 60,120 L60,180
        M140,120 L160,120 L165,250 L155,250 Z
        M60,120 L40,120 L35,250 L45,250 Z
        M100,180 C120,180 125,185 125,200 L125,350 L115,350 L115,480 L125,490 L125,500 L105,500 Z
        M100,180 C80,180 75,185 75,200 L75,350 L85,350 L85,480 L75,490 L75,500 L95,500 Z
        M100,85 L100,175
    `},g=({points:a,onMapClick:b,onPointClick:c})=>{let[g,h]=(0,e.useState)(null),i=(0,e.useRef)(null),j=()=>{h(null)};return(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("div",{className:"flex justify-center gap-4",children:["front","back"].map(e=>(0,d.jsxs)("div",{className:"w-1/2",children:[(0,d.jsx)("h4",{className:"text-center font-semibold text-sm text-slate-600 mb-1 capitalize",children:"front"===e?"Frente":"Costas"}),(0,d.jsxs)("svg",{ref:i,viewBox:"0 0 200 500",onClick:a=>((a,c)=>{if(!i.current)return;let d=i.current.getBoundingClientRect();b((a.clientX-d.left)/d.width*100,(a.clientY-d.top)/d.height*100,c)})(a,e),className:"w-full cursor-crosshair",children:[(0,d.jsx)("path",{d:f[e],className:"fill-slate-200",stroke:"#94a3b8",strokeWidth:"1"}),a.filter(a=>a.bodyPart===e).map(a=>(0,d.jsx)("circle",{cx:`${a.x}%`,cy:`${a.y}%`,r:"5",className:`cursor-pointer transition-all hover:r-7 ${(a=>a<=3?"fill-green-500/80 stroke-green-700":a<=6?"fill-yellow-500/80 stroke-yellow-700":"fill-red-500/80 stroke-red-700")(a.intensity)}`,strokeWidth:"1.5",onClick:b=>{b.stopPropagation(),c(a)},onMouseEnter:b=>((a,b)=>{h({content:`Intensidade: ${b.intensity}/10
Tipo: ${b.type}
Data: ${new Date(b.date).toLocaleDateString()}`,x:a.pageX,y:a.pageY})})(b,a),onMouseLeave:j},a.id))]})]},e))}),g&&(0,d.jsx)("div",{style:{top:g.y,left:g.x},className:"absolute z-10 p-2 text-xs text-white bg-slate-800 rounded-md shadow-lg pointer-events-none transform -translate-y-full -translate-x-1/2 whitespace-pre-wrap",children:g.content})]})}},16686:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>m});var e=c(8732),f=c(82015),g=c(63220),h=c(51302),i=a([g]);g=(i.then?(await i)():i)[0];let j=[{level:"0",color:"#e2e8f0",label:"Sem dor",description:"Aus\xeancia completa de desconforto"},{level:"1-3",color:"#22c55e",label:"Leve",description:"Desconforto m\xednimo, n\xe3o interfere nas atividades"},{level:"4-6",color:"#eab308",label:"Moderada",description:"Interfere moderadamente nas atividades di\xe1rias"},{level:"7-8",color:"#f97316",label:"Intensa",description:"Interfere significativamente nas atividades"},{level:"9-10",color:"#ef4444",label:"Severa",description:"Dor incapacitante, impede atividades b\xe1sicas"}],k=[{type:"acute",label:"Aguda",description:"Dor s\xfabita e intensa, geralmente de curta dura\xe7\xe3o"},{type:"chronic",label:"Cr\xf4nica",description:"Dor persistente por mais de 3-6 meses"},{type:"intermittent",label:"Intermitente",description:"Dor que vai e vem em epis\xf3dios"},{type:"constant",label:"Constante",description:"Dor cont\xednua sem intervalos de al\xedvio"}],l=[{action:"Clique no corpo",description:"Adicionar novo ponto de dor"},{action:"Clique no ponto",description:"Editar ponto existente"},{action:"Alterar visualiza\xe7\xe3o",description:"Trocar entre frente e costas"},{action:"Usar timeline",description:"Analisar evolu\xe7\xe3o temporal"}],m=({expanded:a=!1,className:b="",showHelp:c=!0})=>{let[d,i]=(0,f.useState)(a),[m,n]=(0,f.useState)(!1);return(0,e.jsxs)("div",{className:`bg-white rounded-xl border border-slate-200 ${b}`,children:[(0,e.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(h.esB,{className:"w-5 h-5 text-slate-600"}),(0,e.jsx)("h4",{className:"font-semibold text-slate-800",children:"Legenda"})]}),(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[c&&(0,e.jsx)("button",{onClick:()=>n(!m),className:`p-2 rounded-lg transition-colors ${m?"bg-blue-100 text-blue-600":"text-slate-400 hover:text-slate-600 hover:bg-slate-100"}`,"aria-label":"Mostrar/ocultar guia de uso",children:(0,e.jsx)(h.mNh,{className:"w-4 h-4"})}),(0,e.jsx)("button",{onClick:()=>i(!d),className:`p-2 rounded-lg transition-colors ${d?"bg-blue-100 text-blue-600":"text-slate-400 hover:text-slate-600 hover:bg-slate-100"}`,"aria-label":"Expandir/recolher legenda",children:(0,e.jsx)(h.R2D,{className:"w-4 h-4"})})]})]}),(0,e.jsx)(g.AnimatePresence,{children:m&&(0,e.jsx)(g.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-b border-slate-200",children:(0,e.jsxs)("div",{className:"p-4 bg-blue-50",children:[(0,e.jsxs)("h5",{className:"font-medium text-blue-800 mb-3 flex items-center gap-2",children:[(0,e.jsx)(h.mNh,{className:"w-4 h-4"}),"Como usar o mapa corporal"]}),(0,e.jsx)("div",{className:"space-y-2",children:l.map((a,b)=>(0,e.jsxs)("div",{className:"flex items-start gap-3 text-sm",children:[(0,e.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("span",{className:"font-medium text-blue-700",children:[a.action,":"]})," ",(0,e.jsx)("span",{className:"text-blue-600",children:a.description})]})]},b))})]})})}),(0,e.jsxs)("div",{className:"p-4 space-y-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("h5",{className:"font-medium text-slate-700 mb-3",children:"Escala de Dor (0-10)"}),(0,e.jsx)("div",{className:"space-y-2",children:j.map((a,b)=>(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[(0,e.jsx)("div",{className:"w-4 h-4 rounded-full border border-white shadow-sm flex-shrink-0",style:{backgroundColor:a.color}}),(0,e.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("span",{className:"text-sm font-medium text-slate-800",children:a.level}),(0,e.jsx)("span",{className:"text-sm text-slate-600",children:a.label})]}),d&&(0,e.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:a.description})]})]},b))})]}),d&&(0,e.jsxs)(g.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"border-t border-slate-200 pt-4",children:[(0,e.jsx)("h5",{className:"font-medium text-slate-700 mb-3",children:"Tipos de Dor"}),(0,e.jsx)("div",{className:"grid grid-cols-1 gap-2",children:k.map((a,b)=>(0,e.jsxs)("div",{className:"flex items-start gap-3 p-2 bg-slate-50 rounded-lg",children:[(0,e.jsx)("div",{className:"w-3 h-3 bg-slate-400 rounded-full mt-1 flex-shrink-0"}),(0,e.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,e.jsx)("div",{className:"text-sm font-medium text-slate-800",children:a.label}),(0,e.jsx)("p",{className:"text-xs text-slate-600 mt-1",children:a.description})]})]},b))})]}),(0,e.jsxs)("div",{className:"border-t border-slate-200 pt-4",children:[(0,e.jsx)("h5",{className:"font-medium text-slate-700 mb-3",children:"Indicadores Visuais"}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("div",{className:"w-6 h-6 bg-blue-500 rounded-full border-2 border-blue-700"}),(0,e.jsx)("div",{className:"absolute inset-0 rounded-full animate-ping bg-blue-400 opacity-75"})]}),(0,e.jsx)("span",{className:"text-sm text-slate-600",children:"Ponto selecionado"})]}),(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[(0,e.jsx)("div",{className:"w-6 h-6 bg-orange-500 rounded-full shadow-lg transform scale-110"}),(0,e.jsx)("span",{className:"text-sm text-slate-600",children:"Ponto em foco (hover)"})]}),(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[(0,e.jsxs)("div",{className:"flex gap-1",children:[(0,e.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,e.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,e.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full"})]}),(0,e.jsx)("span",{className:"text-sm text-slate-600",children:"Evolu\xe7\xe3o temporal"})]})]})]}),d&&(0,e.jsxs)(g.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"border-t border-slate-200 pt-4",children:[(0,e.jsx)("h5",{className:"font-medium text-slate-700 mb-3",children:"Acessibilidade"}),(0,e.jsxs)("div",{className:"text-xs text-slate-600 space-y-1",children:[(0,e.jsx)("p",{children:"• Use Tab para navegar pelos pontos"}),(0,e.jsx)("p",{children:"• Enter ou Espa\xe7o para selecionar"}),(0,e.jsx)("p",{children:"• Setas para navegar na escala de dor"}),(0,e.jsx)("p",{children:"• Suporte a leitores de tela"})]})]}),(0,e.jsx)("div",{className:"border-t border-slate-200 pt-4 text-center",children:(0,e.jsx)("button",{onClick:()=>i(!d),className:"text-xs text-slate-500 hover:text-slate-700 transition-colors",children:d?"Mostrar menos":"Mostrar mais detalhes"})})]})]})};d()}catch(a){d(a)}})},17682:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>p});var e=c(8732),f=c(82015),g=c(63220),h=c(51302),i=c(43600),j=c(99597),k=c(60723),l=c(23508),m=c(79380),n=c(16686),o=a([g,k,l,m,n]);[g,k,l,m,n]=o.then?(await o)():o;let p=({patient:a,sessionId:b,className:c="",readOnly:d=!1,showTimeline:o=!0,showAnalytics:p=!0})=>{let{state:q,actions:{addPoint:r,updatePoint:s,deletePoint:t,selectPoint:u,clearSelection:v,switchSide:w,setTimelineDate:x,refreshData:y},analytics:z,isLoading:A,error:B}=(0,i.D)(a.id,b),{showToast:C}=(0,j.dj)(),[D,E]=(0,f.useState)(!1),[F,G]=(0,f.useState)(null),H=(0,f.useCallback)((a,b)=>{d||(G(a),E(!0))},[d]),I=(0,f.useCallback)(a=>{u(a),E(!0)},[u]),J=(0,f.useCallback)(async c=>{try{if(q.selectedPoint)await s(q.selectedPoint.id,c),C("Ponto atualizado com sucesso!","success");else if(F){let d={patientId:a.id,coordinates:F,bodySide:q.activeSide,createdBy:"current-user",sessionId:b,...c};await r(d),C("Ponto adicionado com sucesso!","success")}E(!1),G(null),v()}catch(a){C(a.message||"Erro ao salvar ponto","error")}},[q.selectedPoint,F,q.activeSide,a.id,b,s,r,v,C]),K=(0,f.useCallback)(async a=>{try{await t(a),C("Ponto removido com sucesso!","success"),E(!1),v()}catch(a){C(a.message||"Erro ao remover ponto","error")}},[t,v,C]),L=(0,f.useMemo)(()=>({totalPoints:z.totalPoints,averagePain:z.averagePainLevel,highPainPoints:q.points.filter(a=>a.painLevel>=7).length,recentTrend:z.painTrends.length>=2?z.painTrends[z.painTrends.length-1].averagePain-z.painTrends[z.painTrends.length-2].averagePain:0}),[z,q.points]);return B?(0,e.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[(0,e.jsx)(h.Ilq,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),(0,e.jsx)("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Erro no Mapa Corporal"}),(0,e.jsx)("p",{className:"text-red-600 mb-4",children:B}),(0,e.jsx)("button",{onClick:y,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Tentar Novamente"})]}):(0,e.jsxs)("div",{className:`space-y-6 ${c}`,children:[p&&(0,e.jsxs)(g.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,e.jsxs)("div",{className:"bg-slate-50 rounded-xl p-4 text-center",children:[(0,e.jsx)("div",{className:"text-2xl font-bold text-slate-800",children:L.totalPoints}),(0,e.jsx)("div",{className:"text-sm text-slate-600",children:"Pontos Total"})]}),(0,e.jsxs)("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[(0,e.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:L.averagePain.toFixed(1)}),(0,e.jsx)("div",{className:"text-sm text-blue-600",children:"Dor M\xe9dia"})]}),(0,e.jsxs)("div",{className:"bg-red-50 rounded-xl p-4 text-center",children:[(0,e.jsx)("div",{className:"text-2xl font-bold text-red-600",children:L.highPainPoints}),(0,e.jsx)("div",{className:"text-sm text-red-600",children:"Dor Intensa (7+)"})]}),(0,e.jsxs)("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[(0,e.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,e.jsx)(h.ntg,{className:`w-5 h-5 ${L.recentTrend>0?"text-red-500":"text-green-500"}`}),(0,e.jsxs)("span",{className:`text-lg font-bold ${L.recentTrend>0?"text-red-600":"text-green-600"}`,children:[L.recentTrend>0?"+":"",L.recentTrend.toFixed(1)]})]}),(0,e.jsx)("div",{className:"text-sm text-slate-600",children:"Tend\xeancia"})]})]}),(0,e.jsx)("div",{className:"flex justify-center",children:(0,e.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-1 flex",children:[(0,e.jsx)("button",{onClick:()=>w("front"),className:`px-6 py-2 rounded-lg transition-all ${"front"===q.activeSide?"bg-blue-500 text-white shadow-sm":"text-slate-600 hover:text-slate-800"}`,children:"Vista Frontal"}),(0,e.jsx)("button",{onClick:()=>w("back"),className:`px-6 py-2 rounded-lg transition-all ${"back"===q.activeSide?"bg-blue-500 text-white shadow-sm":"text-slate-600 hover:text-slate-800"}`,children:"Vista das Costas"})]})}),(0,e.jsx)(g.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:"bg-white rounded-2xl border border-slate-200 p-6",children:(0,e.jsx)(k.A,{side:q.activeSide,points:q.points,onPointClick:I,onSVGClick:H,selectedPointId:q.selectedPoint?.id,isLoading:A,readOnly:d})},q.activeSide),(0,e.jsx)(n.A,{}),o&&(0,e.jsx)(m.A,{points:q.points,selectedDate:q.timelineDate,onDateChange:x,analytics:z}),(0,e.jsx)(g.AnimatePresence,{children:D&&(0,e.jsx)(l.A,{point:q.selectedPoint,isOpen:D,onClose:()=>{E(!1),G(null),v()},onSave:J,onDelete:q.selectedPoint?()=>K(q.selectedPoint.id):void 0,coordinates:F,bodyRegion:"other"})})]})};d()}catch(a){d(a)}})},23508:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>r});var e=c(8732),f=c(82015),g=c(63220),h=c(51302),i=c(56884),j=c(98825),k=c(42971),l=c(90382),m=a([g,i,j,k,l]);[g,i,j,k,l]=m.then?(await m)():m;let n=k.object({painLevel:k.number().min(0).max(10),painType:k.enum(["acute","chronic","intermittent","constant"]),bodyRegion:k.enum(["cervical","thoracic","lumbar","sacral","shoulder","elbow","wrist","hip","knee","ankle","head","other"]),description:k.string().min(1,"Descri\xe7\xe3o \xe9 obrigat\xf3ria").max(500,"Descri\xe7\xe3o muito longa"),symptoms:k.array(k.string()).min(1,"Pelo menos um sintoma deve ser selecionado")}),o=["Dor aguda","Dor latejante","Queima\xe7\xe3o","Formigamento","Dorm\xeancia","Rigidez","Incha\xe7o","Sensibilidade ao toque","Dor irradiada","Espasmo muscular","Fraqueza","Limita\xe7\xe3o de movimento"],p={acute:"Aguda",chronic:"Cr\xf4nica",intermittent:"Intermitente",constant:"Constante"},q={cervical:"Cervical",thoracic:"Tor\xe1cica",lumbar:"Lombar",sacral:"Sacral",shoulder:"Ombro",elbow:"Cotovelo",wrist:"Punho",hip:"Quadril",knee:"Joelho",ankle:"Tornozelo",head:"Cabe\xe7a",other:"Outro"},r=({point:a,isOpen:b,onClose:c,onSave:d,onDelete:k,coordinates:m,bodyRegion:r})=>{let[s,t]=(0,f.useState)(!1),[u,v]=(0,f.useState)(""),w=!!a,{control:x,handleSubmit:y,reset:z,watch:A,setValue:B,formState:{errors:C,isValid:D}}=(0,i.useForm)({resolver:(0,j.zodResolver)(n),defaultValues:{painLevel:5,painType:"acute",bodyRegion:"other",description:"",symptoms:[]},mode:"onChange"}),E=A("symptoms");A("painLevel"),(0,f.useEffect)(()=>{a?z({painLevel:a.painLevel,painType:a.painType,bodyRegion:a.bodyRegion,description:a.description,symptoms:a.symptoms||[]}):z({painLevel:5,painType:"acute",bodyRegion:r||"other",description:"",symptoms:[]})},[a,r,z]);let F=(0,f.useCallback)(async b=>{t(!0);try{await d({...b,coordinates:m||a?.coordinates||{x:.5,y:.5},updatedAt:new Date})}catch(a){console.error("Error saving point:",a)}finally{t(!1)}},[d,m,a]),G=(0,f.useCallback)(a=>{let b=E||[],c=b.includes(a)?b.filter(b=>b!==a):[...b,a];B("symptoms",c,{shouldValidate:!0})},[E,B]),H=(0,f.useCallback)(()=>{u.trim()&&!E.includes(u.trim())&&(B("symptoms",[...E,u.trim()],{shouldValidate:!0}),v(""))},[u,E,B]),I=(0,f.useCallback)(async()=>{if(k&&window.confirm("Tem certeza que deseja remover este ponto de dor?"))try{t(!0),await k()}catch(a){console.error("Error deleting point:",a)}finally{t(!1)}},[k]);return b?(0,e.jsx)(g.AnimatePresence,{children:(0,e.jsx)(g.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:c,children:(0,e.jsx)(g.motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",duration:.3},className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:a=>a.stopPropagation(),children:(0,e.jsxs)("form",{onSubmit:y(F),className:"p-6 space-y-6",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-200 pb-4",children:[(0,e.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:w?"Editar Ponto de Dor":"Adicionar Ponto de Dor"}),(0,e.jsx)("button",{type:"button",onClick:c,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Fechar modal",children:(0,e.jsx)(h.X,{size:24})})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"N\xedvel de Dor (0-10) *"}),(0,e.jsx)(i.Controller,{name:"painLevel",control:x,render:({field:a})=>(0,e.jsx)(l.A,{value:a.value,onChange:a.onChange,showValue:!0})}),C.painLevel&&(0,e.jsxs)("p",{className:"text-red-500 text-sm flex items-center gap-1",children:[(0,e.jsx)(h.RIJ,{size:16}),C.painLevel.message]})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de Dor *"}),(0,e.jsx)(i.Controller,{name:"painType",control:x,render:({field:a})=>(0,e.jsx)("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(p).map(([b,c])=>(0,e.jsxs)("label",{className:`flex items-center p-3 border rounded-lg cursor-pointer transition-all ${a.value===b?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:[(0,e.jsx)("input",{type:"radio",value:b,checked:a.value===b,onChange:b=>a.onChange(b.target.value),className:"sr-only"}),(0,e.jsx)("span",{className:"font-medium",children:c})]},b))})})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Regi\xe3o do Corpo *"}),(0,e.jsx)(i.Controller,{name:"bodyRegion",control:x,render:({field:a})=>(0,e.jsx)("select",{...a,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:Object.entries(q).map(([a,b])=>(0,e.jsx)("option",{value:a,children:b},a))})})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Sintomas *"}),(0,e.jsx)("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-3",children:o.map(a=>(0,e.jsxs)("label",{className:`flex items-center p-2 rounded-md cursor-pointer transition-all ${E.includes(a)?"bg-blue-50 text-blue-700":"hover:bg-gray-50"}`,children:[(0,e.jsx)("input",{type:"checkbox",checked:E.includes(a),onChange:()=>G(a),className:"mr-2 text-blue-500 focus:ring-blue-500 rounded"}),(0,e.jsx)("span",{className:"text-sm",children:a})]},a))}),(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsx)("input",{type:"text",value:u,onChange:a=>v(a.target.value),placeholder:"Adicionar sintoma personalizado",className:"flex-1 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onKeyDown:a=>"Enter"===a.key&&(a.preventDefault(),H())}),(0,e.jsx)("button",{type:"button",onClick:H,disabled:!u.trim(),className:"px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,e.jsx)(h.FWt,{size:16})})]}),C.symptoms&&(0,e.jsxs)("p",{className:"text-red-500 text-sm flex items-center gap-1",children:[(0,e.jsx)(h.RIJ,{size:16}),C.symptoms.message]})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Descri\xe7\xe3o Detalhada *"}),(0,e.jsx)(i.Controller,{name:"description",control:x,render:({field:a})=>(0,e.jsx)("textarea",{...a,rows:4,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Descreva a dor, quando come\xe7ou, o que a piora ou melhora, etc."})}),C.description&&(0,e.jsxs)("p",{className:"text-red-500 text-sm flex items-center gap-1",children:[(0,e.jsx)(h.RIJ,{size:16}),C.description.message]})]}),(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200",children:[(0,e.jsxs)("button",{type:"submit",disabled:!D||s,className:"flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex-1",children:[(0,e.jsx)(h.eMP,{size:20}),s?"Salvando...":"Salvar"]}),w&&k&&(0,e.jsxs)("button",{type:"button",onClick:I,disabled:s,className:"flex items-center justify-center gap-2 px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,e.jsx)(h.TBR,{size:20}),"Remover"]}),(0,e.jsx)("button",{type:"button",onClick:c,disabled:s,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancelar"})]})]})})})}):null};d()}catch(a){d(a)}})},31186:(a,b,c)=>{c.d(b,{A:()=>i});var d=c(8732),e=c(82015),f=c(50284),g=c(50158),h=c(51302);let i=({metric:a,notes:b})=>{let c=(0,e.useMemo)(()=>b.filter(b=>b.metricResults?.some(b=>b.metricId===a.id)).map(b=>({date:b.date,value:b.metricResults.find(b=>b.metricId===a.id).value})).sort((a,b)=>new Date(a.date.split("/").reverse().join("-")).getTime()-new Date(b.date.split("/").reverse().join("-")).getTime()),[a.id,b]);return c.length<2?(0,d.jsx)(g.A,{title:`Evolu\xe7\xe3o: ${a.name}`,icon:(0,d.jsx)(h.bl6,{}),children:(0,d.jsx)("p",{className:"text-sm text-center text-slate-500 py-8",children:"Dados insuficientes para gerar o gr\xe1fico. \xc9 necess\xe1rio registrar esta m\xe9trica em pelo menos duas sess\xf5es."})}):(0,d.jsx)(g.A,{title:`Evolu\xe7\xe3o: ${a.name}`,icon:(0,d.jsx)(h.bl6,{}),children:(0,d.jsx)("div",{className:"h-64 -ml-4",children:(0,d.jsx)(f.uf,{width:"100%",height:"100%",children:(0,d.jsxs)(f.bl,{data:c,margin:{top:5,right:20,left:0,bottom:5},children:[(0,d.jsx)(f.dC,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),(0,d.jsx)(f.WX,{dataKey:"date",stroke:"#64748b",fontSize:12,tickLine:!1,axisLine:!1}),(0,d.jsx)(f.h8,{stroke:"#64748b",fontSize:12,tickLine:!1,axisLine:!1,domain:["dataMin - 1","dataMax + 1"],unit:a.unit?` ${a.unit}`:""}),(0,d.jsx)(f.m_,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"0.5rem"},labelStyle:{color:"#1e293b",fontWeight:"bold"},formatter:b=>[`${b} ${a.unit||""}`,a.name]}),(0,d.jsx)(f.N1,{type:"monotone",dataKey:"value",name:a.name,stroke:"#0ea5e9",strokeWidth:2,dot:{r:4},activeDot:{r:8}})]})})})})}},43600:(a,b,c)=>{c.d(b,{D:()=>m});var d=c(82015);let e=[{id:"bp_1",patientId:"patient_1",coordinates:{x:.45,y:.25},bodySide:"front",painLevel:7,painType:"acute",bodyRegion:"shoulder",description:"Dor no ombro direito que piora com movimento, especialmente ao levantar o bra\xe7o",symptoms:["Dor aguda","Limita\xe7\xe3o de movimento","Sensibilidade ao toque"],createdAt:new Date("2024-01-15T10:30:00Z"),updatedAt:new Date("2024-01-15T10:30:00Z"),createdBy:"user_1",sessionId:"session_1"},{id:"bp_2",patientId:"patient_1",coordinates:{x:.55,y:.45},bodySide:"front",painLevel:5,painType:"chronic",bodyRegion:"elbow",description:"Rigidez articular no cotovelo com desconforto matinal",symptoms:["Rigidez","Dor latejante","Incha\xe7o"],createdAt:new Date("2024-01-14T09:15:00Z"),updatedAt:new Date("2024-01-14T09:15:00Z"),createdBy:"user_1"},{id:"bp_3",patientId:"patient_1",coordinates:{x:.5,y:.35},bodySide:"back",painLevel:8,painType:"constant",bodyRegion:"lumbar",description:"Dor lombar constante que irradia para as pernas, piora ao ficar sentado",symptoms:["Dor irradiada","Espasmo muscular","Formigamento","Fraqueza"],createdAt:new Date("2024-01-13T14:20:00Z"),updatedAt:new Date("2024-01-13T14:20:00Z"),createdBy:"user_1"},{id:"bp_4",patientId:"patient_1",coordinates:{x:.42,y:.8},bodySide:"front",painLevel:6,painType:"intermittent",bodyRegion:"knee",description:"Dor intermitente no joelho esquerdo, especialmente ap\xf3s atividades",symptoms:["Dor intermitente","Incha\xe7o","Rigidez"],createdAt:new Date("2024-01-12T16:45:00Z"),updatedAt:new Date("2024-01-12T16:45:00Z"),createdBy:"user_1"},{id:"bp_5",patientId:"patient_1",coordinates:{x:.5,y:.15},bodySide:"front",painLevel:4,painType:"acute",bodyRegion:"cervical",description:"Tens\xe3o cervical ap\xf3s longas horas no computador",symptoms:["Tens\xe3o muscular","Dor de cabe\xe7a","Rigidez"],createdAt:new Date("2024-01-11T11:30:00Z"),updatedAt:new Date("2024-01-11T11:30:00Z"),createdBy:"user_1"}],f=a=>new Promise(b=>setTimeout(b,a)),g=async a=>{await f(300);try{return e.filter(b=>b.patientId===a).sort((a,b)=>new Date(b.createdAt).getTime()-new Date(a.createdAt).getTime())}catch(a){throw console.error("Error fetching body points:",a),Error("Failed to fetch body points")}},h=async a=>{await f(400);try{if(!a.patientId)throw Error("Patient ID is required");if(!a.coordinates)throw Error("Coordinates are required");if(a.painLevel<0||a.painLevel>10)throw Error("Pain level must be between 0-10");if(!a.description?.trim())throw Error("Description is required");if(!a.symptoms?.length)throw Error("At least one symptom is required");let b={...a,id:`bp_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:new Date,updatedAt:new Date};return e.unshift(b),b}catch(a){throw console.error("Error adding body point:",a),a instanceof Error?a:Error("Failed to add body point")}},i=async(a,b)=>{await f(400);let c=e.findIndex(b=>b.id===a);if(-1===c)throw Error("Ponto n\xe3o encontrado");let d={...e[c],...b,id:a,created_at:e[c].created_at};return e[c]=d,d},j=async a=>{await f(300);let b=e.findIndex(b=>b.id===a);if(-1===b)throw Error("Ponto n\xe3o encontrado");e.splice(b,1)},k=async a=>{await f(350);try{let b=e.filter(b=>b.patientId===a);if(0===b.length)return{totalPoints:0,averagePainLevel:0,painTrends:[],regionDistribution:{},painTypeDistribution:{},symptomFrequency:{}};let c=b.reduce((a,b)=>{let c=new Date(b.createdAt).toDateString();return a[c]||(a[c]=[]),a[c].push(b),a},{}),d=Object.entries(c).map(([a,b])=>({date:a,averagePain:Math.round(b.reduce((a,b)=>a+b.painLevel,0)/b.length*10)/10,pointCount:b.length})).sort((a,b)=>new Date(a.date).getTime()-new Date(b.date).getTime()),f=b.reduce((a,b)=>(a[b.bodyRegion]=(a[b.bodyRegion]||0)+1,a),{}),g=b.reduce((a,b)=>(a[b.painType]=(a[b.painType]||0)+1,a),{}),h=b.reduce((a,b)=>(b.symptoms.forEach(b=>{a[b]=(a[b]||0)+1}),a),{});return{totalPoints:b.length,averagePainLevel:Math.round(b.reduce((a,b)=>a+b.painLevel,0)/b.length*10)/10,painTrends:d,regionDistribution:f,painTypeDistribution:g,symptomFrequency:h}}catch(a){throw console.error("Error calculating analytics:",a),Error("Failed to calculate body map analytics")}};var l=c(99597);let m=(a,b)=>{let{showToast:c}=(0,l.dj)(),[e,f]=(0,d.useState)({points:[],selectedPoint:null,activeSide:"front",timelineDate:new Date,isLoading:!1,error:null}),[m,n]=(0,d.useState)({totalPoints:0,averagePainLevel:0,painTrends:[],regionDistribution:{},painTypeDistribution:{},symptomFrequency:{}}),[o,p]=(0,d.useState)(!1),[q,r]=(0,d.useState)(null),s=(0,d.useCallback)(async()=>{p(!0),r(null);try{let[b,c]=await Promise.all([g(a),k(a)]);f(a=>({...a,points:b,isLoading:!1,error:null})),n(c)}catch(b){let a=b.message||"Failed to fetch body map data";r(a),f(b=>({...b,isLoading:!1,error:a}))}finally{p(!1)}},[a]);return(0,d.useEffect)(()=>{s()},[s]),{state:e,analytics:m,actions:(0,d.useMemo)(()=>({addPoint:async b=>{p(!0);try{let d=await h(b);f(a=>({...a,points:[d,...a.points]}));let e=await k(a);n(e),c("Ponto adicionado com sucesso!","success")}catch(a){throw c(a.message||"Erro ao adicionar ponto","error"),a}finally{p(!1)}},updatePoint:async(b,d)=>{p(!0);try{let e=await i(b,d);f(a=>({...a,points:a.points.map(a=>a.id===b?e:a)}));let g=await k(a);n(g),c("Ponto atualizado com sucesso!","success")}catch(a){throw c(a.message||"Erro ao atualizar ponto","error"),a}finally{p(!1)}},deletePoint:async b=>{p(!0);try{await j(b),f(a=>({...a,points:a.points.filter(a=>a.id!==b),selectedPoint:a.selectedPoint?.id===b?null:a.selectedPoint}));let d=await k(a);n(d),c("Ponto removido com sucesso!","success")}catch(a){throw c(a.message||"Erro ao remover ponto","error"),a}finally{p(!1)}},selectPoint:a=>{f(b=>({...b,selectedPoint:a}))},clearSelection:()=>{f(a=>({...a,selectedPoint:null}))},switchSide:a=>{f(b=>({...b,activeSide:a,selectedPoint:null}))},setTimelineDate:a=>{f(b=>({...b,timelineDate:a}))},refreshData:async()=>{await s()},undoLastAction:()=>{console.log("Undo functionality would be implemented here")},redoLastAction:()=>{console.log("Redo functionality would be implemented here")}}),[a,c,s]),isLoading:o,error:q}}},50158:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(8732);c(82015);let e=({title:a,icon:b,children:c,actionButton:e})=>(0,d.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm h-full flex flex-col border border-slate-200/80",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 flex items-center",children:[b&&(0,d.jsx)("span",{className:"mr-3 text-sky-500",children:b}),a]}),e]}),(0,d.jsx)("div",{className:"flex-grow",children:c})]})},60723:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>j});var e=c(8732),f=c(82015),g=c(63220),h=a([g]);g=(h.then?(await h)():h)[0];let i={front:{head:{x:.5,y:.08,radius:.05},neck:{x:.5,y:.15,radius:.03},chest:{x:.5,y:.25,radius:.08},leftShoulder:{x:.35,y:.2,radius:.04},rightShoulder:{x:.65,y:.2,radius:.04},leftArm:{x:.25,y:.35,radius:.03},rightArm:{x:.75,y:.35,radius:.03},leftElbow:{x:.2,y:.45,radius:.025},rightElbow:{x:.8,y:.45,radius:.025},leftWrist:{x:.15,y:.55,radius:.02},rightWrist:{x:.85,y:.55,radius:.02},abdomen:{x:.5,y:.4,radius:.06},pelvis:{x:.5,y:.55,radius:.05},leftHip:{x:.42,y:.58,radius:.03},rightHip:{x:.58,y:.58,radius:.03},leftThigh:{x:.42,y:.7,radius:.04},rightThigh:{x:.58,y:.7,radius:.04},leftKnee:{x:.42,y:.8,radius:.025},rightKnee:{x:.58,y:.8,radius:.025},leftShin:{x:.42,y:.9,radius:.02},rightShin:{x:.58,y:.9,radius:.02},leftAnkle:{x:.42,y:.95,radius:.02},rightAnkle:{x:.58,y:.95,radius:.02}},back:{head:{x:.5,y:.08,radius:.05},neck:{x:.5,y:.15,radius:.03},upperBack:{x:.5,y:.25,radius:.08},leftShoulder:{x:.35,y:.2,radius:.04},rightShoulder:{x:.65,y:.2,radius:.04},midBack:{x:.5,y:.4,radius:.06},lowerBack:{x:.5,y:.52,radius:.06},leftGlute:{x:.42,y:.6,radius:.04},rightGlute:{x:.58,y:.6,radius:.04},leftHamstring:{x:.42,y:.72,radius:.04},rightHamstring:{x:.58,y:.72,radius:.04},leftCalf:{x:.42,y:.88,radius:.03},rightCalf:{x:.58,y:.88,radius:.03}}},j=({side:a,points:b,onPointClick:c,onSVGClick:d,selectedPointId:h,isLoading:j=!1,readOnly:k=!1,className:l=""})=>{let[m,n]=(0,f.useState)(null),o=(0,f.useMemo)(()=>b.filter(b=>b.bodySide===a),[b,a]),p=(0,f.useCallback)(b=>{if(k||j)return;let c=b.currentTarget.getBoundingClientRect(),e=(b.clientX-c.left)/c.width,f=(b.clientY-c.top)/c.height,g=((a,b,c)=>{let d=i[c];for(let[c,e]of Object.entries(d))if(Math.sqrt(Math.pow(a-e.x,2)+Math.pow(b-e.y,2))<=e.radius)return c;return"other"})(e,f,a);d({x:e,y:f},g)},[k,j,a,d]),q=(0,f.useCallback)((a,b)=>{a.stopPropagation(),c(b)},[c]),r=(0,f.useMemo)(()=>`
        M 200 60
        C 190 40, 210 40, 220 60
        L 220 80
        C 240 90, 250 120, 260 150
        L 280 200
        C 285 250, 280 300, 275 350
        L 270 400
        C 268 450, 265 500, 260 550
        L 250 600
        L 240 650
        C 235 700, 240 750, 245 800
        L 250 850
        L 255 900
        L 260 950
        L 250 1000
        L 150 1000
        L 140 950
        L 145 900
        L 150 850
        C 155 800, 160 750, 155 700
        L 150 650
        L 140 600
        L 130 550
        C 125 500, 122 450, 120 400
        L 115 350
        C 110 300, 105 250, 110 200
        L 130 150
        C 140 120, 150 90, 170 80
        L 170 60
        C 180 40, 200 40, 200 60
        Z
      `,[a]);return(0,e.jsxs)("div",{className:`relative w-full max-w-md mx-auto ${l}`,children:[(0,e.jsxs)("svg",{viewBox:"0 0 400 1000",className:"w-full h-auto cursor-pointer touch-manipulation",onClick:p,role:"img","aria-label":`Mapa corporal - vista ${"front"===a?"frontal":"das costas"}`,children:[(0,e.jsx)(g.motion.path,{d:r,fill:"#f8fafc",stroke:"#e2e8f0",strokeWidth:"2",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5}}),Object.entries(i[a]).map(([a,b])=>(0,e.jsx)("circle",{cx:400*b.x,cy:1e3*b.y,r:400*b.radius,fill:"transparent",className:"hover:fill-blue-100 hover:fill-opacity-30 transition-all cursor-pointer","data-region":a},a)),o.map(a=>(0,e.jsxs)(g.motion.g,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:300,damping:25},children:[(0,e.jsx)("circle",{cx:400*a.coordinates.x+2,cy:1e3*a.coordinates.y+2,r:h===a.id?12:m===a.id?10:8,fill:"rgba(0,0,0,0.15)"}),(0,e.jsx)(g.motion.circle,{cx:400*a.coordinates.x,cy:1e3*a.coordinates.y,r:h===a.id?12:m===a.id?10:8,fill:(a=>a<=3?"#22c55e":a<=6?"#eab308":a<=8?"#f97316":"#ef4444")(a.painLevel),stroke:h===a.id?"#1d4ed8":"#ffffff",strokeWidth:h===a.id?3:2,className:"cursor-pointer",onClick:b=>q(b,a),onMouseEnter:()=>n(a.id),onMouseLeave:()=>n(null),whileHover:{scale:1.2},whileTap:{scale:.9},animate:{scale:h===a.id?1.2:1,stroke:h===a.id?"#1d4ed8":"#ffffff"}}),(0,e.jsx)("text",{x:400*a.coordinates.x,y:1e3*a.coordinates.y+4,textAnchor:"middle",className:"text-xs font-bold fill-white pointer-events-none select-none",style:{fontSize:"12px"},children:a.painLevel}),m===a.id&&(0,e.jsxs)(g.motion.g,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[(0,e.jsx)("rect",{x:400*a.coordinates.x-60,y:1e3*a.coordinates.y-50,width:"120",height:"35",rx:"6",fill:"rgba(0,0,0,0.9)",className:"pointer-events-none"}),(0,e.jsxs)("text",{x:400*a.coordinates.x,y:1e3*a.coordinates.y-35,textAnchor:"middle",className:"text-xs fill-white pointer-events-none select-none",style:{fontSize:"10px"},children:[a.painType," - ",a.painLevel,"/10"]}),(0,e.jsx)("text",{x:400*a.coordinates.x,y:1e3*a.coordinates.y-22,textAnchor:"middle",className:"text-xs fill-gray-300 pointer-events-none select-none",style:{fontSize:"8px"},children:a.bodyRegion})]})]},a.id)),j&&(0,e.jsx)(g.motion.g,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,e.jsx)("circle",{cx:"200",cy:"500",r:"20",fill:"none",stroke:"#3b82f6",strokeWidth:"3",strokeLinecap:"round",strokeDasharray:"31.416",strokeDashoffset:"31.416",children:(0,e.jsx)("animate",{attributeName:"stroke-dasharray",dur:"2s",values:"0 31.416;15.708 15.708;0 31.416",repeatCount:"indefinite"})})})]}),(0,e.jsxs)("div",{className:"sr-only",children:[(0,e.jsxs)("p",{children:["Mapa corporal interativo mostrando ",o.length," pontos de dor."]}),(0,e.jsx)("p",{children:"Use as teclas Tab e Enter para navegar pelos pontos."}),o.map(a=>(0,e.jsxs)("button",{onClick:()=>c(a),children:[a.painType," na regi\xe3o ",a.bodyRegion,", n\xedvel ",a.painLevel]},a.id))]})]})};d()}catch(a){d(a)}})},63014:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>o});var e=c(8732),f=c(82015),g=c(51302),h=c(99597),i=c(96333),j=c(5181),k=c(22320),l=c(19119),m=c(77590),n=a([l]);l=(n.then?(await n)():n)[0];let o=({isOpen:a,onClose:b,patient:c,onApply:d})=>{let[n,o]=(0,f.useState)(!1),[p,q]=(0,f.useState)([]),[r,s]=(0,f.useState)(null),[t,u]=(0,f.useState)(""),[v,w]=(0,f.useState)(!1),{showToast:x}=(0,h.dj)();(0,f.useEffect)(()=>{a&&c.conditions&&c.conditions.length>0&&(async()=>{o(!0),s(null),u("");try{let a=c.conditions?.[0]?.name||"",b=await i.W(a);q(b)}catch(a){x("Erro ao buscar sugest\xf5es de protocolos.","error")}finally{o(!1)}})()},[a,c.conditions,x]);let y=async a=>{o(!0),s(a);try{let b=await i.D(a);u(b)}catch(a){x("Erro ao carregar detalhes do protocolo.","error"),s(null)}finally{o(!1)}},z=async()=>{if(r&&t){w(!0);try{let a=await j._z(),b={treatmentGoals:a.treatmentGoals,exercises:a.exercises};await k.td(c.id,b),d()}catch(a){x("Falha ao aplicar o protocolo.","error")}finally{w(!1)}}};return a?(0,e.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:b,children:(0,e.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",onClick:a=>a.stopPropagation(),children:[(0,e.jsxs)("header",{className:"flex items-center justify-between p-5 border-b border-slate-200",children:[(0,e.jsxs)("h2",{className:"text-lg font-bold text-slate-800 flex items-center",children:[(0,e.jsx)(g.g5W,{className:"w-5 h-5 mr-3 text-sky-500"}),"Sugest\xe3o de Protocolo Cl\xednico"]}),(0,e.jsx)("button",{onClick:b,className:"p-2 rounded-full hover:bg-slate-100",children:(0,e.jsx)(g.X,{className:"w-5 h-5 text-slate-600"})})]}),(0,e.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:r?(0,e.jsxs)("div",{children:[(0,e.jsxs)("button",{onClick:()=>s(null),className:"flex items-center text-sm font-semibold text-sky-600 mb-4",children:[(0,e.jsx)(g.nkM,{className:"w-4 h-4 mr-2"})," Voltar para Sugest\xf5es"]}),n?(0,e.jsx)(l.E,{className:"h-64 w-full"}):(0,e.jsx)("div",{className:"bg-slate-50 p-4 rounded-lg max-h-96 overflow-y-auto border",children:(0,e.jsx)(m.A,{content:t})})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("p",{className:"text-sm text-slate-600 mb-4",children:["Com base no diagn\xf3stico ",(0,e.jsxs)("strong",{className:"text-slate-800",children:['"',c.conditions?.[0]?.name,'"']}),", sugerimos os seguintes protocolos:"]}),n?(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(l.E,{className:"h-12 w-full"}),(0,e.jsx)(l.E,{className:"h-12 w-full"})]}):p.length>0?(0,e.jsx)("ul",{className:"space-y-2",children:p.map(a=>(0,e.jsxs)("li",{onClick:()=>y(a),className:"p-3 border rounded-lg hover:bg-sky-50 hover:border-sky-300 cursor-pointer",children:[(0,e.jsx)("h4",{className:"font-semibold text-slate-800",children:a.name}),(0,e.jsx)("p",{className:"text-xs text-slate-500",children:a.description})]},a.id))}):(0,e.jsx)("p",{className:"text-center text-slate-500 py-6",children:"Nenhum protocolo sugerido encontrado para este diagn\xf3stico."})]})}),r&&(0,e.jsxs)("footer",{className:"flex justify-end items-center p-4 border-t border-slate-200 bg-slate-50",children:[(0,e.jsx)("button",{onClick:b,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 mr-2",children:"Cancelar"}),(0,e.jsxs)("button",{onClick:z,disabled:v||n,className:"px-4 py-2 text-sm font-medium text-white bg-teal-500 rounded-lg hover:bg-teal-600 flex items-center disabled:bg-teal-300",children:[v?(0,e.jsx)(g.aHM,{className:"w-4 h-4 mr-2 animate-spin"}):(0,e.jsx)(g.rAV,{className:"w-4 h-4 mr-2"}),v?"Aplicando...":"Aplicar Protocolo ao Plano"]})]})]})}):null};d()}catch(a){d(a)}})},63167:(a,b,c)=>{c.d(b,{JQ:()=>h,fd:()=>j,x1:()=>i});var d=c(4183);let e=[...d.Bj],f=[...d.tq],g=a=>new Promise(b=>setTimeout(b,a)),h=async()=>(await g(300),[...f]),i=async a=>(await g(500),a)?[...e].filter(b=>b.projectId===a):[...e],j=async(a,b)=>{if(await g(400),a.id){let c={...e.find(b=>b.id===a.id),...a,actorUserId:b};return e=e.map(b=>b.id===a.id?c:b),c}{let c={id:`task_${Date.now()}`,...a,actorUserId:b};return e.unshift(c),c}}},65600:(a,b,c)=>{c.d(b,{A0:()=>k,Mp:()=>n,Ns:()=>m,bb:()=>i,oh:()=>l,vN:()=>j});var d=c(4183),e=c(41906),f=c.n(e);let g=[...d.ps],h=a=>new Promise(b=>setTimeout(b,a)),i=async a=>(await h(300),g.filter(b=>b.patientId===a).sort((a,b)=>b.generatedAt.getTime()-a.generatedAt.getTime())),j=async a=>(await h(300),g.find(b=>b.id===a)),k=async(a,b)=>{await h(400);let c=g.findIndex(b=>b.id===a);if(-1===c)throw Error("Relat\xf3rio n\xe3o encontrado.");return g[c]={...g[c],...b},g[c]},l=async(a,b,c)=>{await h(1e3);let e=d.N.find(b=>b.id===a),f=d.Tf.filter(b=>b.patientId===a).slice(0,3);if(!e)throw Error("Paciente n\xe3o encontrado.");e.name,e.conditions?.[0]?.name,e.medicalAlerts,f.map(a=>`
        Data: ${a.date}
        Subjetivo: ${a.subjective}
        Avalia\xe7\xe3o: ${a.assessment}
        Plano: ${a.plan}
        ---`).join("\n");let i=`**Identifica\xe7\xe3o do Paciente**
${e.name} apresenta queixa principal de ${e.conditions?.[0]?.name||"dor"}.

**Diagn\xf3stico Fisioterap\xeautico**
Baseado na avalia\xe7\xe3o inicial e evolu\xe7\xe3o das sess\xf5es, o diagn\xf3stico aponta para limita\xe7\xe3o funcional com comprometimento da mobilidade.

**Tratamento Realizado**
Foram realizadas sess\xf5es de fisioterapia com t\xe9cnicas espec\xedficas para o quadro apresentado, incluindo exerc\xedcios terap\xeauticos e modalidades f\xedsicas.

**Evolu\xe7\xe3o Cl\xednica**
${f.length>0?`O paciente demonstrou evolu\xe7\xe3o positiva durante o per\xedodo de tratamento, com melhora gradual dos sintomas relatados nas sess\xf5es.`:"Paciente em in\xedcio de tratamento."}

**Progn\xf3stico e Recomenda\xe7\xf5es**
Progn\xf3stico favor\xe1vel com continuidade do tratamento conforme prescri\xe7\xe3o fisioterap\xeautica. Recomenda-se acompanhamento m\xe9dico para evolu\xe7\xe3o do quadro.`,j={id:Date.now(),patientId:a,therapistId:d.rB.find(a=>"Fisioterapeuta"===a.role)?.id||"user_1",title:`Relat\xf3rio M\xe9dico - ${e.name}`,aiGeneratedContent:i,content:i.replace(/\*\*(.*?)\*\*/g,"<h3>$1</h3>").replace(/\n/g,"<br>"),status:"draft",recipientDoctor:b,recipientCrm:c,generatedAt:new Date};return g.unshift(j),j},m=async a=>{await h(300);let b=g.findIndex(b=>b.id===a);if(-1===b)throw Error("Relat\xf3rio n\xe3o encontrado.");let c=g[b];if(!c)throw Error("Relat\xf3rio n\xe3o encontrado.");if("finalized"!==c.status)throw Error("Apenas relat\xf3rios finalizados podem ser enviados.");return c.status="sent",c},n=async(a,b)=>{let c=d.Ko.find(b=>b.id===a.therapistId),e=document.createElement("div");e.innerHTML=`
        <div style="font-family: Arial, sans-serif; padding: 40px; color: #333; font-size: 12px; line-height: 1.6;">
            <header style="display: flex; justify-content: space-between; align-items: flex-start; border-bottom: 2px solid #0ea5e9; padding-bottom: 15px; margin-bottom: 25px;">
                <div>
                    <h1 style="font-size: 22px; color: #0284c7; margin: 0;">${d.TY.name}</h1>
                    <p style="font-size: 11px; color: #666; margin: 5px 0 0 0;">${d.TY.address}</p>
                    <p style="font-size: 11px; color: #666; margin: 5px 0 0 0;">${d.TY.phone} | ${d.TY.email}</p>
                </div>
                ${d.TY.logoUrl?`<img src="${d.TY.logoUrl}" alt="Logo" style="max-height: 50px;"/>`:""}
            </header>
            
            <h2 style="text-align: center; font-size: 16px; margin-bottom: 25px; font-weight: bold; text-transform: uppercase;">Relat\xf3rio Fisioterap\xeautico</h2>
            
            <table style="width: 100%; margin-bottom: 20px; border-collapse: collapse; font-size: 12px;">
                <tr>
                    <td style="padding: 5px; border: 1px solid #ddd; background-color: #f9f9f9; width: 120px;"><strong>Paciente:</strong></td>
                    <td style="padding: 5px; border: 1px solid #ddd;">${b.name}</td>
                </tr>
                 <tr>
                    <td style="padding: 5px; border: 1px solid #ddd; background-color: #f9f9f9;"><strong>Data de Nasc.:</strong></td>
                    <td style="padding: 5px; border: 1px solid #ddd;">${new Date(b.birthDate).toLocaleDateString("pt-BR",{timeZone:"UTC"})}</td>
                </tr>
                <tr>
                    <td style="padding: 5px; border: 1px solid #ddd; background-color: #f9f9f9;"><strong>Destinat\xe1rio:</strong></td>
                    <td style="padding: 5px; border: 1px solid #ddd;">${a.recipientDoctor||"N/A"} (CRM: ${a.recipientCrm||"N/A"})</td>
                </tr>
                 <tr>
                    <td style="padding: 5px; border: 1px solid #ddd; background-color: #f9f9f9;"><strong>Data do Relat\xf3rio:</strong></td>
                    <td style="padding: 5px; border: 1px solid #ddd;">${new Date(a.generatedAt).toLocaleDateString("pt-BR",{timeZone:"UTC"})}</td>
                </tr>
            </table>
            
            <section class="report-content">
                ${a.content.replace(/<h3>/g,'<h3 style="font-size: 14px; color: #0284c7; border-bottom: 1px solid #e2e8f0; padding-bottom: 4px; margin-top: 20px; margin-bottom: 10px;">').replace(/<\/h3>/g,"</h3>")}
            </section>
            
            <footer style="margin-top: 80px; text-align: center;">
                 <div style="display: inline-block; text-align: center;">
                    <p style="border-top: 1px solid #333; padding-top: 5px; width: 250px; margin: 0 auto;">${c?.name||"Fisioterapeuta Respons\xe1vel"}</p>
                    <p style="font-size: 11px; margin-top: 5px;">CREFITO: 12345-F</p>
                 </div>
                 <p style="font-size: 10px; color: #888; margin-top: 40px;">Este relat\xf3rio \xe9 confidencial e protegido por sigilo profissional.</p>
            </footer>
        </div>
    `;let g={margin:[.5,.5,.5,.5],filename:`relatorio-${b.name.replace(/\s/g,"_")}-${a.id}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"in",format:"a4",orientation:"portrait"}};return f()().set(g).from(e).save()}},74109:(a,b,c)=>{c.d(b,{e:()=>f});var d=c(65928),e=c(15496);function f(a,b){var c=-b;let f=(0,d.a)(a);return isNaN(c)?(0,e.w)(a,NaN):(c&&f.setDate(f.getDate()+c),f)}},79380:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>p});var e=c(8732),f=c(82015),g=c(63220),h=c(50284),i=c(51302),j=c(74109),k=c(98447),l=c(27561),m=a([g]);g=(m.then?(await m)():m)[0];let n=[{label:"7 dias",days:7},{label:"30 dias",days:30},{label:"90 dias",days:90},{label:"6 meses",days:180},{label:"1 ano",days:365}],o={acute:"#ef4444",chronic:"#f97316",intermittent:"#eab308",constant:"#8b5cf6"},p=({points:a,selectedDate:b,onDateChange:c,analytics:d,className:m=""})=>{let[p,q]=(0,f.useState)("evolution"),[r,s]=(0,f.useState)(30),[t,u]=(0,f.useState)(!1),[v,w]=(0,f.useState)(["acute","chronic","intermittent","constant"]),x=(0,f.useMemo)(()=>{let b=(0,j.e)(new Date,r);return a.filter(a=>new Date(a.createdAt)>=b&&v.includes(a.painType))},[a,r,v]),y=(0,f.useMemo)(()=>{let a=x.reduce((a,b)=>{let c=(0,k.GP)(new Date(b.createdAt),"dd/MM",{locale:l.F});return a[c]||(a[c]=[]),a[c].push(b),a},{});return Object.entries(a).map(([a,b])=>({date:a,avgPain:Number((b.reduce((a,b)=>a+b.painLevel,0)/b.length).toFixed(1)),maxPain:Math.max(...b.map(a=>a.painLevel)),minPain:Math.min(...b.map(a=>a.painLevel)),pointCount:b.length,acutePain:b.filter(a=>"acute"===a.painType).length,chronicPain:b.filter(a=>"chronic"===a.painType).length})).sort((a,b)=>{let[c,d]=a.date.split("/").map(Number),[e,f]=b.date.split("/").map(Number);return new Date(2024,d-1,c).getTime()-new Date(2024,f-1,e).getTime()})},[x]),z=(0,f.useMemo)(()=>Object.entries(d.regionDistribution).map(([a,b])=>({region:a.charAt(0).toUpperCase()+a.slice(1),count:b,fill:`hsl(${360*Math.random()}, 70%, 60%)`})),[d.regionDistribution]),A=(0,f.useMemo)(()=>Object.entries(d.symptomFrequency).sort(([,a],[,b])=>b-a).slice(0,8).map(([a,b])=>({symptom:a.length>15?a.substring(0,15)+"...":a,frequency:b})),[d.symptomFrequency]),B=(0,f.useCallback)(a=>{w(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])},[]),C=({active:a,payload:b,label:c})=>a&&b&&b.length?(0,e.jsxs)("div",{className:"bg-white p-4 border border-slate-200 rounded-lg shadow-lg",children:[(0,e.jsx)("p",{className:"font-semibold text-slate-800 mb-2",children:c}),(0,e.jsx)("div",{className:"space-y-1",children:b.map((a,b)=>(0,e.jsxs)("p",{className:"text-sm",style:{color:a.color},children:[(0,e.jsxs)("span",{className:"font-medium",children:[a.name,":"]})," ",a.value,"avgPain"===a.dataKey&&"/10"]},b))})]}):null,D=(0,f.useMemo)(()=>{if(y.length<2)return{direction:"stable",value:0};let a=y.slice(-3),b=y.slice(-6,-3);if(0===a.length||0===b.length)return{direction:"stable",value:0};let c=a.reduce((a,b)=>a+b.avgPain,0)/a.length,d=b.reduce((a,b)=>a+b.avgPain,0)/b.length,e=c-d;return{direction:e>.5?"up":e<-.5?"down":"stable",value:Number(Math.abs(e).toFixed(1))}},[y]);return(0,e.jsxs)("div",{className:`bg-white rounded-2xl border border-slate-200 p-6 space-y-6 ${m}`,children:[(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[(0,e.jsx)(i.VvS,{className:"w-5 h-5"}),"Timeline de Evolu\xe7\xe3o"]}),(0,e.jsxs)("p",{className:"text-sm text-slate-600 mt-1",children:["An\xe1lise temporal dos pontos de dor - ",x.length," pontos em ",r," dias"]})]}),(0,e.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,e.jsx)("select",{value:r,onChange:a=>s(Number(a.target.value)),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:n.map(a=>(0,e.jsx)("option",{value:a.days,children:a.label},a.days))}),(0,e.jsx)("button",{onClick:()=>u(!t),className:`px-3 py-2 rounded-lg text-sm transition-colors ${t?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:(0,e.jsx)(i.dJT,{className:"w-4 h-4"})})]})]}),(0,e.jsx)(g.AnimatePresence,{children:t&&(0,e.jsxs)(g.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border border-slate-200 rounded-lg p-4 bg-slate-50",children:[(0,e.jsx)("h4",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Filtros"}),(0,e.jsx)("div",{className:"space-y-3",children:(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm text-slate-600 mb-2",children:"Tipos de Dor:"}),(0,e.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(o).map(([a,b])=>(0,e.jsxs)("label",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-sm cursor-pointer transition-all ${v.includes(a)?"bg-white border-2":"bg-white border border-slate-300 opacity-60"}`,style:{borderColor:v.includes(a)?b:void 0},children:[(0,e.jsx)("input",{type:"checkbox",checked:v.includes(a),onChange:()=>B(a),className:"sr-only"}),(0,e.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:b}}),a.charAt(0).toUpperCase()+a.slice(1)]},a))})]})})]})}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,e.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 text-center",children:[(0,e.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:["up"===D.direction?(0,e.jsx)(i.ntg,{className:"w-5 h-5 text-red-500"}):"down"===D.direction?(0,e.jsx)(i.klo,{className:"w-5 h-5 text-green-500"}):(0,e.jsx)(i.Ilq,{className:"w-5 h-5 text-slate-500"}),(0,e.jsx)("span",{className:`font-semibold ${"up"===D.direction?"text-red-600":"down"===D.direction?"text-green-600":"text-slate-600"}`,children:"up"===D.direction?"Piorando":"down"===D.direction?"Melhorando":"Est\xe1vel"})]}),(0,e.jsx)("div",{className:"text-2xl font-bold text-slate-800",children:D.value>0?`\xb1${D.value}`:"0.0"}),(0,e.jsx)("div",{className:"text-xs text-slate-500",children:"Varia\xe7\xe3o m\xe9dia"})]}),(0,e.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,e.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:d.averagePainLevel.toFixed(1)}),(0,e.jsx)("div",{className:"text-sm text-blue-600 font-medium",children:"Dor M\xe9dia Geral"}),(0,e.jsxs)("div",{className:"text-xs text-slate-500",children:["\xdaltimos ",r," dias"]})]}),(0,e.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4 text-center",children:[(0,e.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:x.filter(a=>a.painLevel>=7).length}),(0,e.jsx)("div",{className:"text-sm text-orange-600 font-medium",children:"Epis\xf3dios Intensos"}),(0,e.jsx)("div",{className:"text-xs text-slate-500",children:"Dor ≥ 7"})]})]}),(0,e.jsx)("div",{className:"flex flex-wrap gap-2",children:[{key:"evolution",label:"Evolu\xe7\xe3o",icon:i.Ilq},{key:"distribution",label:"Distribui\xe7\xe3o",icon:i.cIm},{key:"symptoms",label:"Sintomas",icon:i.VH9},{key:"comparison",label:"Compara\xe7\xe3o",icon:i.VH9}].map(({key:a,label:b,icon:c})=>(0,e.jsxs)("button",{onClick:()=>q(a),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${p===a?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[(0,e.jsx)(c,{className:"w-4 h-4"}),b]},a))}),(0,e.jsx)(g.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white rounded-lg border border-slate-200 p-4",children:(()=>{switch(p){case"evolution":return(0,e.jsx)(h.uf,{width:"100%",height:300,children:(0,e.jsxs)(h.QF,{data:y,children:[(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:"painGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,e.jsx)("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),(0,e.jsx)("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.1})]})}),(0,e.jsx)(h.dC,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),(0,e.jsx)(h.WX,{dataKey:"date",tick:{fontSize:12}}),(0,e.jsx)(h.h8,{domain:[0,10],tick:{fontSize:12}}),(0,e.jsx)(h.m_,{content:(0,e.jsx)(C,{})}),(0,e.jsx)(h.Gk,{type:"monotone",dataKey:"avgPain",stroke:"#3b82f6",fill:"url(#painGradient)",strokeWidth:2}),(0,e.jsx)(h.N1,{type:"monotone",dataKey:"maxPain",stroke:"#ef4444",strokeWidth:2,strokeDasharray:"5 5",dot:{fill:"#ef4444",r:3}})]})});case"distribution":return(0,e.jsx)(h.uf,{width:"100%",height:300,children:(0,e.jsxs)(h.rW,{children:[(0,e.jsx)(h.Fq,{data:z,cx:"50%",cy:"50%",outerRadius:80,dataKey:"count",label:({region:a,count:b})=>`${a}: ${b}`,children:z.map((a,b)=>(0,e.jsx)(h.fh,{fill:a.fill},`cell-${b}`))}),(0,e.jsx)(h.m_,{})]})});case"symptoms":return(0,e.jsx)(h.uf,{width:"100%",height:300,children:(0,e.jsxs)(h.Es,{data:A,layout:"horizontal",children:[(0,e.jsx)(h.dC,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),(0,e.jsx)(h.WX,{type:"number",tick:{fontSize:12}}),(0,e.jsx)(h.h8,{dataKey:"symptom",type:"category",width:100,tick:{fontSize:11}}),(0,e.jsx)(h.m_,{}),(0,e.jsx)(h.yP,{dataKey:"frequency",fill:"#8b5cf6",radius:[0,4,4,0]})]})});case"comparison":return(0,e.jsx)(h.uf,{width:"100%",height:300,children:(0,e.jsxs)(h.Es,{data:y,children:[(0,e.jsx)(h.dC,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),(0,e.jsx)(h.WX,{dataKey:"date",tick:{fontSize:12}}),(0,e.jsx)(h.h8,{tick:{fontSize:12}}),(0,e.jsx)(h.m_,{content:(0,e.jsx)(C,{})}),(0,e.jsx)(h.yP,{dataKey:"acutePain",stackId:"pain",fill:"#ef4444",name:"Dor Aguda"}),(0,e.jsx)(h.yP,{dataKey:"chronicPain",stackId:"pain",fill:"#f97316",name:"Dor Cr\xf4nica"})]})});default:return null}})()},p)]})};d()}catch(a){d(a)}})},81703:(a,b,c)=>{c.d(b,{A:()=>o});var d=c(8732),e=c(82015),f=c(72393),g=c(51302),h=c(50284),i=c(5181),j=c(77590),k=c(99597),l=c(50158),m=c(10775);let n=({title:a,value:b,icon:c,subtitle:e})=>(0,d.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"p-2 bg-sky-100 text-sky-600 rounded-lg mr-3",children:c}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-slate-500",children:a}),(0,d.jsx)("p",{className:"text-xl font-bold text-slate-800",children:b})]})]}),e&&(0,d.jsx)("p",{className:"text-xs text-slate-400 mt-2",children:e})]}),o=({patient:a,appointments:b,notes:c,plan:o,onMapClick:p,onPointClick:q})=>{let{showToast:r}=(0,k.dj)(),[s,t]=(0,e.useState)(""),[u,v]=(0,e.useState)(!1),w=(0,e.useMemo)(()=>{let a=b.filter(a=>a.status===f.y2.Completed).length,d="N/A",e=o?o.frequencyPerWeek*o.durationWeeks:0;if(o&&e>0){let b=Math.round(a/e*100);d=`${b}%`}let g="N/A",h=c.filter(a=>"number"==typeof a.painScale);if(h.length>=2){let a=h[h.length-1],b=h[0];a&&b&&"number"==typeof a.painScale&&"number"==typeof b.painScale&&(g=`${a.painScale}/10 ➔ ${b.painScale}/10`)}let i=b.filter(a=>a.status===f.y2.Scheduled&&a.startTime>new Date).sort((a,b)=>a.startTime.getTime()-b.startTime.getTime())[0];return{completedSessions:a.toString(),packageProgress:d,painEvolution:g,nextAppointment:i?i.startTime.toLocaleDateString("pt-BR"):"Nenhuma",totalSessions:e}},[b,c,o]),x=(0,e.useMemo)(()=>c.filter(a=>"number"==typeof a.painScale).map(a=>({date:a.date,Dor:a.painScale})).reverse(),[c]),y=async()=>{v(!0),t("");try{let b=await i.Ms(a,c);t(b)}catch(a){r(a.message,"error")}finally{v(!1)}};return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,d.jsx)(n,{title:"Sess\xf5es Realizadas",value:w.completedSessions,icon:(0,d.jsx)(g.Ilq,{size:20})}),(0,d.jsx)(n,{title:"Progresso do Pacote",value:w.packageProgress,icon:(0,d.jsx)(g.zD7,{size:20}),subtitle:o?`${w.completedSessions}/${w.totalSessions||"N/A"} sess\xf5es`:""}),(0,d.jsx)(n,{title:"Evolu\xe7\xe3o da Dor (EVA)",value:w.painEvolution,icon:(0,d.jsx)(g.klo,{size:20})}),(0,d.jsx)(n,{title:"Pr\xf3xima Consulta",value:w.nextAppointment,icon:(0,d.jsx)(g.vTt,{size:20})})]}),(0,d.jsxs)(l.A,{title:"Mapa de Dor Interativo",icon:(0,d.jsx)(g.sDd,{}),children:[(0,d.jsx)("p",{className:"text-xs text-slate-500 mb-2 -mt-2",children:"Clique no mapa para adicionar um ponto de dor ou em um ponto existente para editar."}),(0,d.jsx)(m.A,{points:a.painPoints||[],onMapClick:p,onPointClick:q})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,d.jsx)("h3",{className:"font-semibold text-slate-800 mb-4",children:"Evolu\xe7\xe3o da Dor (EVA)"}),(0,d.jsx)("div",{className:"h-64",children:(0,d.jsx)(h.uf,{width:"100%",height:"100%",children:(0,d.jsxs)(h.bl,{data:x,margin:{top:5,right:20,left:-10,bottom:5},children:[(0,d.jsx)(h.dC,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),(0,d.jsx)(h.WX,{dataKey:"date",fontSize:12}),(0,d.jsx)(h.h8,{domain:[0,10],fontSize:12}),(0,d.jsx)(h.m_,{}),(0,d.jsx)(h.N1,{type:"monotone",dataKey:"Dor",stroke:"#ef4444",strokeWidth:2})]})})})]}),(0,d.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm flex flex-col",children:[(0,d.jsx)("h3",{className:"font-semibold text-slate-800 mb-4",children:"Resumo Cl\xednico com IA"}),(0,d.jsxs)("div",{className:"flex-1 bg-slate-50 p-4 rounded-lg overflow-y-auto min-h-[200px] border",children:[u&&(0,d.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,d.jsx)(g.aHM,{className:"animate-spin text-sky-500"})}),!u&&s&&(0,d.jsx)(j.A,{content:s}),!u&&!s&&(0,d.jsx)("p",{className:"text-sm text-center text-slate-500 h-full flex items-center justify-center",children:"Clique no bot\xe3o abaixo para gerar um resumo do progresso do paciente."})]}),(0,d.jsxs)("button",{onClick:y,disabled:u||c.length<2,className:"mt-4 w-full flex items-center justify-center bg-sky-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-sky-600 transition-colors disabled:bg-sky-300",children:[(0,d.jsx)(g.sUz,{className:"w-4 h-4 mr-2"}),u?"Analisando...":"Gerar Resumo"]})]})]})]})}},83805:(a,b,c)=>{c.d(b,{A:()=>g});var d=c(8732);c(82015);var e=c(72393),f=c(51302);let g=({appointments:a,onAdd:b})=>{let c=[...a].sort((a,b)=>b.startTime.getTime()-a.startTime.getTime()),g=new Date;return(0,d.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 flex items-center",children:[(0,d.jsx)(f.ADG,{className:"mr-3 text-sky-500"})," Linha do Tempo de Atendimentos"]}),(0,d.jsx)("button",{onClick:b,title:"Agendar nova consulta",className:"p-2 rounded-full hover:bg-sky-100 text-sky-600",children:(0,d.jsx)(f.FWt,{className:"w-5 h-5"})})]}),(0,d.jsxs)("div",{className:"relative pl-6",children:[(0,d.jsx)("div",{className:"absolute left-9 top-0 bottom-0 w-0.5 bg-slate-200"}),c.length>0?(0,d.jsx)("ul",{className:"space-y-6",children:c.map(a=>{let b=a.startTime<g,c=((a,b)=>{switch(a){case e.y2.Completed:return{icon:(0,d.jsx)(f.rAV,{className:"w-4 h-4 text-white"}),color:"bg-green-500",label:"Realizado"};case e.y2.Scheduled:return b?{icon:(0,d.jsx)(f.zD7,{className:"w-4 h-4 text-white"}),color:"bg-slate-400",label:"Agendado (passado)"}:{icon:(0,d.jsx)(f.zD7,{className:"w-4 h-4 text-white"}),color:"bg-sky-500",label:"Agendado"};case e.y2.Canceled:return{icon:(0,d.jsx)(f.Jpz,{className:"w-4 h-4 text-white"}),color:"bg-red-500",label:"Cancelado"};case e.y2.NoShow:return{icon:(0,d.jsx)(f.MAP,{className:"w-4 h-4 text-white"}),color:"bg-amber-500",label:"Faltou"};default:return{icon:(0,d.jsx)(f.zD7,{className:"w-4 h-4 text-white"}),color:"bg-slate-500",label:""}}})(a.status,b);return(0,d.jsxs)("li",{className:"relative",children:[(0,d.jsx)("div",{className:`absolute -left-3.5 top-1.5 w-8 h-8 rounded-full ${c.color} flex items-center justify-center ring-4 ring-white`,children:c.icon}),(0,d.jsxs)("div",{className:"ml-8",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("p",{className:"font-bold text-slate-800",children:a.startTime.toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"})}),(0,d.jsx)("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${c.color} text-white`,children:c.label})]}),(0,d.jsxs)("p",{className:"text-sm text-slate-600",children:[a.type," - ",a.title]}),(0,d.jsxs)("p",{className:"text-xs text-slate-500",children:[a.startTime.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})," - ",a.endTime.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]})]},a.id)})}):(0,d.jsx)("div",{className:"text-sm text-slate-500 text-center py-4",children:"Nenhuma consulta encontrada."})]})]})}},90382:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>k});var e=c(8732),f=c(82015),g=c(63220),h=a([g]);g=(h.then?(await h)():h)[0];let i={0:"Sem dor",1:"Muito leve",2:"Leve",3:"Moderado baixo",4:"Moderado",5:"Moderado alto",6:"Forte",7:"Muito forte",8:"Intenso",9:"Excruciante",10:"Insuport\xe1vel"},j=a=>0===a?"#e2e8f0":a<=3?"#22c55e":a<=6?"#eab308":a<=8?"#f97316":"#ef4444",k=({value:a,onChange:b,showValue:c=!0,disabled:d=!1,size:h="medium",showLabels:k=!0,className:l=""})=>{let m=(0,f.useMemo)(()=>(a=>{switch(a){case"small":return{container:"gap-1",button:"w-6 h-6 text-xs",value:"text-lg",label:"text-xs"};case"large":return{container:"gap-3",button:"w-12 h-12 text-lg",value:"text-3xl",label:"text-base"};default:return{container:"gap-2",button:"w-8 h-8 text-sm",value:"text-xl",label:"text-sm"}}})(h),[h]),n=a=>{d||b(a)};return(0,e.jsxs)("div",{className:`space-y-4 ${l}`,children:[c&&(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsxs)(g.motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:`font-bold ${m.value}`,style:{color:j(a)},children:[a,"/10"]},a),k&&(0,e.jsx)(g.motion.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`text-gray-600 font-medium ${m.label} mt-1`,children:i[a]},a)]}),(0,e.jsx)("div",{className:`flex justify-center ${m.container}`,children:Array.from({length:11},(b,c)=>{let f=a===c,h=j(c);return(0,e.jsx)(g.motion.button,{type:"button",onClick:()=>n(c),onKeyDown:b=>((b,c)=>{if(!d)switch(b.key){case"Enter":case" ":b.preventDefault(),n(c);break;case"ArrowLeft":case"ArrowDown":b.preventDefault(),a>0&&n(Math.max(0,a-1));break;case"ArrowRight":case"ArrowUp":b.preventDefault(),a<10&&n(Math.min(10,a+1));break;case"Home":b.preventDefault(),n(0);break;case"End":b.preventDefault(),n(10)}})(b,c),disabled:d,className:`
                ${m.button}
                rounded-full font-semibold transition-all duration-200
                focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
                disabled:opacity-50 disabled:cursor-not-allowed
                ${f?"shadow-lg ring-2 ring-white":"hover:scale-110"}
              `,style:{backgroundColor:h,color:0===c?"#64748b":"#ffffff",transform:f?"scale(1.2)":"scale(1)",zIndex:f?10:1},whileHover:d?{}:{scale:f?1.2:1.1},whileTap:d?{}:{scale:.95},animate:{scale:f?1.2:1,backgroundColor:h},"aria-label":`N\xedvel de dor ${c}: ${i[c]}`,"aria-pressed":f,role:"radio",tabIndex:f?0:-1,children:c},c)})}),(0,e.jsxs)("div",{className:"flex justify-between px-2",children:[(0,e.jsx)("span",{className:`text-gray-500 ${m.label}`,children:"Sem dor"}),(0,e.jsx)("span",{className:`text-gray-500 ${m.label}`,children:"Dor m\xe1xima"})]}),(0,e.jsx)("div",{className:"sr-only",children:(0,e.jsx)("p",{children:"Use as setas do teclado para navegar, Enter ou Espa\xe7o para selecionar, Home para ir ao in\xedcio (0), End para ir ao final (10)."})})]})};d()}catch(a){d(a)}})},94296:(a,b,c)=>{c.d(b,{A:()=>i});var d=c(8732),e=c(82015),f=c(51302),g=c(90393);let h=["aguda","cansa\xe7o","formigamento","latejante","queima\xe7\xe3o"],i=({isOpen:a,onClose:b,onSave:c,onDelete:i,point:j})=>{let[k,l]=(0,e.useState)(j.intensity||0),[m,n]=(0,e.useState)(j.type||"aguda"),[o,p]=(0,e.useState)(j.description||"");return((0,e.useEffect)(()=>{l(j.intensity||0),n(j.type||"aguda"),p(j.description||"")},[j,a]),a)?(0,d.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:b,children:(0,d.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:a=>a.stopPropagation(),children:[(0,d.jsxs)("header",{className:"flex items-center justify-between p-5 border-b border-slate-200",children:[(0,d.jsx)("h2",{className:"text-lg font-bold text-slate-800",children:j.id?"Editar Ponto de Dor":"Adicionar Ponto de Dor"}),(0,d.jsx)("button",{onClick:b,className:"p-2 rounded-full hover:bg-slate-100",children:(0,d.jsx)(f.X,{className:"w-5 h-5 text-slate-600"})})]}),(0,d.jsxs)("main",{className:"p-6 space-y-4",children:[(0,d.jsx)(g.A,{selectedScore:k,onSelectScore:l}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Tipo de Dor"}),(0,d.jsx)("select",{value:m,onChange:a=>n(a.target.value),className:"mt-1 w-full p-2 border border-slate-300 rounded-lg bg-white",children:h.map(a=>(0,d.jsx)("option",{value:a,className:"capitalize",children:a},a))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Descri\xe7\xe3o (opcional)"}),(0,d.jsx)("textarea",{value:o,onChange:a=>p(a.target.value),rows:3,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg",placeholder:"Ex: Dor pontual ao realizar rota\xe7\xe3o externa..."})]})]}),(0,d.jsxs)("footer",{className:"flex justify-between items-center p-4 border-t border-slate-200 bg-slate-50",children:[i&&(0,d.jsxs)("button",{onClick:i,className:"px-4 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg flex items-center",children:[(0,d.jsx)(f.TBR,{className:"w-4 h-4 mr-2"})," Excluir"]}),(0,d.jsxs)("div",{className:"ml-auto flex items-center",children:[(0,d.jsx)("button",{onClick:b,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 mr-2",children:"Cancelar"}),(0,d.jsxs)("button",{onClick:()=>{c({intensity:k,type:m,description:o})},className:"px-4 py-2 text-sm font-medium text-white bg-teal-500 rounded-lg hover:bg-teal-600 flex items-center",children:[(0,d.jsx)(f.eMP,{className:"w-4 h-4 mr-2"})," Salvar"]})]})]})]})}):null}},96333:(a,b,c)=>{c.d(b,{D:()=>g,W:()=>f});let d=[{id:"protocolo-joelho-lca",name:"Protocolo P\xf3s-operat\xf3rio de Joelho (LCA)",description:"Reabilita\xe7\xe3o completa com foco em ganho de ADM, for\xe7a e retorno seguro ao esporte."},{id:"protocolo-ombro-impacto",name:"Protocolo para S\xedndrome do Impacto do Ombro",description:"Fortalecimento do manguito rotador e reeduca\xe7\xe3o escapular para al\xedvio da dor."},{id:"protocolo-lombalgia",name:"Protocolo para Lombalgia (Fase Aguda)",description:"Diretrizes para manejo da dor aguda, mobilidade e ativa\xe7\xe3o do core."}];var e=c(5181);let f=async a=>{await new Promise(a=>setTimeout(a,300));let b=a.toLowerCase();return d.filter(a=>a.name.toLowerCase().includes(b)||a.description.toLowerCase().includes(b)||b.includes("lca")&&a.id.includes("lca")||b.includes("ombro")&&a.id.includes("ombro")||b.includes("lombalgia")&&a.id.includes("lombalgia"))},g=async a=>(0,e.vm)({nome_material:a.name,tipo_material:"Protocolo Cl\xednico"})},97679:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(8732);c(82015);var e=c(51302);let f=({notes:a,onViewNote:b})=>(0,d.jsx)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:(0,d.jsx)("div",{className:"relative border-l-2 border-slate-200 ml-3",children:a.length>0?(0,d.jsx)("ul",{className:"space-y-8",children:a.map(a=>(0,d.jsxs)("li",{className:"relative",children:[(0,d.jsx)("div",{className:"absolute -left-[29px] top-1 w-6 h-6 rounded-full bg-sky-500 flex items-center justify-center ring-4 ring-white",children:(0,d.jsx)(e.iUU,{className:"w-3 h-3 text-white"})}),(0,d.jsxs)("div",{className:"ml-8",children:[(0,d.jsx)("div",{className:"flex items-center justify-between",children:(0,d.jsxs)("p",{className:"font-bold text-slate-800",children:["Sess\xe3o #",a.sessionNumber," - ",a.date]})}),(0,d.jsxs)("p",{className:"text-sm text-slate-600 mt-1",children:[(0,d.jsx)("strong",{className:"font-semibold text-slate-700",children:"Avalia\xe7\xe3o:"})," ",a.assessment]}),(0,d.jsx)("button",{onClick:()=>b(a),className:"mt-2 text-sm font-semibold text-sky-600 hover:text-sky-700",children:"Ver Detalhes →"})]})]},a.id))}):(0,d.jsxs)("div",{className:"pl-8 text-center text-slate-500",children:[(0,d.jsx)(e.iUU,{className:"mx-auto h-12 w-12 text-slate-300"}),(0,d.jsx)("h3",{className:"mt-2 text-sm font-medium text-slate-900",children:"Nenhum hist\xf3rico cl\xednico"}),(0,d.jsx)("p",{className:"mt-1 text-sm text-slate-500",children:"Comece adicionando uma nova anota\xe7\xe3o."})]})})})},98618:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>i});var e=c(8732);c(82015);var f=c(51302),g=c(17682),h=a([g]);g=(h.then?(await h)():h)[0];let i=({patient:a})=>(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsx)(g.A,{patient:a,className:"w-full",showTimeline:!0,showAnalytics:!0,readOnly:!1}),(0,e.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:(0,e.jsxs)("div",{className:"flex items-start gap-3",children:[(0,e.jsx)("div",{className:"flex-shrink-0",children:(0,e.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,e.jsx)(f.hcu,{className:"w-4 h-4 text-blue-600"})})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h4",{className:"text-sm font-semibold text-blue-800 mb-2",children:"Sistema de Mapeamento Corporal Profissional"}),(0,e.jsxs)("div",{className:"text-sm text-blue-700 space-y-1",children:[(0,e.jsxs)("p",{children:["• ",(0,e.jsx)("strong",{children:"An\xe1lise Temporal:"})," Acompanhe a evolu\xe7\xe3o da dor ao longo do tempo"]}),(0,e.jsxs)("p",{children:["• ",(0,e.jsx)("strong",{children:"Distribui\xe7\xe3o Regional:"})," Visualize padr\xf5es de dor por regi\xe3o corporal"]}),(0,e.jsxs)("p",{children:["• ",(0,e.jsx)("strong",{children:"Sintomas Detalhados:"})," Registre sintomas espec\xedficos para cada ponto"]}),(0,e.jsxs)("p",{children:["• ",(0,e.jsx)("strong",{children:"Tend\xeancias Inteligentes:"})," Identifique melhorias ou pioras automaticamente"]})]})]})]})})]});d()}catch(a){d(a)}})}};