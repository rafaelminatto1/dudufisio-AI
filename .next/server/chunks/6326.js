"use strict";exports.id=6326,exports.ids=[6326],exports.modules={737:(a,b,c)=>{c.d(b,{Fy:()=>j,Uh:()=>i,Xj:()=>h,aJ:()=>l,d3:()=>k});var d=c(92273),e=c(40396),f=c(4183);let g=a=>new Promise(b=>setTimeout(b,a)),h=async(a,b)=>{await g(500);let c=d.db.getAppointments();if(a&&b){let d=new Date(b);return d.setHours(23,59,59,999),[...c].filter(b=>{let c=b.startTime.getTime();return c>=a.getTime()&&c<=d.getTime()})}return[...c]},i=async a=>(await g(300),d.db.getAppointments().filter(b=>b.patientId===a).sort((a,b)=>b.startTime.getTime()-a.startTime.getTime())),j=async a=>{await g(400);let b=f.N.find(b=>b.id===a.patientId),c={...a,patientAvatarUrl:b?.avatarUrl||""};return d.db.saveAppointment(c),e.g.emit("appointments:changed"),c},k=async a=>{await g(400),d.db.deleteAppointment(a),e.g.emit("appointments:changed")},l=async(a,b)=>{await g(400),d.db.deleteAppointmentSeries(a,b),e.g.emit("appointments:changed")}},1573:(a,b,c)=>{c.d(b,{u:()=>e});class d{async query(a,b){return{response:`Mock AI response for: ${a.slice(0,50)}...`,provider:b||"mock",timestamp:new Date,usage:{tokens:100,cost:.01}}}async getQueryHistory(){return[]}async getAvailableProviders(){return["mock"]}}let e=new d},7976:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(8732);c(82015);var e=c(51302);let f=()=>(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-50",children:[(0,d.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,d.jsx)(e.oYO,{className:"w-16 h-16 text-teal-500 animate-pulse"}),(0,d.jsx)("div",{className:"absolute w-24 h-24 border-t-2 border-b-2 border-teal-200 rounded-full animate-spin"})]}),(0,d.jsx)("p",{className:"mt-4 text-lg font-semibold text-slate-600",children:"Carregando FisioFlow..."})]})},16326:(a,b,c)=>{c.r(b),c.d(b,{default:()=>s});var d=c(8732),e=c(82015),f=c(54822),g=c(51302),h=c(99597),i=c(737),j=c(26821),k=c(55489),l=c(22320),m=c(72393),n=c(7976),o=c(50158),p=c(90393),q=c(1573),r=c(44396);let s=()=>{let{appointmentId:a}=f.useParams(),b=f.useNavigate(),{showToast:c}=(0,h.dj)(),[s,t]=(0,e.useState)(null),[u,v]=(0,e.useState)(null),[w,x]=(0,e.useState)(null),[y,z]=(0,e.useState)([]),[A,B]=(0,e.useState)(null),[C,D]=(0,e.useState)([]),[E,F]=(0,e.useState)(!1),[G,H]=(0,e.useState)(!1),[I,J]=(0,e.useState)(""),[K,L]=(0,e.useState)(""),[M,N]=(0,e.useState)(""),[O,P]=(0,e.useState)(""),[Q,R]=(0,e.useState)(void 0),[S,T]=(0,e.useState)([]),[U,V]=(0,e.useState)({}),[W,X]=(0,e.useState)("saved"),[Y,Z]=(0,e.useState)(null),[$,_]=(0,e.useState)([]),[,aa]=(0,e.useState)(!1),[ab,ac]=(0,e.useState)(null),{isLoading:ad,error:ae}=((a,b=[])=>{let[c,d]=(0,e.useState)(!0),[f,g]=(0,e.useState)(null),h=(0,e.useCallback)(async()=>{d(!0);try{await Promise.all(a.map(a=>a())),g(null)}catch(a){g(a),console.error("Failed to fetch page data:",a)}finally{d(!1)}},[...b]);return(0,e.useEffect)(()=>{h()},[h]),{isLoading:c,error:f,refetch:h}})([(0,e.useCallback)(async()=>{if(!a)return;let b=(await i.Xj()).find(b=>b.id===a);if(!b)throw Error("Consulta n\xe3o encontrada.");t(b);let c=await j.mQ(b.patientId);if(!c)throw Error("Paciente n\xe3o encontrado.");v(c),D((c.trackedMetrics||[]).filter(a=>a.isActive));let[d,e]=await Promise.all([k.lV(c.id),l.z0(c.id)]);B(d[0]||null),e&&(x(e),z(await l.Fq(e.id)))},[a])],[a]);(0,e.useEffect)(()=>{ad||"saving"===W||X("unsaved")},[I,K,M,O,Q,S,U,$,ad]),(0,e.useEffect)(()=>{if("unsaved"!==W||!u)return;let a=setTimeout(async()=>{X("saving");let a=[K,$.map(a=>`- ${a.part}: ${a.observation}`).join("\n")].filter(Boolean).join("\n\n**Observa\xe7\xf5es do Mapa Corporal:**\n"),b=Object.entries(U).filter(([,a])=>""!==a&&!isNaN(Number(a))).map(([a,b])=>({metricId:a,value:Number(b)})),d={...Y?.id&&{id:Y.id},patientId:u.id,date:new Date().toLocaleDateString("pt-BR"),subjective:I,objective:a,assessment:M,plan:O,...void 0!==Q&&{painScale:Q},bodyParts:$.map(a=>a.part),metricResults:b};try{let a=await k.Cq(d);Z(a),X("saved")}catch{c("Falha no salvamento autom\xe1tico.","error"),X("unsaved")}},2500);return()=>clearTimeout(a)},[W,u,Y,I,K,M,O,Q,U,$,c]);let af=async()=>{if(u&&s){if("saved"!==W)return void c("Aguarde o salvamento autom\xe1tico antes de finalizar.","info");F(!0);try{await i.Fy({...s,status:m.y2.Completed}),c("Sess\xe3o finalizada com sucesso!","success"),b(`/patients/${u.id}`)}catch(a){c("Falha ao finalizar a sess\xe3o.","error"),F(!1)}}},ag=async()=>{if(!I.trim()&&!K.trim()||G)return;H(!0);let a=`Com base no relato Subjetivo e nos achados Objetivos a seguir, sugira uma Avalia\xe7\xe3o e um Plano de tratamento concisos. N\xedvel de dor: ${Q||"N/A"}. Formate a resposta com "AVALIA\xc7\xc3O:" e "PLANO:".
S: "${I}"
O: "${K}"`;try{let b=(await q.u.getResponse(a)).content,d=b.match(/AVALIAÇÃO:([\s\S]*?)PLANO:/i),e=b.match(/PLANO:([\s\S]*)/i);d&&d[1]&&N(d[1].trim()),e&&e[1]&&P(e[1].trim()),c("Sugest\xe3o gerada pela IA.","info")}catch(a){c("Erro ao gerar sugest\xe3o.","error")}finally{H(!1)}};return ad?(0,d.jsx)(n.A,{}):!ae&&u&&s?(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("header",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold leading-tight text-slate-900",children:u.name}),(0,d.jsxs)("p",{className:"mt-1 text-sm text-slate-500",children:["Sess\xe3o em andamento - ",s.type]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(()=>{switch(W){case"unsaved":return(0,d.jsx)("span",{className:"text-xs text-slate-500",children:"Altera\xe7\xf5es n\xe3o salvas"});case"saving":return(0,d.jsxs)("span",{className:"text-xs text-amber-600 flex items-center",children:[(0,d.jsx)(g.aHM,{size:12,className:"animate-spin mr-1.5"})," Salvando..."]});case"saved":return(0,d.jsxs)("span",{className:"text-xs text-green-600 flex items-center",children:[(0,d.jsx)(g.rAV,{size:12,className:"mr-1.5"})," Salvo"]});default:return null}})(),(0,d.jsxs)("button",{onClick:af,disabled:E||"saved"!==W,className:"inline-flex items-center justify-center bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg shadow-sm transition-colors disabled:bg-green-300 disabled:cursor-not-allowed",children:[E?(0,d.jsx)(g.aHM,{className:"w-5 h-5 mr-2 animate-spin"}):(0,d.jsx)(g.eMP,{className:"w-5 h-5 mr-2"}),E?"Salvando...":"Finalizar e Salvar"]})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 items-start",children:[(0,d.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[w&&(0,d.jsx)(o.A,{title:"Plano de Tratamento",icon:(0,d.jsx)(g.DTr,{}),children:(0,d.jsxs)("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-2",children:[(0,d.jsx)("p",{className:"text-sm text-slate-600",children:w.treatmentGoals}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("h4",{className:"font-semibold text-sm flex items-center mb-1",children:[(0,d.jsx)(g.y8v,{className:"w-4 h-4 mr-2"})," Exerc\xedcios"]}),(0,d.jsx)("ul",{className:"space-y-1 text-xs list-disc pl-5",children:y.map(a=>(0,d.jsxs)("li",{children:[a.exerciseName," (",a.sets,"x",a.repetitions,")"]},a.id))})]})]})}),A&&(0,d.jsx)(o.A,{title:`\xdaltima Evolu\xe7\xe3o (${A.date})`,icon:(0,d.jsx)(g.iUU,{}),children:(0,d.jsxs)("div",{className:"space-y-2 text-sm text-slate-600 max-h-60 overflow-y-auto pr-2",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{className:"font-semibold text-sky-600",children:"S:"})," ",A.subjective]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{className:"font-semibold text-sky-600",children:"A:"})," ",A.assessment]})]})})]}),(0,d.jsxs)("div",{className:"lg:col-span-2 bg-white p-6 rounded-2xl shadow-sm space-y-4",children:[(0,d.jsx)("h2",{className:"text-xl font-bold text-slate-800",children:"Evolu\xe7\xe3o da Sess\xe3o Atual"}),C.length>0&&(0,d.jsxs)("div",{className:"p-4 bg-slate-50 rounded-lg",children:[(0,d.jsx)("h3",{className:"text-sm font-semibold text-teal-700 mb-2",children:"M\xe9tricas de Acompanhamento"}),(0,d.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:C.map(a=>(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-xs font-medium text-slate-600",children:a.name}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("input",{type:"number",value:U[a.id]??"",onChange:b=>((a,b)=>{V(c=>({...c,[a]:""===b?"":Number(b)}))})(a.id,b.target.value),className:"mt-1 w-full p-2 pr-10 border border-slate-300 rounded-lg"}),(0,d.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center pr-3 text-xs text-slate-500",children:a.unit})]})]},a.id))})]}),(0,d.jsx)(p.A,{selectedScore:Q,onSelectScore:R}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-semibold text-sky-700",children:"S (Subjetivo)"}),(0,d.jsx)(r.A,{value:I,onChange:J,rows:2,placeholder:"Relato do paciente..."})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-semibold text-sky-700",children:"O (Objetivo)"}),(0,d.jsx)(r.A,{value:K,onChange:L,rows:2,placeholder:"Achados, testes, medidas..."})]}),(0,d.jsx)("div",{className:"flex justify-end",children:(0,d.jsxs)("button",{onClick:ag,disabled:G||!I.trim()&&!K.trim(),className:"px-4 py-2 text-sm font-medium text-sky-600 bg-sky-50 border border-sky-200 rounded-lg hover:bg-sky-100 flex items-center disabled:bg-slate-100 disabled:text-slate-400",children:[G?(0,d.jsx)(g.aHM,{className:"w-4 h-4 mr-2 animate-spin"}):(0,d.jsx)(g.s6t,{className:"w-4 h-4 mr-2"}),"Sugerir A/P com IA"]})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-semibold text-sky-700",children:"A (Avalia\xe7\xe3o)"}),(0,d.jsx)(r.A,{value:M,onChange:N,rows:2,placeholder:"Diagn\xf3stico cinesiofuncional da sess\xe3o..."})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-semibold text-sky-700",children:"P (Plano)"}),(0,d.jsx)(r.A,{value:O,onChange:P,rows:2,placeholder:"Condutas para a pr\xf3xima sess\xe3o, orienta\xe7\xf5es..."})]})]})]})]})}):(0,d.jsx)("div",{className:"text-center p-10 text-red-500",children:ae?.message||"N\xe3o foi poss\xedvel carregar os dados da sess\xe3o."})}},22320:(a,b,c)=>{c.d(b,{Fq:()=>h,td:()=>i,z0:()=>g});var d=c(92273),e=c(40396);let f=a=>new Promise(b=>setTimeout(b,a)),g=async a=>{await f(300);let b=d.db.getTreatmentPlans().find(b=>b.patientId===a);if(b){let a=await h(b.id);return{...b,exercises:a}}},h=async a=>(await f(300),d.db.getExercisePrescriptions().filter(b=>b.treatmentPlanId===a)),i=async(a,b)=>{await f(400);let c=d.db.getTreatmentPlans(),g=c.findIndex(b=>b.patientId===a);if(g>-1){let a=c[g],f=(b.exercises||[]).map((b,c)=>({id:`ex_${Date.now()}_${c}`,treatmentPlanId:a.id,exerciseName:b.exerciseName,sets:b.sets,repetitions:b.repetitions,resistanceLevel:"A definir",progressionCriteria:"A definir"})),h={...a,treatmentGoals:b.treatmentGoals||a.treatmentGoals,exercises:f.length>0?f:a.exercises};return d.db.updateTreatmentPlan(h),d.db.setExercisePrescriptionsForPlan(a.id,f),e.g.emit("treatmentPlans:changed"),h}throw Error("Plano de tratamento n\xe3o encontrado para este paciente.")}},26821:(a,b,c)=>{c.d(b,{L5:()=>k,OS:()=>j,Ob:()=>p,TC:()=>q,Xl:()=>o,Z6:()=>n,bW:()=>i,dc:()=>m,mQ:()=>l,uE:()=>h});var d=c(72393),e=c(92273),f=c(40396);let g=a=>new Promise(b=>setTimeout(b,a)),h=async()=>(await g(500),[...e.db.getPatients()].sort((a,b)=>new Date(b.lastVisit).getTime()-new Date(a.lastVisit).getTime())),i=async a=>{if(await g(300),a.length<2)return[];let b=a.toLowerCase();return e.db.getPatients().filter(a=>a.name.toLowerCase().includes(b)||a.cpf.includes(b)).map(a=>({id:a.id,name:a.name,email:a.email,phone:a.phone,status:a.status,lastVisit:a.lastVisit,avatarUrl:a.avatarUrl,cpf:a.cpf})).slice(0,10)},j=async a=>{await g(500);let b={id:`patient_${Date.now()}`,name:a.trim(),cpf:`TEMP-${Date.now()}`,birthDate:"",phone:"",email:"",emergencyContact:{name:"",phone:""},address:{street:"",city:"",state:"",zip:""},status:d.WW.Active,lastVisit:new Date().toISOString(),registrationDate:new Date().toISOString(),avatarUrl:`https://picsum.photos/seed/${Date.now()}/200/200`,consentGiven:!0,whatsappConsent:"opt-out"};return e.db.addPatient(b),f.g.emit("patients:changed"),b},k=async({limit:a=15,cursor:b,searchTerm:c,statusFilter:d,startDate:f,endDate:h,therapistId:i})=>{await g(500);let j=e.db.getPatients();if(c){let a=c.toLowerCase();j=j.filter(b=>b.name.toLowerCase().includes(a)||b.cpf.includes(a))}if(d&&"All"!==d){let a={Active:"Active",Inactive:"Inactive",Discharged:"Discharged",Ativo:"Active",Inativo:"Inactive",Alta:"Discharged"}[d]||d;j=j.filter(b=>b.status===a)}if(f){let a=new Date(f);a.setHours(0,0,0,0),j=j.filter(b=>new Date(b.registrationDate)>=a)}if(h){let a=new Date(h);a.setHours(23,59,59,999),j=j.filter(b=>new Date(b.registrationDate)<=a)}if(i&&"All"!==i){let a=new Set(e.db.getAppointments().filter(a=>a.therapistId===i).map(a=>a.patientId));j=j.filter(b=>a.has(b.id))}j.sort((a,b)=>{let c=new Date(a.registrationDate).getTime(),d=new Date(b.registrationDate).getTime();return d!==c?d-c:a.id.localeCompare(b.id)});let k=b?j.findIndex(a=>a.id===b)+1:0;if(b&&0===k)return{patients:[],nextCursor:null};let l=j.slice(k,k+a),m=l.length===a&&l.length>0?l[l.length-1].id:null;return{patients:l.map(a=>({id:a.id,name:a.name,email:a.email,phone:a.phone,status:a.status,lastVisit:a.lastVisit,avatarUrl:a.avatarUrl,medicalAlerts:a.medicalAlerts})),nextCursor:m}},l=async a=>(await g(300),e.db.getPatientById(a)),m=async a=>{await g(400);let b={id:`patient_${Date.now()}`,...a,lastVisit:new Date().toISOString()};return e.db.addPatient(b),f.g.emit("patients:changed"),b},n=async a=>(await g(400),e.db.updatePatient(a),f.g.emit("patients:changed"),a),o=async(a,b)=>{await g(600);let c=e.db.getPatientById(a);if(!c)throw Error("Paciente n\xe3o encontrado.");let d={name:b.name,url:"#",type:b.type,size:b.size},h={...c,attachments:[...c.attachments||[],d]};return e.db.updatePatient(h),f.g.emit("patients:changed"),d},p=async(a,b)=>{await g(200);let c=e.db.getPatientById(a);if(!c)throw Error("Paciente n\xe3o encontrado.");let d={id:`log_${Date.now()}`,...b},h={...c,communicationLogs:[d,...c.communicationLogs||[]]};return e.db.updatePatient(h),f.g.emit("patients:changed"),h},q=async(a,b)=>{await g(200);let c=e.db.getPatientById(a);if(!c)throw Error("Paciente n\xe3o encontrado.");let d={...c,painPoints:b};return e.db.updatePatient(d),f.g.emit("patients:changed"),d}},40396:(a,b,c)=>{c.d(b,{g:()=>h});var d=c(72393),e=c(4183);let f=a=>new Promise(b=>setTimeout(b,a));class g{on(a,b){this.events[a]||(this.events[a]=[]),this.events[a].push(b)}off(a,b){this.events[a]&&(this.events[a]=this.events[a].filter(a=>a!==b))}emit(a,...b){this.events[a]&&this.events[a].forEach(a=>a(...b))}async getEvents(){return await f(300),[...this.eventsData].sort((a,b)=>b.startDate.getTime()-a.startDate.getTime())}async getEventById(a){await f(200);let b=this.eventsData.find(b=>b.id===a);return b?JSON.parse(JSON.stringify(b)):void 0}async getRegistrationsByEventId(a){return await f(200),this.registrationsData.filter(b=>b.eventId===a)}async saveEvent(a,b){if(await f(400),a.id){let b=this.eventsData.findIndex(b=>b.id===a.id);if(b>-1){let c=this.eventsData[b];if(!c)throw Error("Event not found");let d={...c,...a,id:c.id,registrations:c.registrations,providers:c.providers};return this.eventsData[b]=d,this.emit("events:changed"),d}throw Error("Event not found")}{let c={...a,id:`event_${Date.now()}`,registrations:[],providers:[],organizerId:b};return this.eventsData.unshift(c),this.emit("events:changed"),c}}async checkInParticipant(a,b,c){await f(500);let e=this.registrationsData.findIndex(b=>b.id===a);if(-1===e)throw Error("Inscri\xe7\xe3o n\xe3o encontrada.");let g=this.registrationsData[e];if(!g)throw Error("Inscri\xe7\xe3o n\xe3o encontrada.");if(g.status===d.m7.Attended)throw Error("Participante j\xe1 fez check-in.");let h={...g,status:d.m7.Attended,checkedInAt:new Date,checkedInBy:c};this.registrationsData[e]=h;let i=this.eventsData.findIndex(a=>a.id===g.eventId);if(i>-1){let b=this.eventsData[i];if(b){let c=b.registrations.findIndex(b=>b.id===a);c>-1?b.registrations[c]=h:b.registrations.push(h)}}return this.emit("events:changed"),h}async confirmProvider(a){for(let b of(await f(500),this.eventsData)){let c=b.providers.findIndex(b=>b.id===a);if(c>-1){let a=b.providers[c];if(a){if(a.status!==d.aJ.Applied)throw Error("Apenas inscri\xe7\xf5es com status 'Inscrito' podem ser confirmadas.");return a.status=d.aJ.Confirmed,this.emit("events:changed"),a}}}throw Error("Prestador de servi\xe7o n\xe3o encontrado.")}async payProvider(a){for(let b of(await f(500),this.eventsData)){let c=b.providers.findIndex(b=>b.id===a);if(c>-1){let a=b.providers[c];if(a){if(a.status!==d.aJ.Confirmed)throw Error("Apenas prestadores confirmados podem receber pagamento.");return a.status=d.aJ.Paid,this.emit("events:changed"),a}}}throw Error("Prestador de servi\xe7o n\xe3o encontrado.")}constructor(){this.events={},this.eventsData=[...e._X],this.registrationsData=[...e.ZM]}}let h=new g},44396:(a,b,c)=>{c.d(b,{A:()=>g});var d=c(8732),e=c(82015),f=c(51302);let g=({value:a,onChange:b,rows:c=3,placeholder:g,disabled:h=!1})=>{let i=(0,e.useRef)(null),j=c=>{let d=i.current;if(!d||h)return;let e="",f=d.selectionStart,g=d.selectionEnd,j=a.substring(f,g),k="";if("list"===c){let b=a.lastIndexOf("\n",f-1)+1,c=a.substring(0,b),d=a.substring(b,g),e=a.substring(g),h=d.split("\n"),i=h.every(a=>a.trim().startsWith("* ")),j=h.map(a=>i?a.replace(/^\s*\*\s?/,""):a.trim()?`* ${a}`:a).join("\n");k=`${c}${j}${e}`}else{e="bold"===c?"**":"*";let b=`${e}${j}${e}`;k=`${a.substring(0,f)}${b}${a.substring(g)}`}b(k),setTimeout(()=>{d.focus(),"list"!==c&&(d.selectionStart=f+e.length,d.selectionEnd=g+e.length)},0)};return(0,d.jsxs)("div",{className:"flex flex-col h-full",children:[(0,d.jsxs)("div",{className:`flex items-center gap-2 border border-b-0 border-slate-300 p-2 rounded-t-lg ${h?"bg-slate-200":"bg-slate-50"}`,children:[(0,d.jsx)("button",{type:"button",onClick:()=>j("bold"),className:"p-1.5 rounded hover:bg-slate-200 disabled:opacity-50",title:"Negrito (Ctrl+B)",disabled:h,children:(0,d.jsx)(f.yN4,{className:"w-4 h-4"})}),(0,d.jsx)("button",{type:"button",onClick:()=>j("italic"),className:"p-1.5 rounded hover:bg-slate-200 disabled:opacity-50",title:"It\xe1lico (Ctrl+I)",disabled:h,children:(0,d.jsx)(f.J20,{className:"w-4 h-4"})}),(0,d.jsx)("button",{type:"button",onClick:()=>j("list"),className:"p-1.5 rounded hover:bg-slate-200 disabled:opacity-50",title:"Lista",disabled:h,children:(0,d.jsx)(f.B8B,{className:"w-4 h-4"})})]}),(0,d.jsx)("textarea",{ref:i,value:a,onChange:a=>b(a.target.value),rows:c,placeholder:g,className:`w-full p-2 border border-slate-300 rounded-b-lg focus:outline-none focus:ring-1 focus:ring-sky-500 text-sm flex-1 ${h?"bg-slate-100 cursor-not-allowed":""}`,"aria-label":"Editor de Texto do Relat\xf3rio",disabled:h})]})}},50158:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(8732);c(82015);let e=({title:a,icon:b,children:c,actionButton:e})=>(0,d.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm h-full flex flex-col border border-slate-200/80",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 flex items-center",children:[b&&(0,d.jsx)("span",{className:"mr-3 text-sky-500",children:b}),a]}),e]}),(0,d.jsx)("div",{className:"flex-grow",children:c})]})},55489:(a,b,c)=>{c.d(b,{Cq:()=>i,gp:()=>h,lV:()=>g});var d=c(92273),e=c(40396);let f=a=>new Promise(b=>setTimeout(b,a)),g=async a=>(await f(300),[...d.db.getSoapNotes()].filter(b=>b.patientId===a).sort((a,b)=>new Date(b.date.split("/").reverse().join("-")).getTime()-new Date(a.date.split("/").reverse().join("-")).getTime())),h=async(a,b)=>{await f(400);let c={id:`note_${Date.now()}`,patientId:a,therapist:"Dr. Roberto",...b};return d.db.saveSoapNote(c),e.g.emit("notes:changed"),c},i=async a=>{let b;return await f(300),b=a.id?{...d.db.getSoapNotes().find(b=>b.id===a.id),...a}:{id:`note_${Date.now()}`,therapist:"Dr. Roberto",date:new Date().toLocaleDateString("pt-BR"),subjective:"",objective:"",assessment:"",plan:"",...a},d.db.saveSoapNote(b),e.g.emit("notes:changed"),b}},90393:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(8732);c(82015);var e=c(51302);let f=({selectedScore:a,onSelectScore:b})=>{let c=a=>a>=0&&a<=3?{color:"text-green-600",bgColor:"bg-green-100",hoverBg:"hover:bg-green-200",icon:(0,d.jsx)(e.pnY,{className:"w-5 h-5"})}:a>=4&&a<=6?{color:"text-amber-600",bgColor:"bg-amber-100",hoverBg:"hover:bg-amber-200",icon:(0,d.jsx)(e.D3j,{className:"w-5 h-5"})}:a>=7&&a<=10?{color:"text-red-600",bgColor:"bg-red-100",hoverBg:"hover:bg-red-200",icon:(0,d.jsx)(e.Vdx,{className:"w-5 h-5"})}:{color:"text-slate-600",bgColor:"bg-slate-100",hoverBg:"hover:bg-slate-200",icon:null};return(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-semibold text-teal-700 mb-2 block",children:"Escala Visual de Dor (EVA)"}),(0,d.jsx)("div",{className:"flex items-center justify-between space-x-1 bg-slate-50 p-2 rounded-lg",children:Array.from({length:11},(a,b)=>b).map(e=>{let f=a===e,{color:g,bgColor:h,hoverBg:i}=c(e);return(0,d.jsx)("button",{type:"button",onClick:()=>b(e),className:`w-8 h-8 flex items-center justify-center rounded-full text-sm font-bold transition-all duration-200
                ${f?`${g} ${h} ring-2 ring-offset-1 ring-current`:`text-slate-600 ${i}`}
              `,title:`Dor n\xedvel ${e}`,children:e},e)})}),void 0!==a&&(0,d.jsxs)("div",{className:"mt-2 flex items-center justify-center p-2 rounded-md bg-slate-100",children:[(0,d.jsxs)("div",{className:`mr-2 ${c(a).color}`,children:[" ",c(a).icon]}),(0,d.jsxs)("p",{className:`text-sm font-semibold ${c(a).color}`,children:["N\xedvel de dor selecionado: ",a]})]})]})}},92273:(a,b,c)=>{c.d(b,{db:()=>j});var d=c(4183);let e=[...d.N],f=[...d.ZS],g=[...d.Tf],h=[...d.BT],i=[...d.eB],j={getPatients:()=>[...e],getPatientById:a=>e.find(b=>b.id===a),addPatient:a=>{e.unshift(a)},updatePatient:a=>{e=e.map(b=>b.id===a.id?a:b)},getAppointments:()=>[...f],saveAppointment:a=>{let b=f.findIndex(b=>b.id===a.id);b>-1?f[b]=a:f.push(a)},deleteAppointment:a=>{f=f.filter(b=>b.id!==a)},deleteAppointmentSeries:(a,b)=>{f=f.filter(c=>!(c.seriesId===a&&c.startTime>=b))},getSoapNotes:()=>[...g],saveSoapNote:a=>{let b=g.findIndex(b=>b.id===a.id);b>-1?g[b]=a:g.unshift(a)},getTreatmentPlans:()=>[...h],updateTreatmentPlan:a=>{let b=h.findIndex(b=>b.id===a.id);b>-1&&(h[b]=a)},getExercisePrescriptions:()=>[...i],setExercisePrescriptionsForPlan:(a,b)=>{(i=i.filter(b=>b.treatmentPlanId!==a)).push(...b)}}},99597:(a,b,c)=>{c.d(b,{dj:()=>g}),c(8732);var d=c(82015);c(54822);let e=(0,d.createContext)(void 0),f=(0,d.createContext)(void 0),g=()=>{let a=(()=>{let a=(0,d.useContext)(e);return void 0===a?{enabled:!1,logRouterChange:()=>{},logHookCall:()=>{},logContextAccess:()=>{}}:a})(),b=(0,d.useContext)(f);if(a.logContextAccess("ToastContext","useToast"),!b){let a=Error("useToast must be used within a ToastProvider");throw console.error("❌ Toast Context Error:",a.message),a}return{showToast:b.showToast}}}};