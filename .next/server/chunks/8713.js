"use strict";exports.id=8713,exports.ids=[8713],exports.modules={5181:(a,b,c)=>{c.d(b,{AV:()=>j,Ms:()=>m,VF:()=>i,_z:()=>d,gl:()=>k,mt:()=>g,n8:()=>e,oP:()=>f,rW:()=>h,vm:()=>l});let d=()=>Promise.resolve({treatmentGoals:[],exercises:[]}),e=()=>Promise.resolve(""),f=()=>Promise.resolve(""),g=()=>Promise.resolve(""),h=()=>Promise.resolve(""),i=()=>Promise.resolve(""),j=()=>Promise.resolve(""),k=()=>Promise.resolve(""),l=()=>Promise.resolve(""),m=()=>Promise.resolve("")},14519:(a,b,c)=>{c.d(b,{A:()=>i});var d=c(8732),e=c(82015),f=c(50284),g=c(50158),h=c(51302);let i=({metric:a,notes:b})=>{let c=(0,e.useMemo)(()=>b.filter(b=>b.metricResults?.some(b=>b.metricId===a.id)).map(b=>({date:b.date,value:b.metricResults.find(b=>b.metricId===a.id).value})).sort((a,b)=>new Date(a.date.split("/").reverse().join("-")).getTime()-new Date(b.date.split("/").reverse().join("-")).getTime()),[a.id,b]);return c.length<2?null:(0,d.jsx)(g.A,{title:`Sua Evolu\xe7\xe3o: ${a.name}`,icon:(0,d.jsx)(h.bl6,{}),children:(0,d.jsx)("div",{className:"h-64 -ml-4",children:(0,d.jsx)(f.uf,{width:"100%",height:"100%",children:(0,d.jsxs)(f.bl,{data:c,margin:{top:5,right:20,left:0,bottom:5},children:[(0,d.jsx)(f.dC,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),(0,d.jsx)(f.WX,{dataKey:"date",stroke:"#64748b",fontSize:12,tickLine:!1,axisLine:!1}),(0,d.jsx)(f.h8,{stroke:"#64748b",fontSize:12,tickLine:!1,axisLine:!1,domain:["dataMin - 1","dataMax + 1"],unit:a.unit?` ${a.unit}`:""}),(0,d.jsx)(f.m_,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"0.5rem"},labelStyle:{color:"#1e293b",fontWeight:"bold"},formatter:b=>[`${b} ${a.unit||""}`,a.name]}),(0,d.jsx)(f.N1,{type:"monotone",dataKey:"value",name:"Seu Resultado",stroke:"#14b8a6",strokeWidth:2,dot:{r:4,fill:"#14b8a6"},activeDot:{r:8,stroke:"#14b8a6",fill:"#fff",strokeWidth:2}})]})})})})}},18713:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>s});var e=c(8732),f=c(82015),g=c(42227),h=c(28471),i=c(55489),j=c(26821),k=c(5181),l=c(99597),m=c(19119),n=c(51302),o=c(77590),p=c(14519),q=a([m]);m=(q.then?(await q)():q)[0];let r=()=>(0,e.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-sm animate-pulse",children:[(0,e.jsx)(m.E,{className:"h-8 w-3/4 mb-4"}),(0,e.jsx)(m.E,{className:"h-5 w-full"}),(0,e.jsx)(m.E,{className:"h-5 w-5/6 mt-2"}),(0,e.jsx)("hr",{className:"my-6 border-slate-200"}),(0,e.jsx)(m.E,{className:"h-7 w-1/2 mb-4"}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(m.E,{className:"h-5 w-1/4 mb-2"}),(0,e.jsx)(m.E,{className:"h-4 w-full mb-1"}),(0,e.jsx)(m.E,{className:"h-4 w-full mb-1"}),(0,e.jsx)(m.E,{className:"h-6 w-3/4 mt-1"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(m.E,{className:"h-5 w-1/4 mb-2"}),(0,e.jsx)(m.E,{className:"h-4 w-full mb-1"}),(0,e.jsx)(m.E,{className:"h-4 w-full mb-1"})]})]}),(0,e.jsx)(m.E,{className:"h-7 w-1/2 mt-8 mb-4"}),(0,e.jsx)(m.E,{className:"h-12 w-full"})]}),s=()=>{let{user:a}=(0,h.As)(),{showToast:b}=(0,l.dj)(),[c,d]=(0,f.useState)(!0),[m,q]=(0,f.useState)(""),[s,t]=(0,f.useState)(null),[u,v]=(0,f.useState)(null),[w,x]=(0,f.useState)([]);(0,f.useEffect)(()=>{(async()=>{if(!a?.patientId)return d(!1);d(!0);try{let[b,c]=await Promise.all([j.mQ(a.patientId),i.lV(a.patientId)]);if(!b)throw Error("Patient data not found.");if(v(b),x(c),c.length<2){q("## Ol\xe1!\n\nVoc\xea precisa de pelo menos uma avalia\xe7\xe3o inicial e uma sess\xe3o de acompanhamento para ver seu progresso. Continue com seu tratamento e em breve seus resultados aparecer\xe3o aqui!"),d(!1);return}let e=c[c.length-1],f=c[0];if(!e||!f)return void q("Dados insuficientes para gerar sum\xe1rio de progresso.");let g={nome_paciente:a.name.split(" ")[0]||a.name,dor_inicial:e.painScale?.toString()||"N/A",dor_atual:f.painScale?.toString()||"N/A",limitacao_inicial:e.subjective||"N/A",status_atual:f.assessment||"N/A",conquista_recente:f.subjective||"N/A",nome_fisio:f.therapist||"N/A"},h=await (0,k.AV)(g);q(h)}catch(a){console.error(a),b("N\xe3o foi poss\xedvel gerar seu resumo de progresso.","error"),q("Ocorreu um erro ao buscar seus dados. Por favor, tente novamente mais tarde.")}finally{d(!1)}})()},[a,b]);let y=a=>{t(a),b("Obrigado pelo seu feedback!","success")},z=u?.trackedMetrics?.filter(a=>a.isActive)||[];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(g.A,{title:"Meu Progresso",subtitle:"Veja sua jornada de recupera\xe7\xe3o de forma clara e motivadora."}),c?(0,e.jsx)(r,{}):(0,e.jsxs)("div",{className:"space-y-8",children:[(0,e.jsx)("div",{className:"bg-white p-6 md:p-8 rounded-2xl shadow-sm",children:m?(0,e.jsx)(o.A,{content:m,className:"text-md"}):(0,e.jsxs)("div",{className:"text-center py-12",children:[(0,e.jsx)(n.ntg,{className:"w-16 h-16 mx-auto text-slate-300"}),(0,e.jsx)("h3",{className:"mt-4 text-lg font-semibold text-slate-700",children:"Acompanhamento Indispon\xedvel"}),(0,e.jsx)("p",{className:"mt-1 text-slate-500",children:"N\xe3o foi poss\xedvel carregar seu resumo de progresso."})]})}),z.length>0&&w.length>1&&(0,e.jsxs)("div",{children:[(0,e.jsxs)("h2",{className:"text-2xl font-bold text-slate-800 mb-4 flex items-center",children:[(0,e.jsx)(n.EsT,{className:"w-6 h-6 mr-3 text-sky-500"})," Evolu\xe7\xe3o das M\xe9tricas"]}),(0,e.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:z.map(a=>(0,e.jsx)(p.A,{metric:a,notes:w},a.id))})]}),(0,e.jsx)("div",{className:"bg-white p-6 md:p-8 rounded-2xl shadow-sm",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("h4",{className:"text-lg font-semibold text-slate-800",children:"Como voc\xea se sente sobre sua evolu\xe7\xe3o?"}),(0,e.jsxs)("div",{className:"mt-4 flex justify-center items-center space-x-2 md:space-x-4",children:[(0,e.jsx)("button",{onClick:()=>y("\uD83D\uDE1E"),className:`p-3 md:p-4 rounded-full transition-transform transform hover:scale-110 ${"\uD83D\uDE1E"===s?"bg-red-200 ring-2 ring-red-400":"bg-slate-100 hover:bg-slate-200"}`,children:(0,e.jsx)(n.Vdx,{className:"w-8 h-8 md:w-10 md:h-10 text-red-500"})}),(0,e.jsx)("button",{onClick:()=>y("\uD83D\uDE10"),className:`p-3 md:p-4 rounded-full transition-transform transform hover:scale-110 ${"\uD83D\uDE10"===s?"bg-amber-200 ring-2 ring-amber-400":"bg-slate-100 hover:bg-slate-200"}`,children:(0,e.jsx)(n.D3j,{className:"w-8 h-8 md:w-10 md:h-10 text-amber-500"})}),(0,e.jsx)("button",{onClick:()=>y("\uD83D\uDE0A"),className:`p-3 md:p-4 rounded-full transition-transform transform hover:scale-110 ${"\uD83D\uDE0A"===s?"bg-sky-200 ring-2 ring-sky-400":"bg-slate-100 hover:bg-slate-200"}`,children:(0,e.jsx)(n.pnY,{className:"w-8 h-8 md:w-10 md:h-10 text-sky-500"})}),(0,e.jsx)("button",{onClick:()=>y("\uD83D\uDE04"),className:`p-3 md:p-4 rounded-full transition-transform transform hover:scale-110 ${"\uD83D\uDE04"===s?"bg-green-200 ring-2 ring-green-400":"bg-slate-100 hover:bg-slate-200"}`,children:(0,e.jsx)(n.EYr,{className:"w-8 h-8 md:w-10 md:h-10 text-green-500"})})]})]})})]})]})};d()}catch(a){d(a)}})},19119:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{E:()=>h});var e=c(8732),f=c(71253),g=a([f]);function h({className:a,...b}){return(0,e.jsx)("div",{className:(0,f.cn)("animate-pulse rounded-md bg-muted",a),...b})}f=(g.then?(await g)():g)[0],d()}catch(a){d(a)}})},42227:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(8732);c(82015);let e=({title:a,subtitle:b,children:c})=>(0,d.jsxs)("div",{className:"pb-8 md:flex md:items-center md:justify-between",children:[(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold leading-tight text-slate-900 tracking-tight",children:a}),(0,d.jsx)("p",{className:"mt-2 text-lg text-slate-600",children:b})]}),(0,d.jsx)("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:c})]})},50158:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(8732);c(82015);let e=({title:a,icon:b,children:c,actionButton:e})=>(0,d.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm h-full flex flex-col border border-slate-200/80",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 flex items-center",children:[b&&(0,d.jsx)("span",{className:"mr-3 text-sky-500",children:b}),a]}),e]}),(0,d.jsx)("div",{className:"flex-grow",children:c})]})},55489:(a,b,c)=>{c.d(b,{Cq:()=>i,gp:()=>h,lV:()=>g});var d=c(92273),e=c(40396);let f=a=>new Promise(b=>setTimeout(b,a)),g=async a=>(await f(300),[...d.db.getSoapNotes()].filter(b=>b.patientId===a).sort((a,b)=>new Date(b.date.split("/").reverse().join("-")).getTime()-new Date(a.date.split("/").reverse().join("-")).getTime())),h=async(a,b)=>{await f(400);let c={id:`note_${Date.now()}`,patientId:a,therapist:"Dr. Roberto",...b};return d.db.saveSoapNote(c),e.g.emit("notes:changed"),c},i=async a=>{let b;return await f(300),b=a.id?{...d.db.getSoapNotes().find(b=>b.id===a.id),...a}:{id:`note_${Date.now()}`,therapist:"Dr. Roberto",date:new Date().toLocaleDateString("pt-BR"),subjective:"",objective:"",assessment:"",plan:"",...a},d.db.saveSoapNote(b),e.g.emit("notes:changed"),b}},71253:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{cn:()=>h});var e=c(50802),f=c(75979),g=a([e,f]);function h(...a){return(0,f.twMerge)((0,e.clsx)(a))}[e,f]=g.then?(await g)():g,d()}catch(a){d(a)}})},77590:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(8732);c(82015);let e=({content:a,className:b=""})=>{if(!a)return null;let c=a=>a.split(/(\*\*\*.*?\*\*\*|\*\*.*?\*\*|\*.*?\*|`.*?`|‚úÖ|üìâ|üí™|üèÜ|‚ö†Ô∏è)/g).filter(Boolean).map((a,b)=>"‚úÖ"===a||"\uD83D\uDCC9"===a||"\uD83D\uDCAA"===a||"\uD83C\uDFC6"===a||"‚ö†Ô∏è"===a?(0,d.jsx)("span",{className:"mr-2",children:a},b):a.startsWith("***")&&a.endsWith("***")?(0,d.jsx)("strong",{children:(0,d.jsx)("em",{children:a.slice(3,-3)})},b):a.startsWith("**")&&a.endsWith("**")?(0,d.jsx)("strong",{children:a.slice(2,-2)},b):a.startsWith("*")&&a.endsWith("*")?(0,d.jsx)("em",{children:a.slice(1,-1)},b):a.startsWith("`")&&a.endsWith("`")?(0,d.jsx)("code",{className:"bg-slate-200 text-slate-800 px-1 py-0.5 rounded-sm font-mono text-xs",children:a.slice(1,-1)},b):a),e=a.split("\n"),f=[],g=[],h=null,i=()=>{if(g.length>0){let a="ol"===h?"ol":"ul";f.push((0,d.jsx)(a,{className:`pl-5 space-y-1 my-3 ${"ol"===h?"list-decimal":"list-disc"}`,children:g.map((a,b)=>(0,d.jsx)("li",{children:c(a)},b))},f.length)),g=[],h=null}};return e.forEach((a,b)=>{let e=a.trim();e.startsWith("## ")?(i(),f.push((0,d.jsx)("h2",{className:"text-xl font-bold text-slate-800 mt-4 mb-2 pb-2 border-b border-slate-200",children:c(e.substring(3))},b))):e.startsWith("### ")?(i(),f.push((0,d.jsx)("h3",{className:"text-lg font-semibold text-teal-600 my-3",children:c(e.substring(4))},b))):e.startsWith(">")?(i(),f.push((0,d.jsx)("blockquote",{className:"pl-4 italic border-l-4 border-slate-300 text-slate-600 my-2",children:c(e.substring(1))},b))):e.startsWith("---")?(i(),f.push((0,d.jsx)("hr",{className:"my-6 border-slate-200"},b))):e.startsWith("- ")?("ul"!==h&&i(),h="ul",g.push(e.substring(2).trim())):e.match(/^\d+\. /)?("ol"!==h&&i(),h="ol",g.push(e.replace(/^\d+\. /,"").trim())):e&&(i(),f.push((0,d.jsx)("p",{className:"my-1 leading-relaxed",children:c(e)},b)))}),i(),(0,d.jsx)("div",{className:`text-sm text-slate-800 font-sans max-w-none prose prose-sm prose-slate ${b}`,children:f})}},99597:(a,b,c)=>{c.d(b,{dj:()=>g}),c(8732);var d=c(82015);c(54822);let e=(0,d.createContext)(void 0),f=(0,d.createContext)(void 0),g=()=>{let a=(()=>{let a=(0,d.useContext)(e);return void 0===a?{enabled:!1,logRouterChange:()=>{},logHookCall:()=>{},logContextAccess:()=>{}}:a})(),b=(0,d.useContext)(f);if(a.logContextAccess("ToastContext","useToast"),!b){let a=Error("useToast must be used within a ToastProvider");throw console.error("‚ùå Toast Context Error:",a.message),a}return{showToast:b.showToast}}}};