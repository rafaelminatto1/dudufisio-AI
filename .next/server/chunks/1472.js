"use strict";exports.id=1472,exports.ids=[1472],exports.modules={51472:(a,b,c)=>{c.r(b),c.d(b,{default:()=>n});var d=c(8732),e=c(82015),f=c(51302),g=c(99597),h=c(28471),i=c(737),j=c(26821),k=c(55489),l=c(3287),m=c(77590);let n=({appointmentId:a,onClose:b})=>{let[c,n]=(0,e.useState)(null),[o,p]=(0,e.useState)(null),[q,r]=(0,e.useState)([]),[s,t]=(0,e.useState)(!0),[u,v]=(0,e.useState)(!1),[w,x]=(0,e.useState)("session"),{therapists:y}=(0,h.Ez)(),{showToast:z}=(0,g.dj)();(0,e.useEffect)(()=>{(async()=>{t(!0);try{let c=(await i.Xj()).find(b=>b.id===a);if(!c){z("Agendamento n\xe3o encontrado","error"),b();return}n(c);let d=await j.mQ(c.patientId);if(!d){z("Paciente n\xe3o encontrado","error"),b();return}p(d);let e=await k.lV(c.patientId);r(e.sort((a,b)=>new Date(b.date).getTime()-new Date(a.date).getTime()))}catch(a){console.error("Erro ao carregar dados da sess\xe3o:",a),z("Erro ao carregar dados da sess\xe3o","error"),b()}finally{t(!1)}})()},[a,b,z]);let A=async a=>{if(o)try{await k.gp(o.id,a);let b=await k.lV(o.id);r(b.sort((a,b)=>new Date(b.date).getTime()-new Date(a.date).getTime())),v(!1),z("Anota\xe7\xe3o da sess\xe3o salva com sucesso!","success")}catch(a){z("Erro ao salvar anota\xe7\xe3o da sess\xe3o","error")}},B=y.find(a=>a.id===c?.therapistId);if(s)return(0,d.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-sky-600"})});if(!c||!o)return null;let C=({id:a,icon:b,label:c})=>(0,d.jsxs)("button",{onClick:()=>x(a),className:`flex items-center px-4 py-2 text-sm font-medium rounded-lg transition-colors ${w===a?"bg-sky-500 text-white":"text-slate-600 hover:bg-slate-100"}`,children:[(0,d.jsx)(b,{className:"w-4 h-4 mr-2"}),c]});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,d.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[95vh] flex flex-col",children:[(0,d.jsxs)("header",{className:"flex items-center justify-between p-6 border-b",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-xl font-bold text-slate-800",children:"Sess\xe3o de Atendimento"}),(0,d.jsxs)("p",{className:"text-sm text-slate-600 mt-1",children:[o.name," - ",new Date(c.startTime).toLocaleString("pt-BR")]})]}),(0,d.jsx)("button",{onClick:b,className:"p-2 rounded-full hover:bg-slate-100 transition-colors",children:(0,d.jsx)(f.X,{className:"w-6 h-6 text-slate-500"})})]}),(0,d.jsxs)("div",{className:"flex gap-2 p-4 border-b",children:[(0,d.jsx)(C,{id:"session",icon:f.Ilq,label:"Sess\xe3o Atual"}),(0,d.jsx)(C,{id:"history",icon:f.BZB,label:"Hist\xf3rico"}),(0,d.jsx)(C,{id:"patient",icon:f.KJW,label:"Dados do Paciente"})]}),(0,d.jsxs)("div",{className:"flex-1 overflow-hidden",children:["session"===w&&(0,d.jsx)("div",{className:"p-6 h-full overflow-y-auto",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-full",children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4",children:[(0,d.jsxs)("h3",{className:"font-semibold text-slate-800 mb-3 flex items-center",children:[(0,d.jsx)(f.zD7,{className:"w-5 h-5 mr-2"}),"Informa\xe7\xf5es da Sess\xe3o"]}),(0,d.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Paciente:"})," ",o.name]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Fisioterapeuta:"})," ",B?.name||"N/A"]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Data/Hora:"})," ",new Date(c.startTime).toLocaleString("pt-BR")]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Dura\xe7\xe3o:"})," ",Math.round((new Date(c.endTime).getTime()-new Date(c.startTime).getTime())/6e4)," min"]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Status:"})," ",c.status]}),c.sessionNumber&&c.totalSessions&&(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Sess\xe3o:"})," ",c.sessionNumber," de ",c.totalSessions]})]})]}),o.conditions&&o.conditions.length>0&&(0,d.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,d.jsx)("h3",{className:"font-semibold text-slate-800 mb-3",children:"Condi\xe7\xf5es/Queixas"}),(0,d.jsx)("div",{className:"space-y-2",children:o.conditions.map((a,b)=>(0,d.jsxs)("div",{className:"text-sm bg-white p-2 rounded border-l-4 border-blue-400",children:[(0,d.jsx)("strong",{children:a.name}),a.description&&(0,d.jsx)("p",{className:"text-slate-600 mt-1",children:a.description})]},b))})]}),(0,d.jsxs)("button",{onClick:()=>v(!0),className:"w-full bg-sky-500 hover:bg-sky-600 text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center",children:[(0,d.jsx)(f.FWt,{className:"w-5 h-5 mr-2"}),"Registrar Evolu\xe7\xe3o da Sess\xe3o"]})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("h3",{className:"font-semibold text-slate-800 flex items-center",children:[(0,d.jsx)(f.iUU,{className:"w-5 h-5 mr-2"}),"\xdaltima Sess\xe3o"]}),q.length>0?(0,d.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 max-h-96 overflow-y-auto",children:[(0,d.jsxs)("div",{className:"text-sm text-slate-600 mb-2",children:["Sess\xe3o #",q[0].sessionNumber," - ",q[0].date]}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{className:"text-sky-600",children:"S (Subjetivo):"}),(0,d.jsx)(m.A,{content:q[0].subjective})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{className:"text-sky-600",children:"O (Objetivo):"}),(0,d.jsx)(m.A,{content:q[0].objective})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{className:"text-sky-600",children:"A (Avalia\xe7\xe3o):"}),(0,d.jsx)(m.A,{content:q[0].assessment})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{className:"text-sky-600",children:"P (Plano):"}),(0,d.jsx)(m.A,{content:q[0].plan})]})]})]}):(0,d.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 text-center text-slate-500",children:[(0,d.jsx)(f.iUU,{className:"w-8 h-8 mx-auto mb-2 text-slate-300"}),"Nenhuma sess\xe3o anterior registrada"]})]})]})}),"history"===w&&(0,d.jsxs)("div",{className:"p-6 h-full overflow-y-auto",children:[(0,d.jsxs)("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center",children:[(0,d.jsx)(f.BZB,{className:"w-5 h-5 mr-2"}),"Hist\xf3rico de Sess\xf5es (",q.length,")"]}),q.length>0?(0,d.jsx)("div",{className:"space-y-4",children:q.map((a,b)=>(0,d.jsxs)("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[(0,d.jsx)("div",{className:"flex justify-between items-start mb-3",children:(0,d.jsxs)("div",{children:[(0,d.jsxs)("h4",{className:"font-semibold text-slate-800",children:["Sess\xe3o #",a.sessionNumber]}),(0,d.jsxs)("p",{className:"text-sm text-slate-500",children:[a.date," - ",a.therapist]})]})}),(0,d.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{className:"text-sky-600",children:"S:"}),(0,d.jsx)("div",{className:"ml-4",children:(0,d.jsx)(m.A,{content:a.subjective})})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{className:"text-sky-600",children:"O:"}),(0,d.jsx)("div",{className:"ml-4",children:(0,d.jsx)(m.A,{content:a.objective})})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{className:"text-sky-600",children:"A:"}),(0,d.jsx)("div",{className:"ml-4",children:(0,d.jsx)(m.A,{content:a.assessment})})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{className:"text-sky-600",children:"P:"}),(0,d.jsx)("div",{className:"ml-4",children:(0,d.jsx)(m.A,{content:a.plan})})]})]})]},a.id))}):(0,d.jsxs)("div",{className:"text-center text-slate-500 py-8",children:[(0,d.jsx)(f.iUU,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),(0,d.jsx)("p",{children:"Nenhuma sess\xe3o registrada ainda"})]})]}),"patient"===w&&(0,d.jsxs)("div",{className:"p-6 h-full overflow-y-auto",children:[(0,d.jsxs)("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center",children:[(0,d.jsx)(f.KJW,{className:"w-5 h-5 mr-2"}),"Dados do Paciente"]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,d.jsx)("div",{className:"space-y-4",children:(0,d.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4",children:[(0,d.jsx)("h4",{className:"font-semibold text-slate-800 mb-3",children:"Informa\xe7\xf5es Pessoais"}),(0,d.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Nome:"})," ",o.name]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"E-mail:"})," ",o.email]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Telefone:"})," ",o.phone]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Data de Nascimento:"})," ",new Date(o.birthDate).toLocaleDateString("pt-BR")]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Status:"})," ",o.status]})]})]})}),(0,d.jsxs)("div",{className:"space-y-4",children:[o.conditions&&o.conditions.length>0&&(0,d.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,d.jsx)("h4",{className:"font-semibold text-slate-800 mb-3",children:"Condi\xe7\xf5es/Queixas"}),(0,d.jsx)("div",{className:"space-y-2",children:o.conditions.map((a,b)=>(0,d.jsxs)("div",{className:"text-sm",children:[(0,d.jsx)("strong",{children:a.name}),a.description&&(0,d.jsx)("p",{className:"text-slate-600",children:a.description})]},b))})]}),o.surgeries&&o.surgeries.length>0&&(0,d.jsxs)("div",{className:"bg-red-50 rounded-lg p-4",children:[(0,d.jsx)("h4",{className:"font-semibold text-slate-800 mb-3",children:"Hist\xf3rico Cir\xfargico"}),(0,d.jsx)("div",{className:"space-y-2",children:o.surgeries.map((a,b)=>(0,d.jsxs)("div",{className:"text-sm",children:[(0,d.jsx)("strong",{children:a.name}),(0,d.jsx)("p",{className:"text-slate-600",children:new Date(a.date).toLocaleDateString("pt-BR")})]},b))})]})]})]})]})]})]})}),(0,d.jsx)(l.A,{isOpen:u,onClose:()=>v(!1),onSave:A})]})}},77590:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(8732);c(82015);let e=({content:a,className:b=""})=>{if(!a)return null;let c=a=>a.split(/(\*\*\*.*?\*\*\*|\*\*.*?\*\*|\*.*?\*|`.*?`|✅|📉|💪|🏆|⚠️)/g).filter(Boolean).map((a,b)=>"✅"===a||"\uD83D\uDCC9"===a||"\uD83D\uDCAA"===a||"\uD83C\uDFC6"===a||"⚠️"===a?(0,d.jsx)("span",{className:"mr-2",children:a},b):a.startsWith("***")&&a.endsWith("***")?(0,d.jsx)("strong",{children:(0,d.jsx)("em",{children:a.slice(3,-3)})},b):a.startsWith("**")&&a.endsWith("**")?(0,d.jsx)("strong",{children:a.slice(2,-2)},b):a.startsWith("*")&&a.endsWith("*")?(0,d.jsx)("em",{children:a.slice(1,-1)},b):a.startsWith("`")&&a.endsWith("`")?(0,d.jsx)("code",{className:"bg-slate-200 text-slate-800 px-1 py-0.5 rounded-sm font-mono text-xs",children:a.slice(1,-1)},b):a),e=a.split("\n"),f=[],g=[],h=null,i=()=>{if(g.length>0){let a="ol"===h?"ol":"ul";f.push((0,d.jsx)(a,{className:`pl-5 space-y-1 my-3 ${"ol"===h?"list-decimal":"list-disc"}`,children:g.map((a,b)=>(0,d.jsx)("li",{children:c(a)},b))},f.length)),g=[],h=null}};return e.forEach((a,b)=>{let e=a.trim();e.startsWith("## ")?(i(),f.push((0,d.jsx)("h2",{className:"text-xl font-bold text-slate-800 mt-4 mb-2 pb-2 border-b border-slate-200",children:c(e.substring(3))},b))):e.startsWith("### ")?(i(),f.push((0,d.jsx)("h3",{className:"text-lg font-semibold text-teal-600 my-3",children:c(e.substring(4))},b))):e.startsWith(">")?(i(),f.push((0,d.jsx)("blockquote",{className:"pl-4 italic border-l-4 border-slate-300 text-slate-600 my-2",children:c(e.substring(1))},b))):e.startsWith("---")?(i(),f.push((0,d.jsx)("hr",{className:"my-6 border-slate-200"},b))):e.startsWith("- ")?("ul"!==h&&i(),h="ul",g.push(e.substring(2).trim())):e.match(/^\d+\. /)?("ol"!==h&&i(),h="ol",g.push(e.replace(/^\d+\. /,"").trim())):e&&(i(),f.push((0,d.jsx)("p",{className:"my-1 leading-relaxed",children:c(e)},b)))}),i(),(0,d.jsx)("div",{className:`text-sm text-slate-800 font-sans max-w-none prose prose-sm prose-slate ${b}`,children:f})}},99597:(a,b,c)=>{c.d(b,{dj:()=>g}),c(8732);var d=c(82015);c(54822);let e=(0,d.createContext)(void 0),f=(0,d.createContext)(void 0),g=()=>{let a=(()=>{let a=(0,d.useContext)(e);return void 0===a?{enabled:!1,logRouterChange:()=>{},logHookCall:()=>{},logContextAccess:()=>{}}:a})(),b=(0,d.useContext)(f);if(a.logContextAccess("ToastContext","useToast"),!b){let a=Error("useToast must be used within a ToastProvider");throw console.error("❌ Toast Context Error:",a.message),a}return{showToast:b.showToast}}}};