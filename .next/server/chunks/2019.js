"use strict";exports.id=2019,exports.ids=[2019],exports.modules={8704:(a,b,c)=>{c.d(b,{Gp:()=>j,OL:()=>h,Up:()=>g,VN:()=>k,bV:()=>i});var d=c(4183);let e=[...d.Ef],f=a=>new Promise(b=>setTimeout(b,a)),g=async()=>(await f(300),[...e]),h=async a=>{if(await f(400),a.id){let b=e.findIndex(b=>b.id===a.id);if(b>-1){let c={...e[b],...a};return e[b]=c,c}throw Error("Partner not found")}{let b={id:`partner_${Date.now()}`,...a,avatarUrl:`https://i.pravatar.cc/150?u=${a.userId}`};return e.push(b),b}},i=async(a,b,c)=>{await f(600);let e=d.Nk.find(a=>a.id===c);if(!e)throw Error("Plano n\xe3o encontrado.");let g=new Date,h=new Date;h.setDate(g.getDate()+e.durationDays);let i={id:`voucher_${Date.now()}`,code:`VF-CLINIC-${Math.random().toString(36).substr(2,6).toUpperCase()}`,patientId:a,plan:e,status:"activated",purchaseDate:g,activationDate:g,expiryDate:h,remainingCredits:e.credits};return d.XM.unshift(i),i},j=async a=>{await f(500);let b=[];for(let a of d.XM){let c=d.N.find(b=>b.id===a.patientId);c&&b.push({patient:c,voucher:a})}return b},k=async(a,b)=>{await f(700);let c=d.XM.find(b=>b.patientId===a),e=d.N.find(b=>b.id===a);return c&&e?{patient:e,voucher:c,soapNotes:d.Tf.filter(b=>b.patientId===a)}:null}},19119:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{E:()=>h});var e=c(8732),f=c(71253),g=a([f]);function h({className:a,...b}){return(0,e.jsx)("div",{className:(0,f.cn)("animate-pulse rounded-md bg-muted",a),...b})}f=(g.then?(await g)():g)[0],d()}catch(a){d(a)}})},42227:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(8732);c(82015);let e=({title:a,subtitle:b,children:c})=>(0,d.jsxs)("div",{className:"pb-8 md:flex md:items-center md:justify-between",children:[(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold leading-tight text-slate-900 tracking-tight",children:a}),(0,d.jsx)("p",{className:"mt-2 text-lg text-slate-600",children:b})]}),(0,d.jsx)("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:c})]})},71253:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{cn:()=>h});var e=c(50802),f=c(75979),g=a([e,f]);function h(...a){return(0,f.twMerge)((0,e.clsx)(a))}[e,f]=g.then?(await g)():g,d()}catch(a){d(a)}})},92019:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>p});var e=c(8732),f=c(82015),g=c(54822),h=c(42227),i=c(8704),j=c(28471),k=c(19119),l=c(99597),m=c(51302),n=a([k]);k=(n.then?(await n)():n)[0];let o=({client:a})=>{let b=g.useNavigate();return(0,e.jsxs)("tr",{className:"border-b border-slate-200 hover:bg-slate-50 cursor-pointer",onClick:()=>b(`/partner/clients/${a.patient.id}`),children:[(0,e.jsx)("td",{className:"p-4 whitespace-nowrap",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("img",{className:"h-10 w-10 rounded-full object-cover",src:a.patient.avatarUrl,alt:a.patient.name}),(0,e.jsxs)("div",{className:"ml-4",children:[(0,e.jsx)("div",{className:"text-sm font-medium text-slate-900",children:a.patient.name}),(0,e.jsx)("div",{className:"text-sm text-slate-500",children:a.patient.email})]})]})}),(0,e.jsxs)("td",{className:"p-4 whitespace-nowrap",children:[(0,e.jsx)("div",{className:"text-sm text-slate-900",children:a.voucher.plan.name}),(0,e.jsxs)("div",{className:"text-sm text-slate-500",children:["Cr\xe9ditos: ",a.voucher.remainingCredits,"/",a.voucher.plan.credits]})]}),(0,e.jsx)("td",{className:"p-4 whitespace-nowrap",children:(0,e.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Ativo"})}),(0,e.jsxs)("td",{className:"p-4 whitespace-nowrap text-sm text-slate-500",children:["Expira em: ",new Date(a.voucher.expiryDate).toLocaleDateString("pt-BR")]})]})},p=()=>{let[a,b]=(0,f.useState)([]),[c,d]=(0,f.useState)(!0),[g,n]=(0,f.useState)(""),{user:p}=(0,j.As)(),{showToast:q}=(0,l.dj)();(0,f.useEffect)(()=>{(async()=>{if(p){d(!0);try{let a=await i.Gp(p.id);b(a)}catch{q("Erro ao carregar lista de clientes.","error")}finally{d(!1)}}})()},[p,q]);let r=(0,f.useMemo)(()=>a.filter(a=>a.patient.name.toLowerCase().includes(g.toLowerCase())||a.patient.email.toLowerCase().includes(g.toLowerCase())),[g,a]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(h.A,{title:"Meus Clientes",subtitle:"Gerencie os pacientes que adquiriram seus planos de servi\xe7o."}),(0,e.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,e.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,e.jsxs)("div",{className:"relative w-full max-w-xs",children:[(0,e.jsx)(m.vji,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,e.jsx)("input",{type:"text",placeholder:"Buscar por nome ou email...",value:g,onChange:a=>n(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg"})]})}),(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[(0,e.jsx)("thead",{className:"bg-slate-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{className:"p-4 text-left text-xs font-medium text-slate-500 uppercase",children:"Paciente"}),(0,e.jsx)("th",{className:"p-4 text-left text-xs font-medium text-slate-500 uppercase",children:"Plano"}),(0,e.jsx)("th",{className:"p-4 text-left text-xs font-medium text-slate-500 uppercase",children:"Status"}),(0,e.jsx)("th",{className:"p-4 text-left text-xs font-medium text-slate-500 uppercase",children:"Voucher"})]})}),(0,e.jsx)("tbody",{className:"bg-white divide-y divide-slate-200",children:c?Array.from({length:3}).map((a,b)=>(0,e.jsx)("tr",{children:(0,e.jsx)("td",{colSpan:4,className:"p-4",children:(0,e.jsx)(k.E,{className:"h-12 w-full"})})},b)):r.length>0?r.map(a=>(0,e.jsx)(o,{client:a},a.patient.id)):(0,e.jsx)("tr",{children:(0,e.jsx)("td",{colSpan:4,className:"text-center p-10 text-slate-500",children:"Nenhum cliente encontrado."})})})]})})]})]})};d()}catch(a){d(a)}})},99597:(a,b,c)=>{c.d(b,{dj:()=>g}),c(8732);var d=c(82015);c(54822);let e=(0,d.createContext)(void 0),f=(0,d.createContext)(void 0),g=()=>{let a=(()=>{let a=(0,d.useContext)(e);return void 0===a?{enabled:!1,logRouterChange:()=>{},logHookCall:()=>{},logContextAccess:()=>{}}:a})(),b=(0,d.useContext)(f);if(a.logContextAccess("ToastContext","useToast"),!b){let a=Error("useToast must be used within a ToastProvider");throw console.error("‚ùå Toast Context Error:",a.message),a}return{showToast:b.showToast}}}};