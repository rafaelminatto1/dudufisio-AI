"use strict";exports.id=3709,exports.ids=[3709],exports.modules={43709:(a,b,c)=>{c.d(b,{A:()=>j});var d=c(8732),e=c(82015),f=c(51302),g=c(72393),h=c(99597);let i=()=>({name:"",cpf:"",birthDate:"",phone:"",email:"",emergencyContact:{name:"",phone:""},address:{street:"",city:"",state:"",zip:""},status:g.WW.Active,registrationDate:new Date().toISOString(),avatarUrl:`https://picsum.photos/seed/${Date.now()}/200/200`,consentGiven:!1,whatsappConsent:"opt-out",allergies:"",medicalAlerts:""}),j=({isOpen:a,onClose:b,onSave:c,patientToEdit:g})=>{let[j,k]=(0,e.useState)(i()),[l,m]=(0,e.useState)(!1),{showToast:n}=(0,h.dj)(),o=(0,e.useRef)(null);if((0,e.useEffect)(()=>{g?k({...g,birthDate:g.birthDate?new Date(g.birthDate).toISOString().split("T")[0]:"",allergies:g.allergies||"",medicalAlerts:g.medicalAlerts||""}):k(i())},[g,a]),(0,e.useEffect)(()=>{if(!a)return;let b=a=>{if("Tab"===a.key){let b=o.current?.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(!b)return;let c=b[0],d=b[b.length-1];a.shiftKey?document.activeElement===c&&(d.focus(),a.preventDefault()):document.activeElement===d&&(c.focus(),a.preventDefault())}};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[a]),!a)return null;let p=a=>{let{name:b,value:c}=a.target;k(a=>({...a,[b]:c}))},q=(a,b)=>{let{name:c,value:d}=a.target;k(a=>({...a,[b]:{...a[b],[c]:d}}))},r=async()=>{if(!j.name||!j.cpf||!j.email)return void n("Nome, CPF e Email s\xe3o campos obrigat\xf3rios.","error");if(!j.consentGiven)return void n("O consentimento LGPD \xe9 obrigat\xf3rio.","error");m(!0);try{await c(j),n(g?"Paciente atualizado com sucesso!":"Paciente salvo com sucesso!","success"),b()}catch(a){n("Falha ao salvar paciente. Tente novamente.","error")}finally{m(!1)}},s=g?"Editar Cadastro do Paciente":"Adicionar Novo Paciente";return(0,d.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:b,children:(0,d.jsxs)("div",{ref:o,className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",onClick:a=>a.stopPropagation(),children:[(0,d.jsxs)("header",{className:"flex items-center justify-between p-5 border-b border-slate-200",children:[(0,d.jsx)("h2",{className:"text-lg font-bold text-slate-800",children:s}),(0,d.jsx)("button",{onClick:b,className:"p-2 rounded-full hover:bg-slate-100",children:(0,d.jsx)(f.X,{className:"w-5 h-5 text-slate-600"})})]}),(0,d.jsxs)("main",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(0,d.jsxs)("section",{children:[(0,d.jsx)("h3",{className:"text-md font-semibold text-sky-700 border-b pb-2 mb-4",children:"Informa\xe7\xf5es Pessoais"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Nome Completo*"}),(0,d.jsx)("input",{type:"text",name:"name",value:j.name,onChange:p,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"CPF*"}),(0,d.jsx)("input",{type:"text",name:"cpf",value:j.cpf,onChange:p,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Email*"}),(0,d.jsx)("input",{type:"email",name:"email",value:j.email,onChange:p,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Data de Nascimento"}),(0,d.jsx)("input",{type:"date",name:"birthDate",value:j.birthDate,onChange:p,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]}),(0,d.jsxs)("div",{className:"md:col-span-2",children:[(0,d.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Telefone"}),(0,d.jsx)("input",{type:"tel",name:"phone",value:j.phone,onChange:p,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]})]})]}),(0,d.jsxs)("section",{children:[(0,d.jsx)("h3",{className:"text-md font-semibold text-sky-700 border-b pb-2 mt-4 mb-4",children:"Informa\xe7\xf5es de Sa\xfade"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Alergias Conhecidas"}),(0,d.jsx)("textarea",{name:"allergies",value:j.allergies,onChange:p,rows:2,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg",placeholder:"Ex: Dipirona, l\xe1tex..."})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Alertas M\xe9dicos / Contraindica\xe7\xf5es"}),(0,d.jsx)("textarea",{name:"medicalAlerts",value:j.medicalAlerts,onChange:p,rows:2,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg",placeholder:"Ex: Hipertens\xe3o, marca-passo..."})]})]})]}),(0,d.jsxs)("section",{children:[(0,d.jsx)("h3",{className:"md:col-span-2 text-md font-semibold text-sky-700 border-b pb-2 mt-4 mb-4",children:"Endere\xe7o"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Rua"}),(0,d.jsx)("input",{type:"text",name:"street",value:j.address.street,onChange:a=>q(a,"address"),className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Cidade"}),(0,d.jsx)("input",{type:"text",name:"city",value:j.address.city,onChange:a=>q(a,"address"),className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Estado"}),(0,d.jsx)("input",{type:"text",name:"state",value:j.address.state,onChange:a=>q(a,"address"),className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"CEP"}),(0,d.jsx)("input",{type:"text",name:"zip",value:j.address.zip,onChange:a=>q(a,"address"),className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]})]})]}),(0,d.jsxs)("section",{children:[(0,d.jsx)("h3",{className:"md:col-span-2 text-md font-semibold text-sky-700 border-b pb-2 mt-4 mb-4",children:"Contato de Emerg\xeancia"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Nome"}),(0,d.jsx)("input",{type:"text",name:"name",value:j.emergencyContact.name,onChange:a=>q(a,"emergencyContact"),className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Telefone"}),(0,d.jsx)("input",{type:"text",name:"phone",value:j.emergencyContact.phone,onChange:a=>q(a,"emergencyContact"),className:"mt-1 w-full p-2 border border-slate-300 rounded-lg"})]})]})]}),(0,d.jsxs)("section",{children:[(0,d.jsx)("h3",{className:"md:col-span-2 text-md font-semibold text-sky-700 border-b pb-2 mt-4 mb-4",children:"Conformidade e Status"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Status do Paciente"}),(0,d.jsxs)("select",{name:"status",value:j.status,onChange:p,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg bg-white",children:[(0,d.jsx)("option",{value:"Active",children:"Ativo"}),(0,d.jsx)("option",{value:"Inactive",children:"Inativo"}),(0,d.jsx)("option",{value:"Discharged",children:"Alta"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Comunica\xe7\xe3o via WhatsApp"}),(0,d.jsxs)("div",{className:"mt-2 flex gap-4",children:[(0,d.jsxs)("label",{className:"flex items-center",children:[(0,d.jsx)("input",{type:"radio",name:"whatsappConsent",value:"opt-in",checked:"opt-in"===j.whatsappConsent,onChange:p,className:"h-4 w-4 text-sky-600 border-gray-300"}),(0,d.jsx)("span",{className:"ml-2 text-sm",children:"Aceita (Opt-in)"})]}),(0,d.jsxs)("label",{className:"flex items-center",children:[(0,d.jsx)("input",{type:"radio",name:"whatsappConsent",value:"opt-out",checked:"opt-out"===j.whatsappConsent,onChange:p,className:"h-4 w-4 text-sky-600 border-gray-300"}),(0,d.jsx)("span",{className:"ml-2 text-sm",children:"N\xe3o Aceita (Opt-out)"})]})]})]}),(0,d.jsxs)("div",{className:"md:col-span-2 flex items-start space-x-3 mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,d.jsx)("input",{type:"checkbox",id:"consentGiven",name:"consentGiven",checked:j.consentGiven,onChange:a=>k(b=>({...b,consentGiven:a.target.checked})),className:"h-5 w-5 rounded border-gray-300 text-sky-600 focus:ring-sky-500 mt-1"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("label",{htmlFor:"consentGiven",className:"text-sm font-bold text-amber-900",children:"Consentimento LGPD*"}),(0,d.jsx)("p",{className:"text-xs text-amber-800",children:"Eu confirmo que o paciente forneceu consentimento expl\xedcito para o armazenamento e processamento de seus dados pessoais e de sa\xfade, conforme a Lei Geral de Prote\xe7\xe3o de Dados (LGPD)."})]})]})]})]})]}),(0,d.jsx)("footer",{className:"flex justify-end items-center p-4 border-t border-slate-200 bg-slate-50 rounded-b-2xl",children:(0,d.jsxs)("div",{className:"ml-auto",children:[(0,d.jsx)("button",{onClick:b,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 mr-2",children:"Cancelar"}),(0,d.jsxs)("button",{onClick:r,disabled:l,className:"px-4 py-2 text-sm font-medium text-white bg-sky-500 border border-transparent rounded-lg hover:bg-sky-600 flex items-center disabled:bg-sky-300",children:[(0,d.jsx)(f.eMP,{className:"w-4 h-4 mr-2"}),l?"Salvando...":"Salvar"]})]})})]})})}}};