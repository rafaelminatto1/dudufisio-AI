"use strict";exports.id=9491,exports.ids=[9491],exports.modules={1573:(a,b,c)=>{c.d(b,{u:()=>e});class d{async query(a,b){return{response:`Mock AI response for: ${a.slice(0,50)}...`,provider:b||"mock",timestamp:new Date,usage:{tokens:100,cost:.01}}}async getQueryHistory(){return[]}async getAvailableProviders(){return["mock"]}}let e=new d},3287:(a,b,c)=>{c.d(b,{A:()=>k});var d=c(8732),e=c(82015),f=c(51302),g=c(24807),h=c(90393),i=c(1573),j=c(99597);let k=({isOpen:a,onClose:b,onSave:c,noteToDuplicate:k})=>{if(!a)return null;let[l,m]=(0,e.useState)(""),[n,o]=(0,e.useState)(""),[p,q]=(0,e.useState)(""),[r,s]=(0,e.useState)(""),[t,u]=(0,e.useState)([]),[v,w]=(0,e.useState)(void 0),[x,y]=(0,e.useState)(!1),[z,A]=(0,e.useState)(!1),{showToast:B}=(0,j.dj)(),C=(0,e.useRef)(null),D=()=>{m(""),o(""),q(""),s(""),u([]),w(void 0)};(0,e.useEffect)(()=>{a&&(k?(m(k.subjective),o(k.objective),q(k.assessment),s(k.plan),u(k.bodyParts||[]),w(k.painScale),B("Dados da sess\xe3o anterior carregados.","info")):D())},[a,k,B]),(0,e.useEffect)(()=>{if(!a)return;let b=a=>{if("Tab"===a.key){let b=C.current?.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(!b)return;let c=b[0],d=b[b.length-1];a.shiftKey?document.activeElement===c&&(d.focus(),a.preventDefault()):document.activeElement===d&&(c.focus(),a.preventDefault())}};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[a]);let E=async()=>{A(!0);try{await c({date:new Date().toLocaleDateString("pt-BR"),subjective:l,objective:n,assessment:p,plan:r,bodyParts:t,painScale:v}),B("Nota SOAP salva com sucesso!","success"),D()}catch(a){console.error("Failed to save SOAP note:",a),B("Falha ao salvar a nota SOAP.","error")}finally{A(!1)}},F=async()=>{if(!l.trim()&&!n.trim()||x)return;y(!0);let a=`Com base no relato Subjetivo e nos achados Objetivos a seguir, sugira uma Avalia\xe7\xe3o e um Plano de tratamento para um paciente de fisioterapia. N\xedvel de dor reportado: ${v||"n\xe3o informado"}. Formate sua resposta com os t\xedtulos "AVALIA\xc7\xc3O:" e "PLANO:".
---
Subjetivo: "${l}"
---
Objetivo: "${n}"
---`;try{let b=(await i.u.getResponse(a)).content,c="AVALIA\xc7\xc3O:",d="PLANO:",e=b.toUpperCase().indexOf(c),f=b.toUpperCase().indexOf(d),g="",h="";if(-1!==e&&-1!==f)e<f?(g=b.substring(e+c.length,f).trim(),h=b.substring(f+d.length).trim()):(h=b.substring(f+d.length,e).trim(),g=b.substring(e+c.length).trim());else if(-1!==e)g=b.substring(e+c.length).trim();else if(-1!==f)h=b.substring(f+d.length).trim();else{let a=b.split("\n").filter(a=>""!==a.trim());if(a.length>1){let b=Math.ceil(a.length/2);g=a.slice(0,b).join("\n"),h=a.slice(b).join("\n")}else g=b}q(g),s(h),B("Sugest\xe3o gerada pela IA.","info")}catch(a){console.error("Failed to generate AI suggestion:",a),q("Ocorreu um erro ao gerar a sugest\xe3o da IA. Por favor, tente novamente."),B("Erro ao gerar sugest\xe3o da IA.","error")}finally{y(!1)}},G=new Date().toLocaleDateString("pt-BR",{year:"numeric",month:"long",day:"numeric"});return(0,d.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:b,children:(0,d.jsxs)("div",{ref:C,className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",onClick:a=>a.stopPropagation(),children:[(0,d.jsxs)("header",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-lg font-bold text-slate-800",children:"Nova Anota\xe7\xe3o Cl\xednica (SOAP)"}),(0,d.jsxs)("p",{className:"text-sm text-slate-500",children:["Data: ",G]})]}),(0,d.jsx)("button",{onClick:b,className:"p-2 rounded-full hover:bg-slate-100",children:(0,d.jsx)(f.X,{className:"w-5 h-5 text-slate-600"})})]}),(0,d.jsxs)("main",{className:"flex-1 overflow-y-auto p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("div",{children:(0,d.jsx)(h.A,{selectedScore:v,onSelectScore:w})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-semibold text-sky-700",children:"S (Subjetivo)"}),(0,d.jsx)("textarea",{value:l,onChange:a=>m(a.target.value),rows:3,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500 text-sm",placeholder:"Relato do paciente, queixas, etc."})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-semibold text-sky-700",children:"O (Objetivo)"}),(0,d.jsx)("textarea",{value:n,onChange:a=>o(a.target.value),rows:3,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500 text-sm",placeholder:"Testes, medidas, observa\xe7\xf5es..."})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-semibold text-sky-700",children:"A (Avalia\xe7\xe3o)"}),(0,d.jsx)("textarea",{value:p,onChange:a=>q(a.target.value),rows:3,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500 text-sm",placeholder:"Diagn\xf3stico fisioterap\xeautico..."})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-semibold text-sky-700",children:"P (Plano)"}),(0,d.jsx)("textarea",{value:r,onChange:a=>s(a.target.value),rows:3,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500 text-sm",placeholder:"Condutas, exerc\xedcios, orienta\xe7\xf5es..."})]})]}),(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("label",{className:"text-sm font-semibold text-sky-700 mb-2",children:"Mapa Corporal Interativo"}),(0,d.jsx)("p",{className:"text-xs text-slate-500 mb-2",children:"Clique para selecionar/desselecionar as \xe1reas afetadas."}),(0,d.jsx)("div",{className:"flex-1 bg-slate-50 rounded-lg p-2 flex items-center justify-center",children:(0,d.jsx)(g.A,{selectedParts:t,onSelectPart:a=>{u(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])}})}),t.length>0&&(0,d.jsxs)("div",{className:"mt-2",children:[(0,d.jsx)("h5",{className:"text-xs font-bold text-slate-500 uppercase mb-2",children:"\xc1reas Selecionadas"}),(0,d.jsx)("div",{className:"flex flex-wrap gap-2",children:t.map(a=>(0,d.jsx)("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded-full",children:a},a))})]})]})]}),(0,d.jsxs)("footer",{className:"flex justify-between items-center p-4 border-t border-slate-200",children:[(0,d.jsx)("button",{onClick:F,disabled:x||!l.trim()&&!n.trim(),className:"px-4 py-2 text-sm font-medium text-sky-600 bg-sky-50 border border-sky-200 rounded-lg hover:bg-sky-100 flex items-center disabled:bg-slate-100 disabled:text-slate-400 disabled:cursor-not-allowed transition-colors",title:"Usa os campos Subjetivo e Objetivo para gerar sugest\xf5es de Avalia\xe7\xe3o e Plano",children:x?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f.aHM,{className:"w-4 h-4 mr-2 animate-spin"}),"Gerando..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f.s6t,{className:"w-4 h-4 mr-2"}),"Sugerir A/P com IA"]})}),(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("button",{onClick:b,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 mr-2",children:"Cancelar"}),(0,d.jsxs)("button",{onClick:E,disabled:z,className:"px-4 py-2 text-sm font-medium text-white bg-sky-500 border border-transparent rounded-lg hover:bg-sky-600 flex items-center disabled:bg-sky-300",children:[(0,d.jsx)(f.eMP,{className:"w-4 h-4 mr-2"}),z?"Salvando...":"Salvar Anota\xe7\xe3o"]})]})]})]})})}},24807:(a,b,c)=>{c.d(b,{A:()=>g});var d=c(8732);c(82015);let e=a=>a<=3?"fill-green-500/80 stroke-green-700":a<=6?"fill-yellow-500/80 stroke-yellow-700":"fill-red-500/80 stroke-red-700",f=({id:a,d:b,selected:c,onClick:e})=>(0,d.jsx)("path",{id:a,d:b,onClick:()=>e(a),className:`cursor-pointer transition-all duration-200 ${c?"fill-red-500/80 stroke-red-700":"fill-slate-300/50 hover:fill-sky-400/50"}`,stroke:"#64748b",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),g=({selectedParts:a,onSelectPart:b,points:c=[],onMapClick:g,onPointClick:h})=>{let i={front:[{id:"Cabe\xe7a",d:"M 67,25 A 12,12 0 1 1 43,25 A 12,12 0 1 1 67,25 Z"},{id:"Pesco\xe7o",d:"M 55,37 Q 55,42 60,42 L 50,42 Q 45,42 45,37 Z"},{id:"Ombro Direito",d:"M 43,43 Q 35,45 32,55 L 45,43 Z"},{id:"Ombro Esquerdo",d:"M 67,43 Q 75,45 78,55 L 65,43 Z"},{id:"T\xf3rax",d:"M 45,43 L 65,43 L 63,65 L 47,65 Z"},{id:"Abd\xf4men",d:"M 47,65 L 63,65 L 60,80 L 50,80 Z"},{id:"Bra\xe7o Direito",d:"M 32,55 L 30,75 L 38,75 L 43,50 Z"},{id:"Bra\xe7o Esquerdo",d:"M 78,55 L 80,75 L 72,75 L 67,50 Z"},{id:"Pelve",d:"M 50,80 L 60,80 L 62,90 L 48,90 Z"},{id:"Perna Direita",d:"M 48,90 L 45,130 L 52,130 L 50,90 Z"},{id:"Perna Esquerda",d:"M 62,90 L 65,130 L 58,130 L 60,90 Z"},{id:"M\xe3o Direita",d:"M 30,75 L 28,85 L 38,82 Z"},{id:"M\xe3o Esquerda",d:"M 80,75 L 82,85 L 72,82 Z"},{id:"P\xe9 Direito",d:"M 45,130 L 42,135 L 52,135 Z"},{id:"P\xe9 Esquerdo",d:"M 65,130 L 68,135 L 58,135 Z"},{id:"Joelho Direito",d:"M 46,105 a 3,3 0 1,1 -6,0 3,3 0 1,1 6,0"},{id:"Joelho Esquerdo",d:"M 64,105 a 3,3 0 1,1 -6,0 3,3 0 1,1 6,0"}],back:[{id:"Costas (Superior)",d:"M 145,43 L 165,43 L 163,65 L 147,65 Z"},{id:"Costas (Lombar)",d:"M 147,65 L 163,65 L 160,80 L 150,80 Z"}]},j=(a,b)=>{if(!g)return;let c=a.currentTarget.getBoundingClientRect();g((a.clientX-c.left)/c.width*100,(a.clientY-c.top)/c.height*100,b)};return(0,d.jsxs)("div",{className:"w-full flex justify-center items-start gap-4",children:[(0,d.jsxs)("svg",{viewBox:"0 0 110 150",className:"w-1/2 max-w-[150px]",onClick:a=>j(a,"front"),children:[i.front.map(c=>(0,d.jsx)(f,{...c,selected:a.includes(c.id),onClick:b},c.id)),c.filter(a=>"front"===a.bodyPart).map(a=>(0,d.jsx)("circle",{cx:`${a.x}%`,cy:`${a.y}%`,r:"3",className:`cursor-pointer ${e(a.intensity)}`,strokeWidth:"1",onClick:b=>{b.stopPropagation(),h?.(a)}},a.id))]}),(0,d.jsxs)("svg",{viewBox:"100 0 110 150",className:"w-1/2 max-w-[150px]",onClick:a=>j(a,"back"),children:[i.front.map(a=>(0,d.jsx)("path",{d:a.d.replace(/M (\d+),/g,(a,b)=>`M ${210-parseInt(b)},`).replace(/A (\d+),(\d+) 0 1 1 (\d+),/g,(a,b,c,d)=>`A ${b},${c} 0 1 0 ${210-parseInt(d)},`),className:"fill-slate-200/50",stroke:"#cbd5e1",strokeWidth:"0.5"},a.id+"_back_outline")),i.back.map(c=>(0,d.jsx)(f,{...c,selected:a.includes(c.id),onClick:b},c.id)),c.filter(a=>"back"===a.bodyPart).map(a=>(0,d.jsx)("circle",{cx:`${210-a.x}%`,cy:`${a.y}%`,r:"3",className:`cursor-pointer ${e(a.intensity)}`,strokeWidth:"1",onClick:b=>{b.stopPropagation(),h?.(a)}},a.id))]})]})}},55489:(a,b,c)=>{c.d(b,{Cq:()=>i,gp:()=>h,lV:()=>g});var d=c(92273),e=c(40396);let f=a=>new Promise(b=>setTimeout(b,a)),g=async a=>(await f(300),[...d.db.getSoapNotes()].filter(b=>b.patientId===a).sort((a,b)=>new Date(b.date.split("/").reverse().join("-")).getTime()-new Date(a.date.split("/").reverse().join("-")).getTime())),h=async(a,b)=>{await f(400);let c={id:`note_${Date.now()}`,patientId:a,therapist:"Dr. Roberto",...b};return d.db.saveSoapNote(c),e.g.emit("notes:changed"),c},i=async a=>{let b;return await f(300),b=a.id?{...d.db.getSoapNotes().find(b=>b.id===a.id),...a}:{id:`note_${Date.now()}`,therapist:"Dr. Roberto",date:new Date().toLocaleDateString("pt-BR"),subjective:"",objective:"",assessment:"",plan:"",...a},d.db.saveSoapNote(b),e.g.emit("notes:changed"),b}},90393:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(8732);c(82015);var e=c(51302);let f=({selectedScore:a,onSelectScore:b})=>{let c=a=>a>=0&&a<=3?{color:"text-green-600",bgColor:"bg-green-100",hoverBg:"hover:bg-green-200",icon:(0,d.jsx)(e.pnY,{className:"w-5 h-5"})}:a>=4&&a<=6?{color:"text-amber-600",bgColor:"bg-amber-100",hoverBg:"hover:bg-amber-200",icon:(0,d.jsx)(e.D3j,{className:"w-5 h-5"})}:a>=7&&a<=10?{color:"text-red-600",bgColor:"bg-red-100",hoverBg:"hover:bg-red-200",icon:(0,d.jsx)(e.Vdx,{className:"w-5 h-5"})}:{color:"text-slate-600",bgColor:"bg-slate-100",hoverBg:"hover:bg-slate-200",icon:null};return(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-semibold text-teal-700 mb-2 block",children:"Escala Visual de Dor (EVA)"}),(0,d.jsx)("div",{className:"flex items-center justify-between space-x-1 bg-slate-50 p-2 rounded-lg",children:Array.from({length:11},(a,b)=>b).map(e=>{let f=a===e,{color:g,bgColor:h,hoverBg:i}=c(e);return(0,d.jsx)("button",{type:"button",onClick:()=>b(e),className:`w-8 h-8 flex items-center justify-center rounded-full text-sm font-bold transition-all duration-200
                ${f?`${g} ${h} ring-2 ring-offset-1 ring-current`:`text-slate-600 ${i}`}
              `,title:`Dor n\xedvel ${e}`,children:e},e)})}),void 0!==a&&(0,d.jsxs)("div",{className:"mt-2 flex items-center justify-center p-2 rounded-md bg-slate-100",children:[(0,d.jsxs)("div",{className:`mr-2 ${c(a).color}`,children:[" ",c(a).icon]}),(0,d.jsxs)("p",{className:`text-sm font-semibold ${c(a).color}`,children:["N\xedvel de dor selecionado: ",a]})]})]})}}};