"use strict";exports.id=8471,exports.ids=[8471],exports.modules={737:(a,b,c)=>{c.d(b,{Fy:()=>j,Uh:()=>i,Xj:()=>h,aJ:()=>l,d3:()=>k});var d=c(92273),e=c(40396),f=c(4183);let g=a=>new Promise(b=>setTimeout(b,a)),h=async(a,b)=>{await g(500);let c=d.db.getAppointments();if(a&&b){let d=new Date(b);return d.setHours(23,59,59,999),[...c].filter(b=>{let c=b.startTime.getTime();return c>=a.getTime()&&c<=d.getTime()})}return[...c]},i=async a=>(await g(300),d.db.getAppointments().filter(b=>b.patientId===a).sort((a,b)=>b.startTime.getTime()-a.startTime.getTime())),j=async a=>{await g(400);let b=f.N.find(b=>b.id===a.patientId),c={...a,patientAvatarUrl:b?.avatarUrl||""};return d.db.saveAppointment(c),e.g.emit("appointments:changed"),c},k=async a=>{await g(400),d.db.deleteAppointment(a),e.g.emit("appointments:changed")},l=async(a,b)=>{await g(400),d.db.deleteAppointmentSeries(a,b),e.g.emit("appointments:changed")}},7976:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(8732);c(82015);var e=c(51302);let f=()=>(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-50",children:[(0,d.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,d.jsx)(e.oYO,{className:"w-16 h-16 text-teal-500 animate-pulse"}),(0,d.jsx)("div",{className:"absolute w-24 h-24 border-t-2 border-b-2 border-teal-200 rounded-full animate-spin"})]}),(0,d.jsx)("p",{className:"mt-4 text-lg font-semibold text-slate-600",children:"Carregando FisioFlow..."})]})},26821:(a,b,c)=>{c.d(b,{L5:()=>k,OS:()=>j,Ob:()=>p,TC:()=>q,Xl:()=>o,Z6:()=>n,bW:()=>i,dc:()=>m,mQ:()=>l,uE:()=>h});var d=c(72393),e=c(92273),f=c(40396);let g=a=>new Promise(b=>setTimeout(b,a)),h=async()=>(await g(500),[...e.db.getPatients()].sort((a,b)=>new Date(b.lastVisit).getTime()-new Date(a.lastVisit).getTime())),i=async a=>{if(await g(300),a.length<2)return[];let b=a.toLowerCase();return e.db.getPatients().filter(a=>a.name.toLowerCase().includes(b)||a.cpf.includes(b)).map(a=>({id:a.id,name:a.name,email:a.email,phone:a.phone,status:a.status,lastVisit:a.lastVisit,avatarUrl:a.avatarUrl,cpf:a.cpf})).slice(0,10)},j=async a=>{await g(500);let b={id:`patient_${Date.now()}`,name:a.trim(),cpf:`TEMP-${Date.now()}`,birthDate:"",phone:"",email:"",emergencyContact:{name:"",phone:""},address:{street:"",city:"",state:"",zip:""},status:d.WW.Active,lastVisit:new Date().toISOString(),registrationDate:new Date().toISOString(),avatarUrl:`https://picsum.photos/seed/${Date.now()}/200/200`,consentGiven:!0,whatsappConsent:"opt-out"};return e.db.addPatient(b),f.g.emit("patients:changed"),b},k=async({limit:a=15,cursor:b,searchTerm:c,statusFilter:d,startDate:f,endDate:h,therapistId:i})=>{await g(500);let j=e.db.getPatients();if(c){let a=c.toLowerCase();j=j.filter(b=>b.name.toLowerCase().includes(a)||b.cpf.includes(a))}if(d&&"All"!==d){let a={Active:"Active",Inactive:"Inactive",Discharged:"Discharged",Ativo:"Active",Inativo:"Inactive",Alta:"Discharged"}[d]||d;j=j.filter(b=>b.status===a)}if(f){let a=new Date(f);a.setHours(0,0,0,0),j=j.filter(b=>new Date(b.registrationDate)>=a)}if(h){let a=new Date(h);a.setHours(23,59,59,999),j=j.filter(b=>new Date(b.registrationDate)<=a)}if(i&&"All"!==i){let a=new Set(e.db.getAppointments().filter(a=>a.therapistId===i).map(a=>a.patientId));j=j.filter(b=>a.has(b.id))}j.sort((a,b)=>{let c=new Date(a.registrationDate).getTime(),d=new Date(b.registrationDate).getTime();return d!==c?d-c:a.id.localeCompare(b.id)});let k=b?j.findIndex(a=>a.id===b)+1:0;if(b&&0===k)return{patients:[],nextCursor:null};let l=j.slice(k,k+a),m=l.length===a&&l.length>0?l[l.length-1].id:null;return{patients:l.map(a=>({id:a.id,name:a.name,email:a.email,phone:a.phone,status:a.status,lastVisit:a.lastVisit,avatarUrl:a.avatarUrl,medicalAlerts:a.medicalAlerts})),nextCursor:m}},l=async a=>(await g(300),e.db.getPatientById(a)),m=async a=>{await g(400);let b={id:`patient_${Date.now()}`,...a,lastVisit:new Date().toISOString()};return e.db.addPatient(b),f.g.emit("patients:changed"),b},n=async a=>(await g(400),e.db.updatePatient(a),f.g.emit("patients:changed"),a),o=async(a,b)=>{await g(600);let c=e.db.getPatientById(a);if(!c)throw Error("Paciente n\xe3o encontrado.");let d={name:b.name,url:"#",type:b.type,size:b.size},h={...c,attachments:[...c.attachments||[],d]};return e.db.updatePatient(h),f.g.emit("patients:changed"),d},p=async(a,b)=>{await g(200);let c=e.db.getPatientById(a);if(!c)throw Error("Paciente n\xe3o encontrado.");let d={id:`log_${Date.now()}`,...b},h={...c,communicationLogs:[d,...c.communicationLogs||[]]};return e.db.updatePatient(h),f.g.emit("patients:changed"),h},q=async(a,b)=>{await g(200);let c=e.db.getPatientById(a);if(!c)throw Error("Paciente n\xe3o encontrado.");let d={...c,painPoints:b};return e.db.updatePatient(d),f.g.emit("patients:changed"),d}},28471:(a,b,c)=>{c.d(b,{As:()=>g,Ez:()=>h}),c(8732);var d=c(82015);c(17367),c(4183),c(26821),c(737),c(7976);let e=(0,d.createContext)(void 0);function f(){let a=(0,d.useContext)(e);if(void 0===a)throw Error("useApp must be used within an AppProvider");return a}let g=()=>{let{user:a,isAuthenticated:b,isLoading:c,login:d,logout:e}=f();return{user:a,isAuthenticated:b,isLoading:c,login:d,logout:e}},h=()=>{let{therapists:a,patients:b,appointments:c,dataLoading:d,error:e,refetch:g}=f();return{therapists:a,patients:b,appointments:c,isLoading:d,error:e,refetch:g}}},40396:(a,b,c)=>{c.d(b,{g:()=>h});var d=c(72393),e=c(4183);let f=a=>new Promise(b=>setTimeout(b,a));class g{on(a,b){this.events[a]||(this.events[a]=[]),this.events[a].push(b)}off(a,b){this.events[a]&&(this.events[a]=this.events[a].filter(a=>a!==b))}emit(a,...b){this.events[a]&&this.events[a].forEach(a=>a(...b))}async getEvents(){return await f(300),[...this.eventsData].sort((a,b)=>b.startDate.getTime()-a.startDate.getTime())}async getEventById(a){await f(200);let b=this.eventsData.find(b=>b.id===a);return b?JSON.parse(JSON.stringify(b)):void 0}async getRegistrationsByEventId(a){return await f(200),this.registrationsData.filter(b=>b.eventId===a)}async saveEvent(a,b){if(await f(400),a.id){let b=this.eventsData.findIndex(b=>b.id===a.id);if(b>-1){let c=this.eventsData[b];if(!c)throw Error("Event not found");let d={...c,...a,id:c.id,registrations:c.registrations,providers:c.providers};return this.eventsData[b]=d,this.emit("events:changed"),d}throw Error("Event not found")}{let c={...a,id:`event_${Date.now()}`,registrations:[],providers:[],organizerId:b};return this.eventsData.unshift(c),this.emit("events:changed"),c}}async checkInParticipant(a,b,c){await f(500);let e=this.registrationsData.findIndex(b=>b.id===a);if(-1===e)throw Error("Inscri\xe7\xe3o n\xe3o encontrada.");let g=this.registrationsData[e];if(!g)throw Error("Inscri\xe7\xe3o n\xe3o encontrada.");if(g.status===d.m7.Attended)throw Error("Participante j\xe1 fez check-in.");let h={...g,status:d.m7.Attended,checkedInAt:new Date,checkedInBy:c};this.registrationsData[e]=h;let i=this.eventsData.findIndex(a=>a.id===g.eventId);if(i>-1){let b=this.eventsData[i];if(b){let c=b.registrations.findIndex(b=>b.id===a);c>-1?b.registrations[c]=h:b.registrations.push(h)}}return this.emit("events:changed"),h}async confirmProvider(a){for(let b of(await f(500),this.eventsData)){let c=b.providers.findIndex(b=>b.id===a);if(c>-1){let a=b.providers[c];if(a){if(a.status!==d.aJ.Applied)throw Error("Apenas inscri\xe7\xf5es com status 'Inscrito' podem ser confirmadas.");return a.status=d.aJ.Confirmed,this.emit("events:changed"),a}}}throw Error("Prestador de servi\xe7o n\xe3o encontrado.")}async payProvider(a){for(let b of(await f(500),this.eventsData)){let c=b.providers.findIndex(b=>b.id===a);if(c>-1){let a=b.providers[c];if(a){if(a.status!==d.aJ.Confirmed)throw Error("Apenas prestadores confirmados podem receber pagamento.");return a.status=d.aJ.Paid,this.emit("events:changed"),a}}}throw Error("Prestador de servi\xe7o n\xe3o encontrado.")}constructor(){this.events={},this.eventsData=[...e._X],this.registrationsData=[...e.ZM]}}let h=new g},92273:(a,b,c)=>{c.d(b,{db:()=>j});var d=c(4183);let e=[...d.N],f=[...d.ZS],g=[...d.Tf],h=[...d.BT],i=[...d.eB],j={getPatients:()=>[...e],getPatientById:a=>e.find(b=>b.id===a),addPatient:a=>{e.unshift(a)},updatePatient:a=>{e=e.map(b=>b.id===a.id?a:b)},getAppointments:()=>[...f],saveAppointment:a=>{let b=f.findIndex(b=>b.id===a.id);b>-1?f[b]=a:f.push(a)},deleteAppointment:a=>{f=f.filter(b=>b.id!==a)},deleteAppointmentSeries:(a,b)=>{f=f.filter(c=>!(c.seriesId===a&&c.startTime>=b))},getSoapNotes:()=>[...g],saveSoapNote:a=>{let b=g.findIndex(b=>b.id===a.id);b>-1?g[b]=a:g.unshift(a)},getTreatmentPlans:()=>[...h],updateTreatmentPlan:a=>{let b=h.findIndex(b=>b.id===a.id);b>-1&&(h[b]=a)},getExercisePrescriptions:()=>[...i],setExercisePrescriptionsForPlan:(a,b)=>{(i=i.filter(b=>b.treatmentPlanId!==a)).push(...b)}}}};