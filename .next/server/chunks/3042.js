"use strict";exports.id=3042,exports.ids=[3042],exports.modules={19119:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{E:()=>h});var e=c(8732),f=c(71253),g=a([f]);function h({className:a,...b}){return(0,e.jsx)("div",{className:(0,f.cn)("animate-pulse rounded-md bg-muted",a),...b})}f=(g.then?(await g)():g)[0],d()}catch(a){d(a)}})},22320:(a,b,c)=>{c.d(b,{Fq:()=>h,td:()=>i,z0:()=>g});var d=c(92273),e=c(40396);let f=a=>new Promise(b=>setTimeout(b,a)),g=async a=>{await f(300);let b=d.db.getTreatmentPlans().find(b=>b.patientId===a);if(b){let a=await h(b.id);return{...b,exercises:a}}},h=async a=>(await f(300),d.db.getExercisePrescriptions().filter(b=>b.treatmentPlanId===a)),i=async(a,b)=>{await f(400);let c=d.db.getTreatmentPlans(),g=c.findIndex(b=>b.patientId===a);if(g>-1){let a=c[g],f=(b.exercises||[]).map((b,c)=>({id:`ex_${Date.now()}_${c}`,treatmentPlanId:a.id,exerciseName:b.exerciseName,sets:b.sets,repetitions:b.repetitions,resistanceLevel:"A definir",progressionCriteria:"A definir"})),h={...a,treatmentGoals:b.treatmentGoals||a.treatmentGoals,exercises:f.length>0?f:a.exercises};return d.db.updateTreatmentPlan(h),d.db.setExercisePrescriptionsForPlan(a.id,f),e.g.emit("treatmentPlans:changed"),h}throw Error("Plano de tratamento n\xe3o encontrado para este paciente.")}},33042:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>q});var e=c(8732),f=c(82015),g=c(42227),h=c(28471),i=c(99597),j=c(22320),k=c(75355),l=c(19119),m=c(51302),n=c(99670),o=c(69668),p=a([l]);l=(p.then?(await p)():p)[0];let q=()=>{let[a,b]=(0,f.useState)(null),[c,d]=(0,f.useState)([]),[p,q]=(0,f.useState)([]),[r,s]=(0,f.useState)(!0),{user:t}=(0,h.As)(),{showToast:u}=(0,i.dj)(),v=(0,f.useCallback)(async()=>{if(!t?.patientId)return void s(!1);s(!0);try{let[a,c]=await Promise.all([j.z0(t.patientId),o.B(t.patientId)]);if(b(a||null),q(c),a?.exercises){let b=await Promise.all(a.exercises.map(async a=>{let b=await k.t5(a.exerciseName);return b?{...b,prescription:a}:null}));d(b.filter(a=>null!==a))}else d([])}catch(a){u("Erro ao carregar seu plano de exerc\xedcios.","error")}finally{s(!1)}},[t,u]);(0,f.useEffect)(()=>{v()},[v]);let w=async a=>{if(await o.s(a),u(`Avalia\xe7\xe3o para "${a.exerciseName}" salva!`,"success"),t?.patientId){let a=await o.B(t.patientId);q(a)}};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(g.A,{title:"Meus Exerc\xedcios",subtitle:"Veja seu plano de exerc\xedcios e registre seu feedback ap\xf3s cada sess\xe3o."}),(0,e.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:r?Array.from({length:3}).map((a,b)=>(0,e.jsx)(l.E,{className:"h-80 w-full rounded-2xl"},b)):a&&0!==c.length?c.map(a=>{let b=p.find(b=>b.exerciseId===a.id&&b.date.toDateString()===new Date().toDateString());return(0,e.jsx)(n.A,{exercise:a,prescription:a.prescription,todaysEvaluation:b,onSave:w},a.id)}):(0,e.jsxs)("div",{className:"col-span-full text-center p-12 bg-white rounded-2xl shadow-sm",children:[(0,e.jsx)(m.O0M,{className:"w-16 h-16 mx-auto text-slate-300 mb-4"}),(0,e.jsx)("h3",{className:"text-lg font-semibold text-slate-700",children:"Nenhum plano de exerc\xedcios ativo"}),(0,e.jsx)("p",{className:"text-slate-500 mt-1",children:"Seu fisioterapeuta ainda n\xe3o prescreveu um plano para voc\xea."})]})})]})};d()}catch(a){d(a)}})},42227:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(8732);c(82015);let e=({title:a,subtitle:b,children:c})=>(0,d.jsxs)("div",{className:"pb-8 md:flex md:items-center md:justify-between",children:[(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold leading-tight text-slate-900 tracking-tight",children:a}),(0,d.jsx)("p",{className:"mt-2 text-lg text-slate-600",children:b})]}),(0,d.jsx)("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:c})]})},69668:(a,b,c)=>{c.d(b,{B:()=>f,s:()=>g});let d="fisioflow_evaluations",e=()=>{let a=sessionStorage.getItem(d);return a?JSON.parse(a).map(a=>({...a,date:new Date(a.date)})):[]},f=async a=>(await new Promise(a=>setTimeout(a,200)),e().filter(b=>b.patientId===a)),g=async a=>{var b;await new Promise(a=>setTimeout(a,300));let c=e(),f={id:`eval_${Date.now()}`,date:new Date,...a},g=new Date().toDateString();return b=[...c.filter(a=>a.patientId!==f.patientId||a.exerciseId!==f.exerciseId||a.date.toDateString()!==g),f],sessionStorage.setItem(d,JSON.stringify(b)),f}},71253:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{cn:()=>h});var e=c(50802),f=c(75979),g=a([e,f]);function h(...a){return(0,f.twMerge)((0,e.clsx)(a))}[e,f]=g.then?(await g)():g,d()}catch(a){d(a)}})},75355:(a,b,c)=>{c.d(b,{Ah:()=>m,CC:()=>o,C_:()=>l,K7:()=>p,O7:()=>k,WV:()=>j,st:()=>n,t5:()=>i,xY:()=>h});var d=c(4183);let e=[...d.St],f=[...new Set(d.St.map(a=>a.category))].sort(),g=a=>new Promise(b=>setTimeout(b,a)),h=async()=>(await g(500),{exercises:[...e].sort((a,b)=>a.name.localeCompare(b.name)),categories:[...f]}),i=async a=>(await g(50),e.find(b=>b.name.toLowerCase()===a.toLowerCase())),j=async a=>{await g(400);let b={id:`ex_${Date.now()}`,...a};return f.includes(b.category)||(f.push(b.category),f.sort()),e.unshift(b),b},k=async a=>(await g(400),e=e.map(b=>b.id===a.id?a:b),f.includes(a.category)||(f.push(a.category),f.sort()),a),l=async a=>{await g(400),e=e.filter(b=>b.id!==a)},m=async a=>{await g(100),f.includes(a)||(f.push(a),f.sort())},n=async(a,b)=>{await g(200);let c=f.indexOf(a);c>-1&&(f[c]=b,f.sort()),e=e.map(c=>c.category===a?{...c,category:b}:c)},o=async(a,b)=>{await g(300),f.includes(b)||(f.push(b),f.sort());let c=e.filter(b=>b.category===a).map(a=>({...a,id:`ex_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:`${a.name}`,category:b}));e.push(...c)},p=async a=>{await g(200),f=f.filter(b=>b!==a),e=e.filter(b=>b.category!==a)}},90393:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(8732);c(82015);var e=c(51302);let f=({selectedScore:a,onSelectScore:b})=>{let c=a=>a>=0&&a<=3?{color:"text-green-600",bgColor:"bg-green-100",hoverBg:"hover:bg-green-200",icon:(0,d.jsx)(e.pnY,{className:"w-5 h-5"})}:a>=4&&a<=6?{color:"text-amber-600",bgColor:"bg-amber-100",hoverBg:"hover:bg-amber-200",icon:(0,d.jsx)(e.D3j,{className:"w-5 h-5"})}:a>=7&&a<=10?{color:"text-red-600",bgColor:"bg-red-100",hoverBg:"hover:bg-red-200",icon:(0,d.jsx)(e.Vdx,{className:"w-5 h-5"})}:{color:"text-slate-600",bgColor:"bg-slate-100",hoverBg:"hover:bg-slate-200",icon:null};return(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-semibold text-teal-700 mb-2 block",children:"Escala Visual de Dor (EVA)"}),(0,d.jsx)("div",{className:"flex items-center justify-between space-x-1 bg-slate-50 p-2 rounded-lg",children:Array.from({length:11},(a,b)=>b).map(e=>{let f=a===e,{color:g,bgColor:h,hoverBg:i}=c(e);return(0,d.jsx)("button",{type:"button",onClick:()=>b(e),className:`w-8 h-8 flex items-center justify-center rounded-full text-sm font-bold transition-all duration-200
                ${f?`${g} ${h} ring-2 ring-offset-1 ring-current`:`text-slate-600 ${i}`}
              `,title:`Dor n\xedvel ${e}`,children:e},e)})}),void 0!==a&&(0,d.jsxs)("div",{className:"mt-2 flex items-center justify-center p-2 rounded-md bg-slate-100",children:[(0,d.jsxs)("div",{className:`mr-2 ${c(a).color}`,children:[" ",c(a).icon]}),(0,d.jsxs)("p",{className:`text-sm font-semibold ${c(a).color}`,children:["N\xedvel de dor selecionado: ",a]})]})]})}},99597:(a,b,c)=>{c.d(b,{dj:()=>g}),c(8732);var d=c(82015);c(54822);let e=(0,d.createContext)(void 0),f=(0,d.createContext)(void 0),g=()=>{let a=(()=>{let a=(0,d.useContext)(e);return void 0===a?{enabled:!1,logRouterChange:()=>{},logHookCall:()=>{},logContextAccess:()=>{}}:a})(),b=(0,d.useContext)(f);if(a.logContextAccess("ToastContext","useToast"),!b){let a=Error("useToast must be used within a ToastProvider");throw console.error("âŒ Toast Context Error:",a.message),a}return{showToast:b.showToast}}},99670:(a,b,c)=>{c.d(b,{A:()=>j});var d=c(8732),e=c(82015),f=c(28471),g=c(90393),h=c(51302);let i=[{value:"easy",label:"F\xe1cil",icon:(0,d.jsx)(h.pnY,{className:"w-6 h-6 text-green-500"})},{value:"medium",label:"M\xe9dio",icon:(0,d.jsx)(h.D3j,{className:"w-6 h-6 text-amber-500"})},{value:"hard",label:"Dif\xedcil",icon:(0,d.jsx)(h.Vdx,{className:"w-6 h-6 text-red-500"})}],j=({exercise:a,prescription:b,todaysEvaluation:c,onSave:j})=>{let[k,l]=(0,e.useState)(c?.rating),[m,n]=(0,e.useState)(c?.painLevel),[o,p]=(0,e.useState)(c?.comments||""),[q,r]=(0,e.useState)(!1),{user:s}=(0,f.As)();(0,e.useEffect)(()=>{l(c?.rating),n(c?.painLevel),p(c?.comments||"")},[c]);let t=async()=>{if(!s?.patientId||!k||void 0===m)return void alert("Por favor, selecione a dificuldade e o n\xedvel de dor.");r(!0),await j({patientId:s.patientId,exerciseId:a.id,exerciseName:a.name,rating:k,painLevel:m,comments:o}),r(!1)};return(0,d.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm flex flex-col overflow-hidden",children:[(0,d.jsx)("img",{src:a.media.thumbnailUrl,alt:a.name,className:"w-full h-40 object-cover"}),(0,d.jsxs)("div",{className:"p-4 flex-grow flex flex-col",children:[(0,d.jsx)("h3",{className:"text-lg font-bold text-slate-800",children:a.name}),(0,d.jsxs)("p",{className:"text-sm text-slate-600 mb-2",children:[b.sets," s\xe9ries de ",b.repetitions," repeti\xe7\xf5es"]}),(0,d.jsx)("p",{className:"text-xs text-slate-500 flex-grow",children:a.description})]}),(0,d.jsxs)("div",{className:"p-4 bg-slate-50 border-t",children:[(0,d.jsx)("h4",{className:"font-semibold text-slate-700 mb-3 text-center",children:"Como foi a execu\xe7\xe3o hoje?"}),c?(0,d.jsxs)("div",{className:"p-4 bg-green-50 text-green-800 border-l-4 border-green-400 rounded-r-lg text-sm text-center font-semibold flex items-center justify-center",children:[(0,d.jsx)(h.rAV,{className:"w-5 h-5 mr-3"}),"Avaliado hoje! Voc\xea pode editar sua avalia\xe7\xe3o abaixo."]}):null,(0,d.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-slate-600 block mb-2 text-center",children:"Dificuldade"}),(0,d.jsx)("div",{className:"flex justify-around",children:i.map(a=>(0,d.jsxs)("button",{onClick:()=>l(a.value),className:`flex flex-col items-center p-2 rounded-lg w-20 transition-all ${k===a.value?"bg-teal-100 ring-2 ring-teal-500":"hover:bg-slate-100"}`,children:[a.icon,(0,d.jsx)("span",{className:"text-xs mt-1 font-medium",children:a.label})]},a.value))})]}),(0,d.jsx)(g.A,{selectedScore:m,onSelectScore:n}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Coment\xe1rios (opcional)"}),(0,d.jsx)("textarea",{value:o,onChange:a=>p(a.target.value),rows:2,className:"mt-1 w-full p-2 border border-slate-300 rounded-lg",placeholder:"Ex: Senti um estalo no joelho, doeu mais na \xfaltima s\xe9rie..."})]}),(0,d.jsxs)("button",{onClick:t,disabled:q||void 0===k||void 0===m,className:"w-full inline-flex items-center justify-center rounded-lg border border-transparent bg-teal-500 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-teal-600 disabled:bg-teal-300",children:[q?(0,d.jsx)(h.aHM,{className:"w-5 h-5 animate-spin mr-2"}):(0,d.jsx)(h.eMP,{className:"w-5 h-5 mr-2"}),q?"Salvando...":"Salvar Avalia\xe7\xe3o"]})]})]})]})}}};